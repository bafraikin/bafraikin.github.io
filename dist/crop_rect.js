!function(t){function e(e){for(var r,i,o=e[0],a=e[1],s=0,c=[];s<o.length;s++)i=o[s],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&c.push(n[i][0]),n[i]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r]);for(l&&l(e);c.length;)c.shift()()}var r={},n={0:0};function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(t){var e=[],r=n[t];if(0!==r)if(r)e.push(r[2]);else{var o=new Promise((function(e,i){r=n[t]=[e,i]}));e.push(r[2]=o);var a,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=function(t){return i.p+""+({2:"pdfjsWorker"}[t]||t)+".js"}(t);var l=new Error;a=function(e){s.onerror=s.onload=null,clearTimeout(c);var r=n[t];if(0!==r){if(r){var i=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",l.name="ChunkLoadError",l.type=i,l.request=o,r[1](l)}n[t]=void 0}};var c=setTimeout((function(){a({type:"timeout",target:s})}),12e4);s.onerror=s.onload=a,document.head.appendChild(s)}return Promise.all(e)},i.m=t,i.c=r,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i.oe=function(t){throw console.error(t),t};var o=window.webpackJsonp=window.webpackJsonp||[],a=o.push.bind(o);o.push=e,o=o.slice();for(var s=0;s<o.length;s++)e(o[s]);var l=a;i(i.s=133)}([,,,,,function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(8),i=r(7);e.Factory={addGetterSetter:function(t,e,r,n,i){this.addGetter(t,e,r),this.addSetter(t,e,n,i),this.addOverloadedGetterSetter(t,e)},addGetter:function(t,e,r){var i="get"+n.Util._capitalize(e);t.prototype[i]=t.prototype[i]||function(){var t=this.attrs[e];return void 0===t?r:t}},addSetter:function(t,r,i,o){var a="set"+n.Util._capitalize(r);t.prototype[a]||e.Factory.overWriteSetter(t,r,i,o)},overWriteSetter:function(t,e,r,i){var o="set"+n.Util._capitalize(e);t.prototype[o]=function(t){return r&&null!=t&&(t=r.call(this,t,e)),this._setAttr(e,t),i&&i.call(this),this}},addComponentsGetterSetter:function(t,e,r,o,a){var s,l,c=r.length,u=n.Util._capitalize,h="get"+u(e),d="set"+u(e);t.prototype[h]=function(){var t={};for(s=0;s<c;s++)t[l=r[s]]=this.getAttr(e+u(l));return t};var f=i.getComponentValidator(r);t.prototype[d]=function(t){var r,n=this.attrs[e];for(r in o&&(t=o.call(this,t)),f&&f.call(this,t,e),t)t.hasOwnProperty(r)&&this._setAttr(e+u(r),t[r]);return this._fireChangeEvent(e,n,t),a&&a.call(this),this},this.addOverloadedGetterSetter(t,e)},addOverloadedGetterSetter:function(t,e){var r=n.Util._capitalize(e),i="set"+r,o="get"+r;t.prototype[e]=function(){return arguments.length?(this[i](arguments[0]),this):this[o]()}},addDeprecatedGetterSetter:function(t,e,r,i){n.Util.error("Adding deprecated "+e);var o="get"+n.Util._capitalize(e),a=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";t.prototype[o]=function(){n.Util.error(a);var t=this.attrs[e];return void 0===t?r:t},this.addSetter(t,e,i,(function(){n.Util.error(a)})),this.addOverloadedGetterSetter(t,e)},backCompat:function(t,e){n.Util.each(e,(function(e,r){var i=t.prototype[r],o="get"+n.Util._capitalize(e),a="set"+n.Util._capitalize(e);function s(){i.apply(this,arguments),n.Util.error('"'+e+'" method is deprecated and will be removed soon. Use ""'+r+'" instead.')}t.prototype[e]=s,t.prototype[o]=s,t.prototype[a]=s}))},afterSetFilter:function(){this._filterUpToDate=!1}}},function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=Math.PI/180;var n=function(t){var e=t.indexOf("msie ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(t.indexOf("trident/")>0){var r=t.indexOf("rv:");return parseInt(t.substring(r+3,t.indexOf(".",r)),10)}var n=t.indexOf("edge/");return n>0&&parseInt(t.substring(n+5,t.indexOf(".",n)),10)};e._parseUA=function(t){var e=t.toLowerCase(),r=/(chrome)[ /]([\w.]+)/.exec(e)||/(webkit)[ /]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ /]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],i=!!t.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i),o=!!t.match(/IEMobile/i);return{browser:r[1]||"",version:r[2]||"0",isIE:n(e),mobile:i,ieMobile:o}},e.glob=void 0!==t?t:"undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:{},e.Konva={_global:e.glob,version:"4.1.2",isBrowser:"undefined"!=typeof window&&("[object Window]"==={}.toString.call(window)||"[object global]"==={}.toString.call(window)),isUnminified:/param/.test(function(t){}.toString()),dblClickWindow:400,getAngle:function(t){return e.Konva.angleDeg?t*r:t},enableTrace:!1,_pointerEventsEnabled:!1,hitOnDragEnabled:!1,captureTouchEventsEnabled:!1,listenClickTap:!1,inDblClickWindow:!1,pixelRatio:void 0,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:function(){return e.Konva.DD.isDragging},isDragReady:function(){return!!e.Konva.DD.node},UA:e._parseUA(e.glob.navigator&&e.glob.navigator.userAgent||""),document:e.glob.document,_injectGlobal:function(t){e.glob.Konva=t},_parseUA:e._parseUA},e._NODES_REGISTRY={},e._registerNode=function(t){e._NODES_REGISTRY[t.prototype.getClassName()]=t,e.Konva[t.prototype.getClassName()]=t}}).call(this,r(19))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(6),i=r(8);function o(t){return i.Util._isString(t)?'"'+t+'"':"[object Number]"===Object.prototype.toString.call(t)?t:i.Util._isBoolean(t)?t:Object.prototype.toString.call(t)}e.RGBComponent=function(t){return t>255?255:t<0?0:Math.round(t)},e.alphaComponent=function(t){return t>1?1:t<1e-4?1e-4:t},e.getNumberValidator=function(){if(n.Konva.isUnminified)return function(t,e){return i.Util._isNumber(t)||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}},e.getNumberOrAutoValidator=function(){if(n.Konva.isUnminified)return function(t,e){return i.Util._isNumber(t)||"auto"===t||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}},e.getStringValidator=function(){if(n.Konva.isUnminified)return function(t,e){return i.Util._isString(t)||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}},e.getFunctionValidator=function(){if(n.Konva.isUnminified)return function(t,e){return i.Util._isFunction(t)||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),t}},e.getNumberArrayValidator=function(){if(n.Konva.isUnminified)return function(t,e){return i.Util._isArray(t)?t.forEach((function(t){i.Util._isNumber(t)||i.Util.warn('"'+e+'" attribute has non numeric element '+t+". Make sure that all elements are numbers.")})):i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.'),t}},e.getBooleanValidator=function(){if(n.Konva.isUnminified)return function(t,e){return!0===t||!1===t||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}},e.getComponentValidator=function(t){if(n.Konva.isUnminified)return function(e,r){return i.Util.isObject(e)||i.Util.warn(o(e)+' is a not valid value for "'+r+'" attribute. The value should be an object with properties '+t),e}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(6),i=function(){function t(){}return t.toCollection=function(e){var r,n=new t,i=e.length;for(r=0;r<i;r++)n.push(e[r]);return n},t._mapMethod=function(e){t.prototype[e]=function(){var t,r=this.length,n=[].slice.call(arguments);for(t=0;t<r;t++)this[t][e].apply(this[t],n);return this}},t.mapMethods=function(e){var r=e.prototype;for(var n in r)t._mapMethod(n)},t}();e.Collection=i,i.prototype=[],i.prototype.each=function(t){for(var e=0;e<this.length;e++)t(this[e],e)},i.prototype.toArray=function(){var t,e=[],r=this.length;for(t=0;t<r;t++)e.push(this[t]);return e};var o=function(){function t(t){void 0===t&&(t=[1,0,0,1,0,0]),this.m=t&&t.slice()||[1,0,0,1,0,0]}return t.prototype.copy=function(){return new t(this.m)},t.prototype.point=function(t){var e=this.m;return{x:e[0]*t.x+e[2]*t.y+e[4],y:e[1]*t.x+e[3]*t.y+e[5]}},t.prototype.translate=function(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this},t.prototype.scale=function(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),n=this.m[0]*e+this.m[2]*r,i=this.m[1]*e+this.m[3]*r,o=this.m[0]*-r+this.m[2]*e,a=this.m[1]*-r+this.m[3]*e;return this.m[0]=n,this.m[1]=i,this.m[2]=o,this.m[3]=a,this},t.prototype.getTranslation=function(){return{x:this.m[4],y:this.m[5]}},t.prototype.skew=function(t,e){var r=this.m[0]+this.m[2]*e,n=this.m[1]+this.m[3]*e,i=this.m[2]+this.m[0]*t,o=this.m[3]+this.m[1]*t;return this.m[0]=r,this.m[1]=n,this.m[2]=i,this.m[3]=o,this},t.prototype.multiply=function(t){var e=this.m[0]*t.m[0]+this.m[2]*t.m[1],r=this.m[1]*t.m[0]+this.m[3]*t.m[1],n=this.m[0]*t.m[2]+this.m[2]*t.m[3],i=this.m[1]*t.m[2]+this.m[3]*t.m[3],o=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],a=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=e,this.m[1]=r,this.m[2]=n,this.m[3]=i,this.m[4]=o,this.m[5]=a,this},t.prototype.invert=function(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,r=-this.m[1]*t,n=-this.m[2]*t,i=this.m[0]*t,o=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),a=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=e,this.m[1]=r,this.m[2]=n,this.m[3]=i,this.m[4]=o,this.m[5]=a,this},t.prototype.getMatrix=function(){return this.m},t.prototype.setAbsolutePosition=function(t,e){var r=this.m[0],n=this.m[1],i=this.m[2],o=this.m[3],a=this.m[4],s=(r*(e-this.m[5])-n*(t-a))/(r*o-n*i),l=(t-a-i*s)/r;return this.translate(l,s)},t}();e.Transform=o;var a=Math.PI/180,s=180/Math.PI,l={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},c=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,u=[];e.Util={_isElement:function(t){return!(!t||1!=t.nodeType)},_isFunction:function(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isPlainObject:function(t){return!!t&&t.constructor===Object},_isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},_isNumber:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&!isNaN(t)&&isFinite(t)},_isString:function(t){return"[object String]"===Object.prototype.toString.call(t)},_isBoolean:function(t){return"[object Boolean]"===Object.prototype.toString.call(t)},isObject:function(t){return t instanceof Object},isValidSelector:function(t){if("string"!=typeof t)return!1;var e=t[0];return"#"===e||"."===e||e===e.toUpperCase()},_sign:function(t){return 0===t?0:t>0?1:-1},requestAnimFrame:function(t){u.push(t),1===u.length&&requestAnimationFrame((function(){var t=u;u=[],t.forEach((function(t){t()}))}))},createCanvasElement:function(){var t=document.createElement("canvas");try{t.style=t.style||{}}catch(t){}return t},createImageElement:function(){return document.createElement("img")},_isInDocument:function(t){for(;t=t.parentNode;)if(t==document)return!0;return!1},_simplifyArray:function(t){var r,n,i=[],o=t.length,a=e.Util;for(r=0;r<o;r++)n=t[r],a._isNumber(n)?n=Math.round(1e3*n)/1e3:a._isString(n)||(n=n.toString()),i.push(n);return i},_urlToImage:function(t,e){var r=new n.glob.Image;r.onload=function(){e(r)},r.src=t},_rgbToHex:function(t,e,r){return((1<<24)+(t<<16)+(e<<8)+r).toString(16).slice(1)},_hexToRgb:function(t){t=t.replace("#","");var e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:255&e}},getRandomColor:function(){for(var t=(16777215*Math.random()<<0).toString(16);t.length<6;)t="0"+t;return"#"+t},get:function(t,e){return void 0===t?e:t},getRGB:function(t){var e;return t in l?{r:(e=l[t])[0],g:e[1],b:e[2]}:"#"===t[0]?this._hexToRgb(t.substring(1)):"rgb("===t.substr(0,4)?(e=c.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA:function(t){return t=t||"black",e.Util._namedColorToRBA(t)||e.Util._hex3ColorToRGBA(t)||e.Util._hex6ColorToRGBA(t)||e.Util._rgbColorToRGBA(t)||e.Util._rgbaColorToRGBA(t)||e.Util._hslColorToRGBA(t)},_namedColorToRBA:function(t){var e=l[t.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA:function(t){if(0===t.indexOf("rgb(")){var e=(t=t.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA:function(t){if(0===t.indexOf("rgba(")){var e=(t=t.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex6ColorToRGBA:function(t){if("#"===t[0]&&7===t.length)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:1}},_hex3ColorToRGBA:function(t){if("#"===t[0]&&4===t.length)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:1}},_hslColorToRGBA:function(t){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(t)){var e=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t),r=(e[0],e.slice(1)),n=Number(r[0])/360,i=Number(r[1])/100,o=Number(r[2])/100,a=void 0,s=void 0,l=void 0;if(0===i)return l=255*o,{r:Math.round(l),g:Math.round(l),b:Math.round(l),a:1};for(var c=2*o-(a=o<.5?o*(1+i):o+i-o*i),u=[0,0,0],h=0;h<3;h++)(s=n+1/3*-(h-1))<0&&s++,s>1&&s--,l=6*s<1?c+6*(a-c)*s:2*s<1?a:3*s<2?c+(a-c)*(2/3-s)*6:c,u[h]=255*l;return{r:Math.round(u[0]),g:Math.round(u[1]),b:Math.round(u[2]),a:1}}},haveIntersection:function(t,e){return!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y)},cloneObject:function(t){var e={};for(var r in t)this._isPlainObject(t[r])?e[r]=this.cloneObject(t[r]):this._isArray(t[r])?e[r]=this.cloneArray(t[r]):e[r]=t[r];return e},cloneArray:function(t){return t.slice(0)},_degToRad:function(t){return t*a},_radToDeg:function(t){return t*s},_capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},throw:function(t){throw new Error("Konva error: "+t)},error:function(t){console.error("Konva error: "+t)},warn:function(t){n.Konva.showWarnings&&console.warn("Konva warning: "+t)},extend:function(t,e){function r(){this.constructor=t}r.prototype=e.prototype;var n=t.prototype;for(var i in t.prototype=new r,n)n.hasOwnProperty(i)&&(t.prototype[i]=n[i]);t.__super__=e.prototype,t.super=e},_getControlPoints:function(t,e,r,n,i,o,a){var s=Math.sqrt(Math.pow(r-t,2)+Math.pow(n-e,2)),l=Math.sqrt(Math.pow(i-r,2)+Math.pow(o-n,2)),c=a*s/(s+l),u=a*l/(s+l);return[r-c*(i-t),n-c*(o-e),r+u*(i-t),n+u*(o-e)]},_expandPoints:function(t,r){var n,i,o=t.length,a=[];for(n=2;n<o-2;n+=2)i=e.Util._getControlPoints(t[n-2],t[n-1],t[n],t[n+1],t[n+2],t[n+3],r),a.push(i[0]),a.push(i[1]),a.push(t[n]),a.push(t[n+1]),a.push(i[2]),a.push(i[3]);return a},each:function(t,e){for(var r in t)e(r,t[r])},_inRange:function(t,e,r){return e<=t&&t<r},_getProjectionToSegment:function(t,e,r,n,i,o){var a,s,l,c=(t-r)*(t-r)+(e-n)*(e-n);if(0==c)a=t,s=e,l=(i-r)*(i-r)+(o-n)*(o-n);else{var u=((i-t)*(r-t)+(o-e)*(n-e))/c;u<0?(a=t,s=e,l=(t-i)*(t-i)+(e-o)*(e-o)):u>1?(a=r,s=n,l=(r-i)*(r-i)+(n-o)*(n-o)):l=((a=t+u*(r-t))-i)*(a-i)+((s=e+u*(n-e))-o)*(s-o)}return[a,s,l]},_getProjectionToLine:function(t,r,n){var i=e.Util.cloneObject(t),o=Number.MAX_VALUE;return r.forEach((function(a,s){if(n||s!==r.length-1){var l=r[(s+1)%r.length],c=e.Util._getProjectionToSegment(a.x,a.y,l.x,l.y,t.x,t.y),u=c[0],h=c[1],d=c[2];d<o&&(i.x=u,i.y=h,o=d)}})),i},_prepareArrayForTween:function(t,r,n){var i,o=[],a=[];if(t.length>r.length){var s=r;r=t,t=s}for(i=0;i<t.length;i+=2)o.push({x:t[i],y:t[i+1]});for(i=0;i<r.length;i+=2)a.push({x:r[i],y:r[i+1]});var l=[];return a.forEach((function(t){var r=e.Util._getProjectionToLine(t,o,n);l.push(r.x),l.push(r.y)})),l},_prepareToStringify:function(t){var r;for(var n in t.visitedByCircularReferenceRemoval=!0,t)if(t.hasOwnProperty(n)&&t[n]&&"object"==typeof t[n])if(r=Object.getOwnPropertyDescriptor(t,n),t[n].visitedByCircularReferenceRemoval||e.Util._isElement(t[n])){if(!r.configurable)return null;delete t[n]}else if(null===e.Util._prepareToStringify(t[n])){if(!r.configurable)return null;delete t[n]}return delete t.visitedByCircularReferenceRemoval,t},_assign:function(t,e){for(var r in e)t[r]=e[r];return t},_getFirstPointerId:function(t){return t.touches?t.changedTouches[0].identifier:999}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(8),i=r(5),o=r(15),a=r(6),s=r(20),l=r(7);e.ids={},e.names={};e._removeId=function(t,r){t&&e.ids[t]===r&&delete e.ids[t]},e._addName=function(t,r){r&&(e.names[r]||(e.names[r]=[]),e.names[r].push(t))},e._removeName=function(t,r){if(t){var n=e.names[t];if(n){for(var i=0;i<n.length;i++){n[i]._id===r&&n.splice(i,1)}0===n.length&&delete e.names[t]}}};var c=["id"],u=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(" "),h=["scaleXChange.konva","scaleYChange.konva"].join(" "),d=new n.Collection,f=1,p=function(){function t(t){var e=this;this._id=f++,this.eventListeners={},this.attrs={},this.index=0,this.parent=null,this._cache=new Map,this._lastPos=null,this._filterUpToDate=!1,this._isUnderCache=!1,this.children=d,this._dragEventId=null,this.setAttrs(t),this.on(u,(function(){e._clearCache("transform"),e._clearSelfAndDescendantCache("absoluteTransform")})),this.on(h,(function(){e._clearSelfAndDescendantCache("absoluteScale")})),this.on("visibleChange.konva",(function(){e._clearSelfAndDescendantCache("visible")})),this.on("listeningChange.konva",(function(){e._clearSelfAndDescendantCache("listening")})),this.on("opacityChange.konva",(function(){e._clearSelfAndDescendantCache("absoluteOpacity")}))}return t.prototype.hasChildren=function(){return!1},t.prototype.getChildren=function(){return d},t.prototype._clearCache=function(t){t?this._cache.delete(t):this._cache.clear()},t.prototype._getCache=function(t,e){var r=this._cache.get(t);return void 0===r&&(r=e.call(this),this._cache.set(t,r)),r},t.prototype._getCanvasCache=function(){return this._cache.get("canvas")},t.prototype._clearSelfAndDescendantCache=function(t){this._clearCache(t),this.isCached()||this.children&&this.children.each((function(e){e._clearSelfAndDescendantCache(t)}))},t.prototype.clearCache=function(){return this._cache.delete("canvas"),this._clearSelfAndDescendantCache(),this},t.prototype.cache=function(t){var e=t||{},r={};void 0!==e.x&&void 0!==e.y&&void 0!==e.width&&void 0!==e.height||(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var i=Math.ceil(e.width||r.width),a=Math.ceil(e.height||r.height),s=e.pixelRatio,l=void 0===e.x?r.x:e.x,c=void 0===e.y?r.y:e.y,u=e.offset||0,h=e.drawBorder||!1;if(i&&a){i+=2*u,a+=2*u,l-=u,c-=u;var d=new o.SceneCanvas({pixelRatio:s,width:i,height:a}),f=new o.SceneCanvas({pixelRatio:s,width:i,height:a}),p=new o.HitCanvas({pixelRatio:1,width:i,height:a}),g=d.getContext(),v=p.getContext();return p.isCache=!0,this._cache.delete("canvas"),this._filterUpToDate=!1,!1===e.imageSmoothingEnabled&&(d.getContext()._context.imageSmoothingEnabled=!1,f.getContext()._context.imageSmoothingEnabled=!1,p.getContext()._context.imageSmoothingEnabled=!1),g.save(),v.save(),g.translate(-l,-c),v.translate(-l,-c),this._isUnderCache=!0,this._clearSelfAndDescendantCache("absoluteOpacity"),this._clearSelfAndDescendantCache("absoluteScale"),this.drawScene(d,this,!0),this.drawHit(p,this,!0),this._isUnderCache=!1,g.restore(),v.restore(),h&&(g.save(),g.beginPath(),g.rect(0,0,i,a),g.closePath(),g.setAttr("strokeStyle","red"),g.setAttr("lineWidth",5),g.stroke(),g.restore()),this._cache.set("canvas",{scene:d,filter:f,hit:p,x:l,y:c}),this}n.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.")},t.prototype.isCached=function(){return this._cache.has("canvas")},t.prototype.getClientRect=function(t){throw new Error('abstract "getClientRect" method call')},t.prototype._transformedRect=function(t,e){var r,n,i,o,a=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],s=this.getAbsoluteTransform(e);return a.forEach((function(t){var e=s.point(t);void 0===r&&(r=i=e.x,n=o=e.y),r=Math.min(r,e.x),n=Math.min(n,e.y),i=Math.max(i,e.x),o=Math.max(o,e.y)})),{x:r,y:n,width:i-r,height:o-n}},t.prototype._drawCachedSceneCanvas=function(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);var e=this._getCanvasCache();t.translate(e.x,e.y);var r=this._getCachedSceneCanvas(),n=r.pixelRatio;t.drawImage(r._canvas,0,0,r.width/n,r.height/n),t.restore()},t.prototype._drawCachedHitCanvas=function(t){var e=this._getCanvasCache(),r=e.hit;t.save(),t.translate(e.x,e.y),t.drawImage(r._canvas,0,0),t.restore()},t.prototype._getCachedSceneCanvas=function(){var t,e,r,i,o=this.filters(),a=this._getCanvasCache(),s=a.scene,l=a.filter,c=l.getContext();if(o){if(!this._filterUpToDate){var u=s.pixelRatio;try{for(t=o.length,c.clear(),c.drawImage(s._canvas,0,0,s.getWidth()/u,s.getHeight()/u),e=c.getImageData(0,0,l.getWidth(),l.getHeight()),r=0;r<t;r++)"function"==typeof(i=o[r])?(i.call(this,e),c.putImageData(e,0,0)):n.Util.error("Filter should be type of function, but got "+typeof i+" insted. Please check correct filters")}catch(t){n.Util.error("Unable to apply filter. "+t.message)}this._filterUpToDate=!0}return l}return s},t.prototype.on=function(t,e){if(3===arguments.length)return this._delegate.apply(this,arguments);var r,n,i,o,a=t.split(" "),s=a.length;for(r=0;r<s;r++)i=(n=a[r].split("."))[0],o=n[1]||"",this.eventListeners[i]||(this.eventListeners[i]=[]),this.eventListeners[i].push({name:o,handler:e});return this},t.prototype.off=function(t,e){var r,n,i,o,a,s=(t||"").split(" "),l=s.length;if(!t)for(n in this.eventListeners)this._off(n);for(r=0;r<l;r++)if(o=(i=s[r].split("."))[0],a=i[1],o)this.eventListeners[o]&&this._off(o,a,e);else for(n in this.eventListeners)this._off(n,a,e);return this},t.prototype.dispatchEvent=function(t){var e={target:this,type:t.type,evt:t};return this.fire(t.type,e),this},t.prototype.addEventListener=function(t,e){return this.on(t,(function(t){e.call(this,t.evt)})),this},t.prototype.removeEventListener=function(t){return this.off(t),this},t.prototype._delegate=function(t,e,r){var i=this;this.on(t,(function(t){for(var o=t.target.findAncestors(e,!0,i),a=0;a<o.length;a++)(t=n.Util.cloneObject(t)).currentTarget=o[a],r.call(o[a],t)}))},t.prototype.remove=function(){return this.isDragging()&&this.stopDrag(),s.DD._dragElements.delete(this._id),this._remove(),this},t.prototype._remove=function(){this._clearSelfAndDescendantCache("stage"),this._clearSelfAndDescendantCache("absoluteTransform"),this._clearSelfAndDescendantCache("visible"),this._clearSelfAndDescendantCache("listening"),this._clearSelfAndDescendantCache("absoluteOpacity");var t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)},t.prototype.destroy=function(){e._removeId(this.id(),this);for(var t=(this.name()||"").split(/\s/g),r=0;r<t.length;r++){var n=t[r];e._removeName(n,this._id)}return this.remove(),this},t.prototype.getAttr=function(t){var e="get"+n.Util._capitalize(t);return n.Util._isFunction(this[e])?this[e]():this.attrs[t]},t.prototype.getAncestors=function(){for(var t=this.getParent(),e=new n.Collection;t;)e.push(t),t=t.getParent();return e},t.prototype.getAttrs=function(){return this.attrs||{}},t.prototype.setAttrs=function(t){var e,r;if(!t)return this;for(e in t)"children"!==e&&(r="set"+n.Util._capitalize(e),n.Util._isFunction(this[r])?this[r](t[e]):this._setAttr(e,t[e]));return this},t.prototype.isListening=function(){return this._getCache("listening",this._isListening)},t.prototype._isListening=function(){var t=this.listening(),e=this.getParent();return"inherit"===t?!e||e.isListening():t},t.prototype.isVisible=function(){return this._getCache("visible",this._isVisible)},t.prototype._isVisible=function(t){var e=this.visible(),r=this.getParent();return"inherit"===e?!r||r===t||r._isVisible(t):t&&t!==r?e&&r._isVisible(t):e},t.prototype.shouldDrawHit=function(){var t=this.getLayer();return!t&&this.isListening()&&this.isVisible()||t&&t.hitGraphEnabled()&&this.isListening()&&this.isVisible()},t.prototype.show=function(){return this.visible(!0),this},t.prototype.hide=function(){return this.visible(!1),this},t.prototype.getZIndex=function(){return this.index||0},t.prototype.getAbsoluteZIndex=function(){var t,e,r,n,i=this.getDepth(),o=this,a=0;return"Stage"!==o.nodeType&&function s(l){for(t=[],e=l.length,r=0;r<e;r++)n=l[r],a++,"Shape"!==n.nodeType&&(t=t.concat(n.getChildren().toArray())),n._id===o._id&&(r=e);t.length>0&&t[0].getDepth()<=i&&s(t)}(o.getStage().getChildren()),a},t.prototype.getDepth=function(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t},t.prototype.setPosition=function(t){return this.x(t.x),this.y(t.y),this},t.prototype.getPosition=function(){return{x:this.x(),y:this.y()}},t.prototype.getAbsolutePosition=function(t){for(var e=!1,r=this.parent;r;){if(r.isCached()){e=!0;break}r=r.parent}e&&!t&&(t=!0);var i=this.getAbsoluteTransform(t).getMatrix(),o=new n.Transform,a=this.offset();return o.m=i.slice(),o.translate(a.x,a.y),o.getTranslation()},t.prototype.setAbsolutePosition=function(t){var e,r=this._clearTransform();return this.attrs.x=r.x,this.attrs.y=r.y,delete r.x,delete r.y,(e=this.getAbsoluteTransform()).invert(),e.translate(t.x,t.y),t={x:this.attrs.x+e.getTranslation().x,y:this.attrs.y+e.getTranslation().y},this.setPosition({x:t.x,y:t.y}),this._setTransform(r),this},t.prototype._setTransform=function(t){var e;for(e in t)this.attrs[e]=t[e];this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")},t.prototype._clearTransform=function(){var t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform"),t},t.prototype.move=function(t){var e=t.x,r=t.y,n=this.x(),i=this.y();return void 0!==e&&(n+=e),void 0!==r&&(i+=r),this.setPosition({x:n,y:i}),this},t.prototype._eachAncestorReverse=function(t,e){var r,n,i=[],o=this.getParent();if(e&&e._id===this._id)t(this);else{for(i.unshift(this);o&&(!e||o._id!==e._id);)i.unshift(o),o=o.parent;for(r=i.length,n=0;n<r;n++)t(i[n])}},t.prototype.rotate=function(t){return this.rotation(this.rotation()+t),this},t.prototype.moveToTop=function(){if(!this.parent)return n.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var t=this.index;return this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0},t.prototype.moveUp=function(){if(!this.parent)return n.Util.warn("Node has no parent. moveUp function is ignored."),!1;var t=this.index;return t<this.parent.getChildren().length-1&&(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0)},t.prototype.moveDown=function(){if(!this.parent)return n.Util.warn("Node has no parent. moveDown function is ignored."),!1;var t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0)},t.prototype.moveToBottom=function(){if(!this.parent)return n.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)},t.prototype.setZIndex=function(t){if(!this.parent)return n.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&n.Util.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var e=this.index;return this.parent.children.splice(e,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this},t.prototype.getAbsoluteOpacity=function(){return this._getCache("absoluteOpacity",this._getAbsoluteOpacity)},t.prototype._getAbsoluteOpacity=function(){var t=this.opacity(),e=this.getParent();return e&&!e._isUnderCache&&(t*=e.getAbsoluteOpacity()),t},t.prototype.moveTo=function(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this},t.prototype.toObject=function(){var t,e,r,i,o={},a=this.getAttrs();for(t in o.attrs={},a)e=a[t],n.Util.isObject(e)&&!n.Util._isPlainObject(e)&&!n.Util._isArray(e)||(r="function"==typeof this[t]&&this[t],delete a[t],i=r?r.call(this):null,a[t]=e,i!==e&&(o.attrs[t]=e));return o.className=this.getClassName(),n.Util._prepareToStringify(o)},t.prototype.toJSON=function(){return JSON.stringify(this.toObject())},t.prototype.getParent=function(){return this.parent},t.prototype.findAncestors=function(t,e,r){var n=[];e&&this._isMatch(t)&&n.push(this);for(var i=this.parent;i;){if(i===r)return n;i._isMatch(t)&&n.push(i),i=i.parent}return n},t.prototype.isAncestorOf=function(t){return!1},t.prototype.findAncestor=function(t,e,r){return this.findAncestors(t,e,r)[0]},t.prototype._isMatch=function(t){if(!t)return!1;if("function"==typeof t)return t(this);var e,r,i=t.replace(/ /g,"").split(","),o=i.length;for(e=0;e<o;e++)if(r=i[e],n.Util.isValidSelector(r)||(n.Util.warn('Selector "'+r+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),n.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),n.Util.warn("Konva is awesome, right?")),"#"===r.charAt(0)){if(this.id()===r.slice(1))return!0}else if("."===r.charAt(0)){if(this.hasName(r.slice(1)))return!0}else if(this.className===r||this.nodeType===r)return!0;return!1},t.prototype.getLayer=function(){var t=this.getParent();return t?t.getLayer():null},t.prototype.getStage=function(){return this._getCache("stage",this._getStage)},t.prototype._getStage=function(){var t=this.getParent();return t?t.getStage():void 0},t.prototype.fire=function(t,e,r){return(e=e||{}).target=e.target||this,r?this._fireAndBubble(t,e):this._fire(t,e),this},t.prototype.getAbsoluteTransform=function(t){return t?this._getAbsoluteTransform(t):this._getCache("absoluteTransform",this._getAbsoluteTransform)},t.prototype._getAbsoluteTransform=function(t){var e;if(t)return e=new n.Transform,this._eachAncestorReverse((function(t){var r=t.transformsEnabled();"all"===r?e.multiply(t.getTransform()):"position"===r&&e.translate(t.x()-t.offsetX(),t.y()-t.offsetY())}),t),e;e=this.parent?this.parent.getAbsoluteTransform().copy():new n.Transform;var r=this.transformsEnabled();return"all"===r?e.multiply(this.getTransform()):"position"===r&&e.translate(this.x()-this.offsetX(),this.y()-this.offsetY()),e},t.prototype.getAbsoluteScale=function(t){return t?this._getAbsoluteScale(t):this._getCache("absoluteScale",this._getAbsoluteScale)},t.prototype._getAbsoluteScale=function(t){for(var e=this;e;)e._isUnderCache&&(t=e),e=e.getParent();var r=1,n=1;return this._eachAncestorReverse((function(t){r*=t.scaleX(),n*=t.scaleY()}),t),{x:r,y:n}},t.prototype.getTransform=function(){return this._getCache("transform",this._getTransform)},t.prototype._getTransform=function(){var t=new n.Transform,e=this.x(),r=this.y(),i=a.Konva.getAngle(this.rotation()),o=this.scaleX(),s=this.scaleY(),l=this.skewX(),c=this.skewY(),u=this.offsetX(),h=this.offsetY();return 0===e&&0===r||t.translate(e,r),0!==i&&t.rotate(i),0===l&&0===c||t.skew(l,c),1===o&&1===s||t.scale(o,s),0===u&&0===h||t.translate(-1*u,-1*h),t},t.prototype.clone=function(t){var e,r,i,o,a,s=n.Util.cloneObject(this.attrs);for(var l in c){delete s[c[l]]}for(e in t)s[e]=t[e];var u=new this.constructor(s);for(e in this.eventListeners)for(i=(r=this.eventListeners[e]).length,o=0;o<i;o++)(a=r[o]).name.indexOf("konva")<0&&(u.eventListeners[e]||(u.eventListeners[e]=[]),u.eventListeners[e].push(a));return u},t.prototype._toKonvaCanvas=function(t){t=t||{};var e=this.getClientRect(),r=this.getStage(),n=void 0!==t.x?t.x:e.x,i=void 0!==t.y?t.y:e.y,a=t.pixelRatio||1,s=new o.SceneCanvas({width:t.width||e.width||(r?r.width():0),height:t.height||e.height||(r?r.height():0),pixelRatio:a}),l=s.getContext();return l.save(),(n||i)&&l.translate(-1*n,-1*i),this.drawScene(s),l.restore(),s},t.prototype.toCanvas=function(t){return this._toKonvaCanvas(t)._canvas},t.prototype.toDataURL=function(t){var e=(t=t||{}).mimeType||null,r=t.quality||null,n=this._toKonvaCanvas(t).toDataURL(e,r);return t.callback&&t.callback(n),n},t.prototype.toImage=function(t){if(!t||!t.callback)throw"callback required for toImage method config argument";var e=t.callback;delete t.callback,n.Util._urlToImage(this.toDataURL(t),(function(t){e(t)}))},t.prototype.setSize=function(t){return this.width(t.width),this.height(t.height),this},t.prototype.getSize=function(){return{width:this.width(),height:this.height()}},t.prototype.getClassName=function(){return this.className||this.nodeType},t.prototype.getType=function(){return this.nodeType},t.prototype.getDragDistance=function(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():a.Konva.dragDistance},t.prototype._off=function(t,e,r){var n,i,o,a=this.eventListeners[t];for(n=0;n<a.length;n++)if(i=a[n].name,o=a[n].handler,!("konva"===i&&"konva"!==e||e&&i!==e||r&&r!==o)){if(a.splice(n,1),0===a.length){delete this.eventListeners[t];break}n--}},t.prototype._fireChangeEvent=function(t,e,r){this._fire(t+"Change",{oldVal:e,newVal:r})},t.prototype.setId=function(t){var r=this.id();return e._removeId(r,this),function(t,r){r&&(e.ids[r]=t)}(this,t),this._setAttr("id",t),this},t.prototype.setName=function(t){var r,n,i=(this.name()||"").split(/\s/g),o=(t||"").split(/\s/g);for(n=0;n<i.length;n++)r=i[n],-1===o.indexOf(r)&&r&&e._removeName(r,this._id);for(n=0;n<o.length;n++)r=o[n],-1===i.indexOf(r)&&r&&e._addName(this,r);return this._setAttr("name",t),this},t.prototype.addName=function(t){if(!this.hasName(t)){var e=this.name(),r=e?e+" "+t:t;this.setName(r)}return this},t.prototype.hasName=function(t){if(!t)return!1;var e=this.name();return!!e&&-1!==(e||"").split(/\s/g).indexOf(t)},t.prototype.removeName=function(t){var e=(this.name()||"").split(/\s/g),r=e.indexOf(t);return-1!==r&&(e.splice(r,1),this.setName(e.join(" "))),this},t.prototype.setAttr=function(t,e){var r=this["set"+n.Util._capitalize(t)];return n.Util._isFunction(r)?r.call(this,e):this._setAttr(t,e),this},t.prototype._setAttr=function(t,e){var r=this.attrs[t];(r!==e||n.Util.isObject(e))&&(null==e?delete this.attrs[t]:this.attrs[t]=e,this._fireChangeEvent(t,r,e))},t.prototype._setComponentAttr=function(t,e,r){var n;void 0!==r&&((n=this.attrs[t])||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=r,this._fireChangeEvent(t,n,r))},t.prototype._fireAndBubble=function(t,e,r){if(e&&"Shape"===this.nodeType&&(e.target=this),!(("mouseenter"===t||"mouseleave"===t)&&(r&&(this===r||this.isAncestorOf&&this.isAncestorOf(r))||"Stage"===this.nodeType&&!r))){this._fire(t,e);var n=("mouseenter"===t||"mouseleave"===t)&&r&&r.isAncestorOf&&r.isAncestorOf(this)&&!r.isAncestorOf(this.parent);(e&&!e.cancelBubble||!e)&&this.parent&&this.parent.isListening()&&!n&&(r&&r.parent?this._fireAndBubble.call(this.parent,t,e,r.parent):this._fireAndBubble.call(this.parent,t,e))}},t.prototype._fire=function(t,e){var r,n=this.eventListeners[t];if(n)for((e=e||{}).currentTarget=this,e.type=t,r=0;r<n.length;r++)n[r].handler.call(this,e)},t.prototype.draw=function(){return this.drawScene(),this.drawHit(),this},t.prototype._createDragElement=function(t){var e=t?t.pointerId:void 0,r=this.getStage(),n=this.getAbsolutePosition(),i=r._getPointerById(e)||r._changedPointerPositions[0]||n;s.DD._dragElements.set(this._id,{node:this,startPointerPos:i,offset:{x:i.x-n.x,y:i.y-n.y},dragStatus:"ready",pointerId:e})},t.prototype.startDrag=function(t){s.DD._dragElements.has(this._id)||this._createDragElement(t),s.DD._dragElements.get(this._id).dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},!0)},t.prototype._setDragPosition=function(t,e){var r=this.getStage()._getPointerById(e.pointerId);if(r){var i={x:r.x-e.offset.x,y:r.y-e.offset.y},o=this.dragBoundFunc();if(void 0!==o){var a=o.call(this,i,t);a?i=a:n.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}this._lastPos&&this._lastPos.x===i.x&&this._lastPos.y===i.y||(this.setAbsolutePosition(i),this.getLayer()?this.getLayer().batchDraw():this.getStage()&&this.getStage().batchDraw()),this._lastPos=i}},t.prototype.stopDrag=function(t){var e=s.DD._dragElements.get(this._id);e&&(e.dragStatus="stopped"),s.DD._endDragBefore(t),s.DD._endDragAfter(t)},t.prototype.setDraggable=function(t){this._setAttr("draggable",t),this._dragChange()},t.prototype.isDragging=function(){var t=s.DD._dragElements.get(this._id);return!!t&&"dragging"===t.dragStatus},t.prototype._listenDrag=function(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",(function(t){var e=this;if((!(void 0!==t.evt.button)||a.Konva.dragButtons.indexOf(t.evt.button)>=0)&&!this.isDragging()){var r=!1;s.DD._dragElements.forEach((function(t){e.isAncestorOf(t.node)&&(r=!0)})),r||this._createDragElement(t)}}))},t.prototype._dragChange=function(){this.attrs.draggable?this._listenDrag():(this._dragCleanup(),this.getStage()&&s.DD._dragElements.has(this._id)&&this.stopDrag())},t.prototype._dragCleanup=function(){this.off("mousedown.konva"),this.off("touchstart.konva")},t.create=function(t,e){return n.Util._isString(t)&&(t=JSON.parse(t)),this._createNode(t,e)},t._createNode=function(e,r){var i,o,s,l=t.prototype.getClassName.call(e),c=e.children;if(r&&(e.attrs.container=r),a._NODES_REGISTRY[l]||(n.Util.warn('Can not find a node with class name "'+l+'". Fallback to "Shape".'),l="Shape"),i=new(0,a._NODES_REGISTRY[l])(e.attrs),c)for(o=c.length,s=0;s<o;s++)i.add(t._createNode(c[s]));return i},t}();e.Node=p,p.prototype.nodeType="Node",p.prototype._attrsAffectingSize=[],i.Factory.addGetterSetter(p,"zIndex"),i.Factory.addGetterSetter(p,"absolutePosition"),i.Factory.addGetterSetter(p,"position"),i.Factory.addGetterSetter(p,"x",0,l.getNumberValidator()),i.Factory.addGetterSetter(p,"y",0,l.getNumberValidator()),i.Factory.addGetterSetter(p,"globalCompositeOperation","source-over",l.getStringValidator()),i.Factory.addGetterSetter(p,"opacity",1,l.getNumberValidator()),i.Factory.addGetterSetter(p,"name","",l.getStringValidator()),i.Factory.addGetterSetter(p,"id","",l.getStringValidator()),i.Factory.addGetterSetter(p,"rotation",0,l.getNumberValidator()),i.Factory.addComponentsGetterSetter(p,"scale",["x","y"]),i.Factory.addGetterSetter(p,"scaleX",1,l.getNumberValidator()),i.Factory.addGetterSetter(p,"scaleY",1,l.getNumberValidator()),i.Factory.addComponentsGetterSetter(p,"skew",["x","y"]),i.Factory.addGetterSetter(p,"skewX",0,l.getNumberValidator()),i.Factory.addGetterSetter(p,"skewY",0,l.getNumberValidator()),i.Factory.addComponentsGetterSetter(p,"offset",["x","y"]),i.Factory.addGetterSetter(p,"offsetX",0,l.getNumberValidator()),i.Factory.addGetterSetter(p,"offsetY",0,l.getNumberValidator()),i.Factory.addGetterSetter(p,"dragDistance",null,l.getNumberValidator()),i.Factory.addGetterSetter(p,"width",0,l.getNumberValidator()),i.Factory.addGetterSetter(p,"height",0,l.getNumberValidator()),i.Factory.addGetterSetter(p,"listening","inherit",(function(t){return!0===t||!1===t||"inherit"===t||n.Util.warn(t+' is a not valid value for "listening" attribute. The value may be true, false or "inherit".'),t})),i.Factory.addGetterSetter(p,"preventDefault",!0,l.getBooleanValidator()),i.Factory.addGetterSetter(p,"filters",null,(function(t){return this._filterUpToDate=!1,t})),i.Factory.addGetterSetter(p,"visible","inherit",(function(t){return!0===t||!1===t||"inherit"===t||n.Util.warn(t+' is a not valid value for "visible" attribute. The value may be true, false or "inherit".'),t})),i.Factory.addGetterSetter(p,"transformsEnabled","all",l.getStringValidator()),i.Factory.addGetterSetter(p,"size"),i.Factory.addGetterSetter(p,"dragBoundFunc"),i.Factory.addGetterSetter(p,"draggable",!1,l.getBooleanValidator()),i.Factory.backCompat(p,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),n.Collection.mapMethods(p)},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=r(8),s=r(5),l=r(9),c=r(7),u=r(6),h=r(33);function d(){return o||(o=a.Util.createCanvasElement().getContext("2d"))}function f(){this._clearCache("hasShadow")}function p(){this._clearCache("shadowRGBA")}function g(){this._clearCache("patternImage")}function v(){this._clearCache("linearGradient")}function y(){this._clearCache("radialGradient")}e.shapes={};var m=function(t){function r(r){for(var n,i=t.call(this,r)||this;!(n=a.Util.getRandomColor())||n in e.shapes;);return i.colorKey=n,e.shapes[n]=i,i.on("shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",f),i.on("shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",p),i.on("fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva",g),i.on("fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",v),i.on("fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",y),i}return i(r,t),r.prototype.getContext=function(){return this.getLayer().getContext()},r.prototype.getCanvas=function(){return this.getLayer().getCanvas()},r.prototype.getSceneFunc=function(){return this.attrs.sceneFunc||this._sceneFunc},r.prototype.getHitFunc=function(){return this.attrs.hitFunc||this._hitFunc},r.prototype.hasShadow=function(){return this._getCache("hasShadow",this._hasShadow)},r.prototype._hasShadow=function(){return this.shadowEnabled()&&0!==this.shadowOpacity()&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())},r.prototype._getFillPattern=function(){return this._getCache("patternImage",this.__getFillPattern)},r.prototype.__getFillPattern=function(){if(this.fillPatternImage())return d().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat")},r.prototype._getLinearGradient=function(){return this._getCache("linearGradient",this.__getLinearGradient)},r.prototype.__getLinearGradient=function(){var t=this.fillLinearGradientColorStops();if(t){for(var e=d(),r=this.fillLinearGradientStartPoint(),n=this.fillLinearGradientEndPoint(),i=e.createLinearGradient(r.x,r.y,n.x,n.y),o=0;o<t.length;o+=2)i.addColorStop(t[o],t[o+1]);return i}},r.prototype._getRadialGradient=function(){return this._getCache("radialGradient",this.__getRadialGradient)},r.prototype.__getRadialGradient=function(){var t=this.fillRadialGradientColorStops();if(t){for(var e=d(),r=this.fillRadialGradientStartPoint(),n=this.fillRadialGradientEndPoint(),i=e.createRadialGradient(r.x,r.y,this.fillRadialGradientStartRadius(),n.x,n.y,this.fillRadialGradientEndRadius()),o=0;o<t.length;o+=2)i.addColorStop(t[o],t[o+1]);return i}},r.prototype.getShadowRGBA=function(){return this._getCache("shadowRGBA",this._getShadowRGBA)},r.prototype._getShadowRGBA=function(){if(this.hasShadow()){var t=a.Util.colorToRGBA(this.shadowColor());return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")"}},r.prototype.hasFill=function(){return!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops())},r.prototype.hasStroke=function(){return this.strokeEnabled()&&this.strokeWidth()&&!(!this.stroke()&&!this.strokeLinearGradientColorStops())},r.prototype.hasHitStroke=function(){var t=this.hitStrokeWidth();return this.strokeEnabled()&&(t||this.strokeWidth()&&"auto"===t)},r.prototype.intersects=function(t){var e=this.getStage().bufferHitCanvas;return e.getContext().clear(),this.drawHit(e),e.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]>0},r.prototype.destroy=function(){return l.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],delete this.colorKey,this},r.prototype._useBufferCanvas=function(t){return!(t&&!this.hasShadow()||!this.perfectDrawEnabled()||1===this.getAbsoluteOpacity()||!this.hasFill()||!this.hasStroke()||!this.getStage())},r.prototype.setStrokeHitEnabled=function(t){t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)},r.prototype.getStrokeHitEnabled=function(){return 0!==this.hitStrokeWidth()},r.prototype.getSelfRect=function(){var t=this.size();return{x:this._centroid?Math.round(-t.width/2):0,y:this._centroid?Math.round(-t.height/2):0,width:t.width,height:t.height}},r.prototype.getClientRect=function(t){var e=(t=t||{}).skipTransform,r=t.relativeTo,n=this.getSelfRect(),i=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,o=n.width+i,a=n.height+i,s=!t.skipShadow&&this.hasShadow(),l=s?this.shadowOffsetX():0,c=s?this.shadowOffsetY():0,u=o+Math.abs(l),h=a+Math.abs(c),d=s&&this.shadowBlur()||0,f=u+2*d,p=h+2*d,g=0;Math.round(i/2)!==i/2&&(g=1);var v={width:f+g,height:p+g,x:-Math.round(i/2+d)+Math.min(l,0)+n.x,y:-Math.round(i/2+d)+Math.min(c,0)+n.y};return e?v:this._transformedRect(v,r)},r.prototype.drawScene=function(t,e,r,n){var i,o,a=this.getLayer(),s=t||a.getCanvas(),l=s.getContext(),c=this._getCanvasCache(),u=this.sceneFunc(),h=this.hasShadow(),d=this.hasStroke();if(!this.isVisible()&&!r)return this;if(c)return l.save(),a._applyTransform(this,l,e),this._drawCachedSceneCanvas(l),l.restore(),this;if(!u)return this;if(l.save(),this._useBufferCanvas(r)&&!n){if((o=(i=this.getStage().bufferCanvas).getContext()).clear(),o.save(),o._applyLineJoin(this),!r)if(a)a._applyTransform(this,o,e);else{var f=this.getAbsoluteTransform(e).getMatrix();l.transform(f[0],f[1],f[2],f[3],f[4],f[5])}u.call(this,o,this),o.restore();var p=i.pixelRatio;h&&!s.hitCanvas?(l.save(),l._applyShadow(this),l._applyOpacity(this),l._applyGlobalCompositeOperation(this),l.drawImage(i._canvas,0,0,i.width/p,i.height/p),l.restore()):(l._applyOpacity(this),l._applyGlobalCompositeOperation(this),l.drawImage(i._canvas,0,0,i.width/p,i.height/p))}else{if(l._applyLineJoin(this),!r)if(a)a._applyTransform(this,l,e);else{var g=this.getAbsoluteTransform(e).getMatrix();l.transform(g[0],g[1],g[2],g[3],g[4],g[5])}h&&d&&!s.hitCanvas?(l.save(),r||(l._applyOpacity(this),l._applyGlobalCompositeOperation(this)),l._applyShadow(this),u.call(this,l,this),l.restore(),this.hasFill()&&this.shadowForStrokeEnabled()&&u.call(this,l,this)):h&&!s.hitCanvas?(l.save(),r||(l._applyOpacity(this),l._applyGlobalCompositeOperation(this)),l._applyShadow(this),u.call(this,l,this),l.restore()):(r||(l._applyOpacity(this),l._applyGlobalCompositeOperation(this)),u.call(this,l,this))}return l.restore(),this},r.prototype.drawHit=function(t,e,r){var n=this.getLayer(),i=t||n.hitCanvas,o=i&&i.getContext(),s=this.hitFunc()||this.sceneFunc(),l=this._getCanvasCache(),c=l&&l.hit;if(this.colorKey||(console.log(this),a.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. See the shape in logs above. If you want to reuse shape you should call remove() instead of destroy()")),!this.shouldDrawHit()&&!r)return this;if(c)return o.save(),n._applyTransform(this,o,e),this._drawCachedHitCanvas(o),o.restore(),this;if(!s)return this;if(o.save(),o._applyLineJoin(this),!r)if(n)n._applyTransform(this,o,e);else{var u=this.getAbsoluteTransform(e).getMatrix();o.transform(u[0],u[1],u[2],u[3],u[4],u[5])}return s.call(this,o,this),o.restore(),this},r.prototype.drawHitFromCache=function(t){void 0===t&&(t=0);var e,r,n,i,o,s=this._getCanvasCache(),l=this._getCachedSceneCanvas(),c=s.hit,u=c.getContext(),h=c.getWidth(),d=c.getHeight();u.clear(),u.drawImage(l._canvas,0,0,h,d);try{for(n=(r=(e=u.getImageData(0,0,h,d)).data).length,i=a.Util._hexToRgb(this.colorKey),o=0;o<n;o+=4)r[o+3]>t?(r[o]=i.r,r[o+1]=i.g,r[o+2]=i.b,r[o+3]=255):r[o+3]=0;u.putImageData(e,0,0)}catch(t){a.Util.error("Unable to draw hit graph from cached scene canvas. "+t.message)}return this},r.prototype.hasPointerCapture=function(t){return h.hasPointerCapture(t,this)},r.prototype.setPointerCapture=function(t){h.setPointerCapture(t,this)},r.prototype.releaseCapture=function(t){h.releaseCapture(t,this)},r}(l.Node);e.Shape=m,m.prototype._fillFunc=function(t){t.fill()},m.prototype._strokeFunc=function(t){t.stroke()},m.prototype._fillFuncHit=function(t){t.fill()},m.prototype._strokeFuncHit=function(t){t.stroke()},m.prototype._centroid=!1,m.prototype.nodeType="Shape",u._registerNode(m),s.Factory.addGetterSetter(m,"stroke",void 0,c.getStringValidator()),s.Factory.addGetterSetter(m,"strokeWidth",2,c.getNumberValidator()),s.Factory.addGetterSetter(m,"hitStrokeWidth","auto",c.getNumberOrAutoValidator()),s.Factory.addGetterSetter(m,"strokeHitEnabled",!0,c.getBooleanValidator()),s.Factory.addGetterSetter(m,"perfectDrawEnabled",!0,c.getBooleanValidator()),s.Factory.addGetterSetter(m,"shadowForStrokeEnabled",!0,c.getBooleanValidator()),s.Factory.addGetterSetter(m,"lineJoin"),s.Factory.addGetterSetter(m,"lineCap"),s.Factory.addGetterSetter(m,"sceneFunc"),s.Factory.addGetterSetter(m,"hitFunc"),s.Factory.addGetterSetter(m,"dash"),s.Factory.addGetterSetter(m,"dashOffset",0,c.getNumberValidator()),s.Factory.addGetterSetter(m,"shadowColor",void 0,c.getStringValidator()),s.Factory.addGetterSetter(m,"shadowBlur",0,c.getNumberValidator()),s.Factory.addGetterSetter(m,"shadowOpacity",1,c.getNumberValidator()),s.Factory.addComponentsGetterSetter(m,"shadowOffset",["x","y"]),s.Factory.addGetterSetter(m,"shadowOffsetX",0,c.getNumberValidator()),s.Factory.addGetterSetter(m,"shadowOffsetY",0,c.getNumberValidator()),s.Factory.addGetterSetter(m,"fillPatternImage"),s.Factory.addGetterSetter(m,"fill",void 0,c.getStringValidator()),s.Factory.addGetterSetter(m,"fillPatternX",0,c.getNumberValidator()),s.Factory.addGetterSetter(m,"fillPatternY",0,c.getNumberValidator()),s.Factory.addGetterSetter(m,"fillLinearGradientColorStops"),s.Factory.addGetterSetter(m,"strokeLinearGradientColorStops"),s.Factory.addGetterSetter(m,"fillRadialGradientStartRadius",0),s.Factory.addGetterSetter(m,"fillRadialGradientEndRadius",0),s.Factory.addGetterSetter(m,"fillRadialGradientColorStops"),s.Factory.addGetterSetter(m,"fillPatternRepeat","repeat"),s.Factory.addGetterSetter(m,"fillEnabled",!0),s.Factory.addGetterSetter(m,"strokeEnabled",!0),s.Factory.addGetterSetter(m,"shadowEnabled",!0),s.Factory.addGetterSetter(m,"dashEnabled",!0),s.Factory.addGetterSetter(m,"strokeScaleEnabled",!0),s.Factory.addGetterSetter(m,"fillPriority","color"),s.Factory.addComponentsGetterSetter(m,"fillPatternOffset",["x","y"]),s.Factory.addGetterSetter(m,"fillPatternOffsetX",0,c.getNumberValidator()),s.Factory.addGetterSetter(m,"fillPatternOffsetY",0,c.getNumberValidator()),s.Factory.addComponentsGetterSetter(m,"fillPatternScale",["x","y"]),s.Factory.addGetterSetter(m,"fillPatternScaleX",1,c.getNumberValidator()),s.Factory.addGetterSetter(m,"fillPatternScaleY",1,c.getNumberValidator()),s.Factory.addComponentsGetterSetter(m,"fillLinearGradientStartPoint",["x","y"]),s.Factory.addComponentsGetterSetter(m,"strokeLinearGradientStartPoint",["x","y"]),s.Factory.addGetterSetter(m,"fillLinearGradientStartPointX",0),s.Factory.addGetterSetter(m,"strokeLinearGradientStartPointX",0),s.Factory.addGetterSetter(m,"fillLinearGradientStartPointY",0),s.Factory.addGetterSetter(m,"strokeLinearGradientStartPointY",0),s.Factory.addComponentsGetterSetter(m,"fillLinearGradientEndPoint",["x","y"]),s.Factory.addComponentsGetterSetter(m,"strokeLinearGradientEndPoint",["x","y"]),s.Factory.addGetterSetter(m,"fillLinearGradientEndPointX",0),s.Factory.addGetterSetter(m,"strokeLinearGradientEndPointX",0),s.Factory.addGetterSetter(m,"fillLinearGradientEndPointY",0),s.Factory.addGetterSetter(m,"strokeLinearGradientEndPointY",0),s.Factory.addComponentsGetterSetter(m,"fillRadialGradientStartPoint",["x","y"]),s.Factory.addGetterSetter(m,"fillRadialGradientStartPointX",0),s.Factory.addGetterSetter(m,"fillRadialGradientStartPointY",0),s.Factory.addComponentsGetterSetter(m,"fillRadialGradientEndPoint",["x","y"]),s.Factory.addGetterSetter(m,"fillRadialGradientEndPointX",0),s.Factory.addGetterSetter(m,"fillRadialGradientEndPointY",0),s.Factory.addGetterSetter(m,"fillPatternRotation",0),s.Factory.backCompat(m,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"}),a.Collection.mapMethods(m)},,function(t,e,r){var n=r(60).Konva;n._injectGlobal(n),e.default=n,t.exports=e.default},,function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(8),a=r(5),s=r(9),l=r(20),c=r(7),u=r(6),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.children=new o.Collection,e}return i(e,t),e.prototype.getChildren=function(t){if(!t)return this.children;var e=new o.Collection;return this.children.each((function(r){t(r)&&e.push(r)})),e},e.prototype.hasChildren=function(){return this.getChildren().length>0},e.prototype.removeChildren=function(){for(var t,e=0;e<this.children.length;e++)(t=this.children[e]).parent=null,t.index=0,t.remove();return this.children=new o.Collection,this},e.prototype.destroyChildren=function(){for(var t,e=0;e<this.children.length;e++)(t=this.children[e]).parent=null,t.index=0,t.destroy();return this.children=new o.Collection,this},e.prototype.add=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(arguments.length>1){for(var r=0;r<arguments.length;r++)this.add(arguments[r]);return this}var n=arguments[0];if(n.getParent())return n.moveTo(this),this;var i=this.children;return this._validateAdd(n),n.index=i.length,n.parent=this,i.push(n),this._fire("add",{child:n}),this},e.prototype.destroy=function(){return this.hasChildren()&&this.destroyChildren(),t.prototype.destroy.call(this),this},e.prototype.find=function(t){return this._generalFind(t,!1)},e.prototype.get=function(t){return o.Util.warn("collection.get() method is deprecated. Please use collection.find() instead."),this.find(t)},e.prototype.findOne=function(t){var e=this._generalFind(t,!0);return e.length>0?e[0]:void 0},e.prototype._generalFind=function(t,e){var r=[];return this._descendants((function(n){var i=n._isMatch(t);return i&&r.push(n),!(!i||!e)})),o.Collection.toCollection(r)},e.prototype._descendants=function(t){for(var e=0;e<this.children.length;e++){var r=this.children[e];if(t(r))return!0;if(r.hasChildren()&&r._descendants(t))return!0}return!1},e.prototype.toObject=function(){var t=s.Node.prototype.toObject.call(this);t.children=[];for(var e=this.getChildren(),r=e.length,n=0;n<r;n++){var i=e[n];t.children.push(i.toObject())}return t},e.prototype._getDescendants=function(t){for(var e=[],r=t.length,n=0;n<r;n++){var i=t[n];this.isAncestorOf(i)&&e.push(i)}return e},e.prototype.isAncestorOf=function(t){for(var e=t.getParent();e;){if(e._id===this._id)return!0;e=e.getParent()}return!1},e.prototype.clone=function(t){var e=s.Node.prototype.clone.call(this,t);return this.getChildren().each((function(t){e.add(t.clone())})),e},e.prototype.getAllIntersections=function(t){var e=[];return this.find("Shape").each((function(r){r.isVisible()&&r.intersects(t)&&e.push(r)})),e},e.prototype._setChildrenIndices=function(){this.children.each((function(t,e){t.index=e}))},e.prototype.drawScene=function(t,e,r){var n=this.getLayer(),i=t||n&&n.getCanvas(),o=i&&i.getContext(),a=this._getCanvasCache(),s=a&&a.scene;return(this.isVisible()||r)&&(!r&&s?(o.save(),n._applyTransform(this,o,e),this._drawCachedSceneCanvas(o),o.restore()):this._drawChildren(i,"drawScene",e,!1,r,r)),this},e.prototype.drawHit=function(t,e,r){var n=this.getLayer(),i=t||n&&n.hitCanvas,o=i&&i.getContext(),a=this._getCanvasCache(),s=a&&a.hit;return(this.shouldDrawHit(i)||r)&&(!r&&s?(o.save(),n._applyTransform(this,o,e),this._drawCachedHitCanvas(o),o.restore()):this._drawChildren(i,"drawHit",e,!1,r,r)),this},e.prototype._drawChildren=function(t,e,r,n,i,o){var a,s,l=this.getLayer(),c=t&&t.getContext(),u=this.clipWidth(),h=this.clipHeight(),d=this.clipFunc(),f=u&&h||d;if(f&&l){c.save();var p=this.getAbsoluteTransform(r),g=p.getMatrix();c.transform(g[0],g[1],g[2],g[3],g[4],g[5]),c.beginPath(),d?d.call(this,c,this):(a=this.clipX(),s=this.clipY(),c.rect(a,s,u,h)),c.clip(),g=p.copy().invert().getMatrix(),c.transform(g[0],g[1],g[2],g[3],g[4],g[5])}var v="source-over"!==this.globalCompositeOperation()&&!o&&"drawScene"===e;v&&l&&(c.save(),c._applyGlobalCompositeOperation(this)),this.children.each((function(o){o[e](t,r,n,i)})),v&&l&&c.restore(),f&&l&&c.restore()},e.prototype.shouldDrawHit=function(t){if(t&&t.isCache)return!0;var e=this.getLayer(),r=!1;l.DD._dragElements.forEach((function(t){"dragging"===t.dragStatus&&t.node.getLayer()===e&&(r=!0)}));var n=!u.Konva.hitOnDragEnabled&&r;return e&&e.hitGraphEnabled()&&this.isVisible()&&!n},e.prototype.getClientRect=function(t){var e,r,n,i,o=(t=t||{}).skipTransform,a=t.relativeTo,s={x:1/0,y:1/0,width:0,height:0},l=this;this.children.each((function(o){if(o.visible()){var a=o.getClientRect({relativeTo:l,skipShadow:t.skipShadow,skipStroke:t.skipStroke});0===a.width&&0===a.height||(void 0===e?(e=a.x,r=a.y,n=a.x+a.width,i=a.y+a.height):(e=Math.min(e,a.x),r=Math.min(r,a.y),n=Math.max(n,a.x+a.width),i=Math.max(i,a.y+a.height)))}}));for(var c=this.find("Shape"),u=!1,h=0;h<c.length;h++){if(c[h]._isVisible(this)){u=!0;break}}return s=u&&void 0!==e?{x:e,y:r,width:n-e,height:i-r}:{x:0,y:0,width:0,height:0},o?s:this._transformedRect(s,a)},e}(s.Node);e.Container=h,a.Factory.addComponentsGetterSetter(h,"clip",["x","y","width","height"]),a.Factory.addGetterSetter(h,"clipX",void 0,c.getNumberValidator()),a.Factory.addGetterSetter(h,"clipY",void 0,c.getNumberValidator()),a.Factory.addGetterSetter(h,"clipWidth",void 0,c.getNumberValidator()),a.Factory.addGetterSetter(h,"clipHeight",void 0,c.getNumberValidator()),a.Factory.addGetterSetter(h,"clipFunc"),o.Collection.mapMethods(h)},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=r(8),s=r(32),l=r(6),c=r(5),u=r(7);var h=function(){function t(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var e=(t||{}).pixelRatio||l.Konva.pixelRatio||function(){if(o)return o;var t=a.Util.createCanvasElement().getContext("2d");return o=(l.Konva._global.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}();this.pixelRatio=e,this._canvas=a.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}return t.prototype.getContext=function(){return this.context},t.prototype.getPixelRatio=function(){return this.pixelRatio},t.prototype.setPixelRatio=function(t){var e=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/e,this.getHeight()/e)},t.prototype.setWidth=function(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";var e=this.pixelRatio;this.getContext()._context.scale(e,e)},t.prototype.setHeight=function(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";var e=this.pixelRatio;this.getContext()._context.scale(e,e)},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.setSize=function(t,e){this.setWidth(t),this.setHeight(e)},t.prototype.toDataURL=function(t,e){try{return this._canvas.toDataURL(t,e)}catch(t){try{return this._canvas.toDataURL()}catch(t){return a.Util.error("Unable to get data URL. "+t.message),""}}},t}();e.Canvas=h,c.Factory.addGetterSetter(h,"pixelRatio",void 0,u.getNumberValidator());var d=function(t){function e(e){void 0===e&&(e={width:0,height:0});var r=t.call(this,e)||this;return r.context=new s.SceneContext(r),r.setSize(e.width,e.height),r}return i(e,t),e}(h);e.SceneCanvas=d;var f=function(t){function e(e){void 0===e&&(e={width:0,height:0});var r=t.call(this,e)||this;return r.hitCanvas=!0,r.context=new s.HitContext(r),r.setSize(e.width,e.height),r}return i(e,t),e}(h);e.HitCanvas=f},,,,function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(6),i=r(8);e.DD={get isDragging(){var t=!1;return e.DD._dragElements.forEach((function(e){"dragging"===e.dragStatus&&(t=!0)})),t},justDragged:!1,get node(){var t;return e.DD._dragElements.forEach((function(e){t=e.node})),t},_dragElements:new Map,_drag:function(t){e.DD._dragElements.forEach((function(e,r){var n=e.node,o=n.getStage();o.setPointersPositions(t),void 0===e.pointerId&&(e.pointerId=i.Util._getFirstPointerId(t));var a=o._changedPointerPositions.find((function(t){return t.id===e.pointerId}));if(a){if("dragging"!==e.dragStatus){var s=n.dragDistance();if(Math.max(Math.abs(a.x-e.startPointerPos.x),Math.abs(a.y-e.startPointerPos.y))<s)return;if(n.startDrag({evt:t}),!n.isDragging())return}n._setDragPosition(t,e),n.fire("dragmove",{type:"dragmove",target:n,evt:t},!0)}}))},_endDragBefore:function(t){e.DD._dragElements.forEach((function(r,i){var o=r.node.getStage();if(t&&o.setPointersPositions(t),o._changedPointerPositions.find((function(t){return t.id===r.pointerId}))){"dragging"!==r.dragStatus&&"stopped"!==r.dragStatus||(e.DD.justDragged=!0,n.Konva.listenClickTap=!1,r.dragStatus="stopped");var a=r.node.getLayer()||r.node instanceof n.Konva.Stage&&r.node;a&&a.draw()}}))},_endDragAfter:function(t){e.DD._dragElements.forEach((function(r,n){"stopped"===r.dragStatus&&r.node.fire("dragend",{type:"dragend",target:r.node,evt:t},!0),"dragging"!==r.dragStatus&&e.DD._dragElements.delete(n)}))}},n.Konva.isBrowser&&(window.addEventListener("mouseup",e.DD._endDragBefore,!0),window.addEventListener("touchend",e.DD._endDragBefore,!0),window.addEventListener("mousemove",e.DD._drag),window.addEventListener("touchmove",e.DD._drag),window.addEventListener("mouseup",e.DD._endDragAfter,!1),window.addEventListener("touchend",e.DD._endDragAfter,!1))},,,,,function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(8),a=r(14),s=r(6),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._validateAdd=function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&o.Util.throw("You may only add groups and shapes to groups.")},e}(a.Container);e.Group=l,l.prototype.nodeType="Group",s._registerNode(l),o.Collection.mapMethods(l)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(6),i=n.glob.performance&&n.glob.performance.now?function(){return n.glob.performance.now()}:function(){return(new Date).getTime()},o=function(){function t(e,r){this.id=t.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:i(),frameRate:0},this.func=e,this.setLayers(r)}return t.prototype.setLayers=function(t){var e=[];return e=t?t.length>0?t:[t]:[],this.layers=e,this},t.prototype.getLayers=function(){return this.layers},t.prototype.addLayer=function(t){var e,r=this.layers,n=r.length;for(e=0;e<n;e++)if(r[e]._id===t._id)return!1;return this.layers.push(t),!0},t.prototype.isRunning=function(){var e,r=t.animations,n=r.length;for(e=0;e<n;e++)if(r[e].id===this.id)return!0;return!1},t.prototype.start=function(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=i(),t._addAnimation(this),this},t.prototype.stop=function(){return t._removeAnimation(this),this},t.prototype._updateFrameObject=function(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff},t._addAnimation=function(t){this.animations.push(t),this._handleAnimation()},t._removeAnimation=function(t){var e,r=t.id,n=this.animations,i=n.length;for(e=0;e<i;e++)if(n[e].id===r){this.animations.splice(e,1);break}},t._runFrames=function(){var t,e,r,n,o,a,s,l,c={},u=this.animations;for(n=0;n<u.length;n++)if(e=(t=u[n]).layers,r=t.func,t._updateFrameObject(i()),a=e.length,!r||!1!==r.call(t,t.frame))for(o=0;o<a;o++)void 0!==(s=e[o])._id&&(c[s._id]=s);for(l in c)c.hasOwnProperty(l)&&c[l].draw()},t._animationLoop=function(){var e=t;e.animations.length?(e._runFrames(),requestAnimationFrame(e._animationLoop)):e.animRunning=!1},t._handleAnimation=function(){this.animRunning||(this.animRunning=!0,requestAnimationFrame(this._animationLoop))},t.animations=[],t.animIdCounter=0,t.animRunning=!1,t}();e.Animation=o},function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));class n{constructor(t,e=null){this.zone=t,this.eventPreventDefault=["dragenter","dragover","dragleave","drop"],this.eventHighlight=["dragenter","dragover"],this.eventUnhighlight=["drop","dragleave"],this.zone.addEventListener("drop",this.handleDrop.bind(this),!1),this.addEvent(),this.option=this.validOption(e)}optionsDefault(){return{classHighlight:"highlight",documentType:["application/pdf"],resetOnDrop:!0}}validOption(t){return{...this.optionsDefault(),...t}}addEvent(){this.eventPreventDefault.forEach(t=>{this.zone.addEventListener(t,this.preventDefaults,!1),document.body.addEventListener(t,this.preventDefaults,!1)}),this.eventHighlight.forEach(t=>{this.zone.addEventListener(t,this.highlight.bind(this),!1)}),this.eventUnhighlight.forEach(t=>{this.zone.addEventListener(t,this.unhighlight.bind(this),!1)})}validDrop(t){return this.option.documentType.includes(t.type)}addAfterDrop(t){this.afterDrop=t}preventDefaults(t){t.preventDefault(),t.stopPropagation()}highlight(t){this.zone.classList.add("highlight")}unhighlight(t){this.zone.classList.remove("active")}handleDrop(t){let e=[...t.dataTransfer.files].filter(t=>this.validDrop(t));const r={x:t.layerX,y:t.layerY};e.length>0&&this.handleFiles(e,r)}handleFiles(t,e){this.afterDrop&&this.afterDrop(t,e)}}},,,,,function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(8),a=r(6),s=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],l=function(){function t(t){this.canvas=t,this._context=t._canvas.getContext("2d"),a.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}return t.prototype.fillShape=function(t){t.getFillEnabled()&&this._fill(t)},t.prototype._fill=function(t){},t.prototype.strokeShape=function(t){t.getStrokeEnabled()&&this._stroke(t)},t.prototype._stroke=function(t){},t.prototype.fillStrokeShape=function(t){t.getFillEnabled()&&this._fill(t),t.getStrokeEnabled()&&this._stroke(t)},t.prototype.getTrace=function(t){var e,r,n,i,a=this.traceArr,s=a.length,l="";for(e=0;e<s;e++)(n=(r=a[e]).method)?(i=r.args,l+=n,t?l+="()":o.Util._isArray(i[0])?l+="(["+i.join(",")+"])":l+="("+i.join(",")+")"):(l+=r.property,t||(l+="="+r.val)),l+=";";return l},t.prototype.clearTrace=function(){this.traceArr=[]},t.prototype._trace=function(t){var e=this.traceArr;e.push(t),e.length>=100&&e.shift()},t.prototype.reset=function(){var t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)},t.prototype.getCanvas=function(){return this.canvas},t.prototype.clear=function(t){var e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth()/e.pixelRatio,e.getHeight()/e.pixelRatio)},t.prototype._applyLineCap=function(t){var e=t.getLineCap();e&&this.setAttr("lineCap",e)},t.prototype._applyOpacity=function(t){var e=t.getAbsoluteOpacity();1!==e&&this.setAttr("globalAlpha",e)},t.prototype._applyLineJoin=function(t){var e=t.getLineJoin();e&&this.setAttr("lineJoin",e)},t.prototype.setAttr=function(t,e){this._context[t]=e},t.prototype.arc=function(t,e,r,n,i,o){this._context.arc(t,e,r,n,i,o)},t.prototype.arcTo=function(t,e,r,n,i){this._context.arcTo(t,e,r,n,i)},t.prototype.beginPath=function(){this._context.beginPath()},t.prototype.bezierCurveTo=function(t,e,r,n,i,o){this._context.bezierCurveTo(t,e,r,n,i,o)},t.prototype.clearRect=function(t,e,r,n){this._context.clearRect(t,e,r,n)},t.prototype.clip=function(){this._context.clip()},t.prototype.closePath=function(){this._context.closePath()},t.prototype.createImageData=function(t,e){var r=arguments;return 2===r.length?this._context.createImageData(t,e):1===r.length?this._context.createImageData(t):void 0},t.prototype.createLinearGradient=function(t,e,r,n){return this._context.createLinearGradient(t,e,r,n)},t.prototype.createPattern=function(t,e){return this._context.createPattern(t,e)},t.prototype.createRadialGradient=function(t,e,r,n,i,o){return this._context.createRadialGradient(t,e,r,n,i,o)},t.prototype.drawImage=function(t,e,r,n,i,o,a,s,l){var c=arguments,u=this._context;3===c.length?u.drawImage(t,e,r):5===c.length?u.drawImage(t,e,r,n,i):9===c.length&&u.drawImage(t,e,r,n,i,o,a,s,l)},t.prototype.ellipse=function(t,e,r,n,i,o,a,s){this._context.ellipse(t,e,r,n,i,o,a,s)},t.prototype.isPointInPath=function(t,e){return this._context.isPointInPath(t,e)},t.prototype.fill=function(){this._context.fill()},t.prototype.fillRect=function(t,e,r,n){this._context.fillRect(t,e,r,n)},t.prototype.strokeRect=function(t,e,r,n){this._context.strokeRect(t,e,r,n)},t.prototype.fillText=function(t,e,r){this._context.fillText(t,e,r)},t.prototype.measureText=function(t){return this._context.measureText(t)},t.prototype.getImageData=function(t,e,r,n){return this._context.getImageData(t,e,r,n)},t.prototype.lineTo=function(t,e){this._context.lineTo(t,e)},t.prototype.moveTo=function(t,e){this._context.moveTo(t,e)},t.prototype.rect=function(t,e,r,n){this._context.rect(t,e,r,n)},t.prototype.putImageData=function(t,e,r){this._context.putImageData(t,e,r)},t.prototype.quadraticCurveTo=function(t,e,r,n){this._context.quadraticCurveTo(t,e,r,n)},t.prototype.restore=function(){this._context.restore()},t.prototype.rotate=function(t){this._context.rotate(t)},t.prototype.save=function(){this._context.save()},t.prototype.scale=function(t,e){this._context.scale(t,e)},t.prototype.setLineDash=function(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)},t.prototype.getLineDash=function(){return this._context.getLineDash()},t.prototype.setTransform=function(t,e,r,n,i,o){this._context.setTransform(t,e,r,n,i,o)},t.prototype.stroke=function(){this._context.stroke()},t.prototype.strokeText=function(t,e,r,n){this._context.strokeText(t,e,r,n)},t.prototype.transform=function(t,e,r,n,i,o){this._context.transform(t,e,r,n,i,o)},t.prototype.translate=function(t,e){this._context.translate(t,e)},t.prototype._enableTrace=function(){var t,e,r=this,n=s.length,i=o.Util._simplifyArray,a=this.setAttr,l=function(t){var n,o=r[t];r[t]=function(){return e=i(Array.prototype.slice.call(arguments,0)),n=o.apply(r,arguments),r._trace({method:t,args:e}),n}};for(t=0;t<n;t++)l(s[t]);r.setAttr=function(){a.apply(r,arguments);var t=arguments[0],e=arguments[1];"shadowOffsetX"!==t&&"shadowOffsetY"!==t&&"shadowBlur"!==t||(e/=this.canvas.getPixelRatio()),r._trace({property:t,val:e})}},t.prototype._applyGlobalCompositeOperation=function(t){var e=t.getGlobalCompositeOperation();"source-over"!==e&&this.setAttr("globalCompositeOperation",e)},t}();e.Context=l,["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"].forEach((function(t){Object.defineProperty(l.prototype,t,{get:function(){return this._context[t]},set:function(e){this._context[t]=e}})}));var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._fillColor=function(t){var e=t.fill();this.setAttr("fillStyle",e),t._fillFunc(this)},e.prototype._fillPattern=function(t){var e=t.getFillPatternX(),r=t.getFillPatternY(),n=a.Konva.getAngle(t.getFillPatternRotation()),i=t.getFillPatternOffsetX(),o=t.getFillPatternOffsetY(),s=t.getFillPatternScaleX(),l=t.getFillPatternScaleY();(e||r)&&this.translate(e||0,r||0),n&&this.rotate(n),(s||l)&&this.scale(s,l),(i||o)&&this.translate(-1*i,-1*o),this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)},e.prototype._fillLinearGradient=function(t){var e=t._getLinearGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))},e.prototype._fillRadialGradient=function(t){var e=t._getRadialGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))},e.prototype._fill=function(t){var e=t.fill(),r=t.getFillPriority();if(e&&"color"===r)this._fillColor(t);else{var n=t.getFillPatternImage();if(n&&"pattern"===r)this._fillPattern(t);else{var i=t.getFillLinearGradientColorStops();if(i&&"linear-gradient"===r)this._fillLinearGradient(t);else{var o=t.getFillRadialGradientColorStops();o&&"radial-gradient"===r?this._fillRadialGradient(t):e?this._fillColor(t):n?this._fillPattern(t):i?this._fillLinearGradient(t):o&&this._fillRadialGradient(t)}}}},e.prototype._strokeLinearGradient=function(t){var e=t.getStrokeLinearGradientStartPoint(),r=t.getStrokeLinearGradientEndPoint(),n=t.getStrokeLinearGradientColorStops(),i=this.createLinearGradient(e.x,e.y,r.x,r.y);if(n){for(var o=0;o<n.length;o+=2)i.addColorStop(n[o],n[o+1]);this.setAttr("strokeStyle",i)}},e.prototype._stroke=function(t){var e=t.dash(),r=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!r){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(t),e&&t.dashEnabled()&&(this.setLineDash(e),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),r||this.restore()}},e.prototype._applyShadow=function(t){var e=o.Util,r=e.get(t.getShadowRGBA(),"black"),n=e.get(t.getShadowBlur(),5),i=e.get(t.getShadowOffset(),{x:0,y:0}),a=t.getAbsoluteScale(),s=this.canvas.getPixelRatio(),l=a.x*s,c=a.y*s;this.setAttr("shadowColor",r),this.setAttr("shadowBlur",n*Math.min(Math.abs(l),Math.abs(c))),this.setAttr("shadowOffsetX",i.x*l),this.setAttr("shadowOffsetY",i.y*c)},e}(l);e.SceneContext=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._fill=function(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()},e.prototype._stroke=function(t){if(t.hasHitStroke()){var e=t.getStrokeScaleEnabled();if(!e){this.save();var r=this.getCanvas().getPixelRatio();this.setTransform(r,0,0,r,0,0)}this._applyLineCap(t);var n=t.hitStrokeWidth(),i="auto"===n?t.strokeWidth():n;this.setAttr("lineWidth",i),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),e||this.restore()}},e}(l);e.HitContext=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(6),i=new Map,o=void 0!==n.Konva._global.PointerEvent;function a(t){return{evt:t,pointerId:t.pointerId}}function s(t,e){var r=i.get(t);if(r){var n=r.getStage();n&&n.content,i.delete(t),o&&r._fire("lostpointercapture",a(new PointerEvent("lostpointercapture")))}}e.getCapturedShape=function(t){return i.get(t)},e.createEvent=a,e.hasPointerCapture=function(t,e){return i.get(t)===e},e.setPointerCapture=function(t,e){s(t),e.getStage()&&(i.set(t,e),o&&e._fire("gotpointercapture",a(new PointerEvent("gotpointercapture"))))},e.releaseCapture=s},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(8),a=r(14),s=r(9),l=r(5),c=r(15),u=function(t){function e(e){var r=t.call(this,e)||this;return r.canvas=new c.SceneCanvas,r._waitingForDraw=!1,r.on("visibleChange",r._checkVisibility),r._checkVisibility(),r.on("imageSmoothingEnabledChange",r._checkSmooth),r._checkSmooth(),r}return i(e,t),e.prototype.createPNGStream=function(){return this.canvas._canvas.createPNGStream()},e.prototype.getCanvas=function(){return this.canvas},e.prototype.getHitCanvas=function(){return this.hitCanvas},e.prototype.getContext=function(){return this.getCanvas().getContext()},e.prototype.clear=function(t){return this.getContext().clear(t),this},e.prototype.setZIndex=function(e){t.prototype.setZIndex.call(this,e);var r=this.getStage();return r&&(r.content.removeChild(this.getCanvas()._canvas),e<r.getChildren().length-1?r.content.insertBefore(this.getCanvas()._canvas,r.getChildren()[e+1].getCanvas()._canvas):r.content.appendChild(this.getCanvas()._canvas)),this},e.prototype.moveToTop=function(){s.Node.prototype.moveToTop.call(this);var t=this.getStage();return t&&(t.content.removeChild(this.getCanvas()._canvas),t.content.appendChild(this.getCanvas()._canvas)),!0},e.prototype.moveUp=function(){if(!s.Node.prototype.moveUp.call(this))return!1;var t=this.getStage();return!!t&&(t.content.removeChild(this.getCanvas()._canvas),this.index<t.getChildren().length-1?t.content.insertBefore(this.getCanvas()._canvas,t.getChildren()[this.index+1].getCanvas()._canvas):t.content.appendChild(this.getCanvas()._canvas),!0)},e.prototype.moveDown=function(){if(s.Node.prototype.moveDown.call(this)){var t=this.getStage();if(t){var e=t.getChildren();t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,e[this.index+1].getCanvas()._canvas)}return!0}return!1},e.prototype.moveToBottom=function(){if(s.Node.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var e=t.getChildren();t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,e[1].getCanvas()._canvas)}return!0}return!1},e.prototype.getLayer=function(){return this},e.prototype.hitGraphEnabled=function(){return!0},e.prototype.remove=function(){var t=this.getCanvas()._canvas;return s.Node.prototype.remove.call(this),t&&t.parentNode&&o.Util._isInDocument(t)&&t.parentNode.removeChild(t),this},e.prototype.getStage=function(){return this.parent},e.prototype.setSize=function(t){var e=t.width,r=t.height;return this.canvas.setSize(e,r),this},e.prototype._toKonvaCanvas=function(t){return(t=t||{}).width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=void 0!==t.x?t.x:this.x(),t.y=void 0!==t.y?t.y:this.y(),s.Node.prototype._toKonvaCanvas.call(this,t)},e.prototype._checkVisibility=function(){var t=this.visible();this.canvas._canvas.style.display=t?"block":"none"},e.prototype._checkSmooth=function(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()},e.prototype.getWidth=function(){if(this.parent)return this.parent.width()},e.prototype.setWidth=function(){o.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')},e.prototype.getHeight=function(){if(this.parent)return this.parent.height()},e.prototype.setHeight=function(){o.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')},e.prototype.getIntersection=function(t,e){return null},e.prototype.batchDraw=function(){var t=this;return this._waitingForDraw||(this._waitingForDraw=!0,o.Util.requestAnimFrame((function(){t.draw(),t._waitingForDraw=!1}))),this},e.prototype._applyTransform=function(t,e,r){var n=t.getAbsoluteTransform(r).getMatrix();e.transform(n[0],n[1],n[2],n[3],n[4],n[5])},e}(a.Container);e.BaseLayer=u,u.prototype.nodeType="BaseLayer",l.Factory.addGetterSetter(u,"imageSmoothingEnabled",!0),l.Factory.addGetterSetter(u,"clearBeforeDraw",!0),o.Collection.mapMethods(u)},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),o=this&&this.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<r;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(e,"__esModule",{value:!0});var a=r(8),s=r(5),l=r(10),c=r(7),u=r(6),h=function(t){function e(e){var r=t.call(this,e)||this;return r.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",(function(){this._clearCache("tensionPoints")})),r}return i(e,t),e.prototype._sceneFunc=function(t){var e,r,n,i=this.points(),o=i.length,a=this.tension(),s=this.closed(),l=this.bezier();if(o){if(t.beginPath(),t.moveTo(i[0],i[1]),0!==a&&o>4){for(r=(e=this.getTensionPoints()).length,n=s?0:4,s||t.quadraticCurveTo(e[0],e[1],e[2],e[3]);n<r-2;)t.bezierCurveTo(e[n++],e[n++],e[n++],e[n++],e[n++],e[n++]);s||t.quadraticCurveTo(e[r-2],e[r-1],i[o-2],i[o-1])}else if(l)for(n=2;n<o;)t.bezierCurveTo(i[n++],i[n++],i[n++],i[n++],i[n++],i[n++]);else for(n=2;n<o;n+=2)t.lineTo(i[n],i[n+1]);s?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}},e.prototype.getTensionPoints=function(){return this._getCache("tensionPoints",this._getTensionPoints)},e.prototype._getTensionPoints=function(){return this.closed()?this._getTensionPointsClosed():a.Util._expandPoints(this.points(),this.tension())},e.prototype._getTensionPointsClosed=function(){var t=this.points(),e=t.length,r=this.tension(),n=a.Util._getControlPoints(t[e-2],t[e-1],t[0],t[1],t[2],t[3],r),i=a.Util._getControlPoints(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],r),o=a.Util._expandPoints(t,r);return[n[2],n[3]].concat(o).concat([i[0],i[1],t[e-2],t[e-1],i[2],i[3],n[0],n[1],t[0],t[1]])},e.prototype.getWidth=function(){return this.getSelfRect().width},e.prototype.getHeight=function(){return this.getSelfRect().height},e.prototype.getSelfRect=function(){var t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};for(var e,r,n=(t=0!==this.tension()?o([t[0],t[1]],this._getTensionPoints(),[t[t.length-2],t[t.length-2]]):this.points())[0],i=t[0],a=t[1],s=t[1],l=0;l<t.length/2;l++)e=t[2*l],r=t[2*l+1],n=Math.min(n,e),i=Math.max(i,e),a=Math.min(a,r),s=Math.max(s,r);return{x:Math.round(n),y:Math.round(a),width:Math.round(i-n),height:Math.round(s-a)}},e}(l.Shape);e.Line=h,h.prototype.className="Line",h.prototype._attrsAffectingSize=["points","bezier","tension"],u._registerNode(h),s.Factory.addGetterSetter(h,"closed",!1),s.Factory.addGetterSetter(h,"bezier",!1),s.Factory.addGetterSetter(h,"tension",0,c.getNumberValidator()),s.Factory.addGetterSetter(h,"points",[],c.getNumberArrayValidator()),a.Collection.mapMethods(h)},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(8),a=r(5),s=r(10),l=r(6),c=function(t){function e(r){var n=t.call(this,r)||this;n.dataArray=[],n.pathLength=0,n.dataArray=e.parsePathData(n.data()),n.pathLength=0;for(var i=0;i<n.dataArray.length;++i)n.pathLength+=n.dataArray[i].pathLength;return n.on("dataChange.konva",(function(){this.dataArray=e.parsePathData(this.data()),this.pathLength=0;for(var t=0;t<this.dataArray.length;++t)this.pathLength+=this.dataArray[t].pathLength})),n}return i(e,t),e.prototype._sceneFunc=function(t){var e=this.dataArray;t.beginPath();for(var r=0;r<e.length;r++){var n=e[r].command,i=e[r].points;switch(n){case"L":t.lineTo(i[0],i[1]);break;case"M":t.moveTo(i[0],i[1]);break;case"C":t.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5]);break;case"Q":t.quadraticCurveTo(i[0],i[1],i[2],i[3]);break;case"A":var o=i[0],a=i[1],s=i[2],l=i[3],c=i[4],u=i[5],h=i[6],d=i[7],f=s>l?s:l,p=s>l?1:s/l,g=s>l?l/s:1;t.translate(o,a),t.rotate(h),t.scale(p,g),t.arc(0,0,f,c,c+u,1-d),t.scale(1/p,1/g),t.rotate(-h),t.translate(-o,-a);break;case"z":t.closePath()}}t.fillStrokeShape(this)},e.prototype.getSelfRect=function(){var t=[];this.dataArray.forEach((function(e){t="A"===e.command?t.concat([e.points[0]-e.points[2],e.points[1]-e.points[3],e.points[0]+e.points[2],e.points[1]+e.points[3]]):t.concat(e.points)}));for(var e,r,n=t[0],i=t[0],o=t[1],a=t[1],s=0;s<t.length/2;s++)e=t[2*s],r=t[2*s+1],isNaN(e)||(n=Math.min(n,e),i=Math.max(i,e)),isNaN(r)||(o=Math.min(o,r),a=Math.max(a,r));return{x:Math.round(n),y:Math.round(o),width:Math.round(i-n),height:Math.round(a-o)}},e.prototype.getLength=function(){return this.pathLength},e.prototype.getPointAtLength=function(t){var r,n=0,i=this.dataArray.length;if(!i)return null;for(;n<i&&t>this.dataArray[n].pathLength;)t-=this.dataArray[n].pathLength,++n;if(n===i)return{x:(r=this.dataArray[n-1].points.slice(-2))[0],y:r[1]};if(t<.01)return{x:(r=this.dataArray[n].points.slice(0,2))[0],y:r[1]};var o=this.dataArray[n],a=o.points;switch(o.command){case"L":return e.getPointOnLine(t,o.start.x,o.start.y,a[0],a[1]);case"C":return e.getPointOnCubicBezier(t/o.pathLength,o.start.x,o.start.y,a[0],a[1],a[2],a[3],a[4],a[5]);case"Q":return e.getPointOnQuadraticBezier(t/o.pathLength,o.start.x,o.start.y,a[0],a[1],a[2],a[3]);case"A":var s=a[0],l=a[1],c=a[2],u=a[3],h=a[4],d=a[5],f=a[6];return h+=d*t/o.pathLength,e.getPointOnEllipticalArc(s,l,c,u,h,f)}return null},e.getLineLength=function(t,e,r,n){return Math.sqrt((r-t)*(r-t)+(n-e)*(n-e))},e.getPointOnLine=function(t,e,r,n,i,o,a){void 0===o&&(o=e),void 0===a&&(a=r);var s=(i-r)/(n-e+1e-8),l=Math.sqrt(t*t/(1+s*s));n<e&&(l*=-1);var c,u=s*l;if(n===e)c={x:o,y:a+u};else if((a-r)/(o-e+1e-8)===s)c={x:o+l,y:a+u};else{var h,d,f=this.getLineLength(e,r,n,i);if(f<1e-8)return;var p=(o-e)*(n-e)+(a-r)*(i-r);h=e+(p/=f*f)*(n-e),d=r+p*(i-r);var g=this.getLineLength(o,a,h,d),v=Math.sqrt(t*t-g*g);l=Math.sqrt(v*v/(1+s*s)),n<e&&(l*=-1),c={x:h+l,y:d+(u=s*l)}}return c},e.getPointOnCubicBezier=function(t,e,r,n,i,o,a,s,l){function c(t){return t*t*t}function u(t){return 3*t*t*(1-t)}function h(t){return 3*t*(1-t)*(1-t)}function d(t){return(1-t)*(1-t)*(1-t)}return{x:s*c(t)+o*u(t)+n*h(t)+e*d(t),y:l*c(t)+a*u(t)+i*h(t)+r*d(t)}},e.getPointOnQuadraticBezier=function(t,e,r,n,i,o,a){function s(t){return t*t}function l(t){return 2*t*(1-t)}function c(t){return(1-t)*(1-t)}return{x:o*s(t)+n*l(t)+e*c(t),y:a*s(t)+i*l(t)+r*c(t)}},e.getPointOnEllipticalArc=function(t,e,r,n,i,o){var a=Math.cos(o),s=Math.sin(o),l=r*Math.cos(i),c=n*Math.sin(i);return{x:t+(l*a-c*s),y:e+(l*s+c*a)}},e.parsePathData=function(t){if(!t)return[];var e=t,r=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(new RegExp(" ","g"),",");for(var n=0;n<r.length;n++)e=e.replace(new RegExp(r[n],"g"),"|"+r[n]);var i,o=e.split("|"),a=[],s=[],l=0,c=0,u=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;for(n=1;n<o.length;n++){var h=o[n],d=h.charAt(0);for(h=h.slice(1),s.length=0;i=u.exec(h);)s.push(i[0]);for(var f=[],p=0,g=s.length;p<g;p++){var v=parseFloat(s[p]);isNaN(v)?f.push(0):f.push(v)}for(;f.length>0&&!isNaN(f[0]);){var y,m,_,b,w,S,A,k,x,C,P=null,R=[],T=l,E=c;switch(d){case"l":l+=f.shift(),c+=f.shift(),P="L",R.push(l,c);break;case"L":l=f.shift(),c=f.shift(),R.push(l,c);break;case"m":var O=f.shift(),F=f.shift();if(l+=O,c+=F,P="M",a.length>2&&"z"===a[a.length-1].command)for(var I=a.length-2;I>=0;I--)if("M"===a[I].command){l=a[I].points[0]+O,c=a[I].points[1]+F;break}R.push(l,c),d="l";break;case"M":l=f.shift(),c=f.shift(),P="M",R.push(l,c),d="L";break;case"h":l+=f.shift(),P="L",R.push(l,c);break;case"H":l=f.shift(),P="L",R.push(l,c);break;case"v":c+=f.shift(),P="L",R.push(l,c);break;case"V":c=f.shift(),P="L",R.push(l,c);break;case"C":R.push(f.shift(),f.shift(),f.shift(),f.shift()),l=f.shift(),c=f.shift(),R.push(l,c);break;case"c":R.push(l+f.shift(),c+f.shift(),l+f.shift(),c+f.shift()),l+=f.shift(),c+=f.shift(),P="C",R.push(l,c);break;case"S":m=l,_=c,"C"===(y=a[a.length-1]).command&&(m=l+(l-y.points[2]),_=c+(c-y.points[3])),R.push(m,_,f.shift(),f.shift()),l=f.shift(),c=f.shift(),P="C",R.push(l,c);break;case"s":m=l,_=c,"C"===(y=a[a.length-1]).command&&(m=l+(l-y.points[2]),_=c+(c-y.points[3])),R.push(m,_,l+f.shift(),c+f.shift()),l+=f.shift(),c+=f.shift(),P="C",R.push(l,c);break;case"Q":R.push(f.shift(),f.shift()),l=f.shift(),c=f.shift(),R.push(l,c);break;case"q":R.push(l+f.shift(),c+f.shift()),l+=f.shift(),c+=f.shift(),P="Q",R.push(l,c);break;case"T":m=l,_=c,"Q"===(y=a[a.length-1]).command&&(m=l+(l-y.points[0]),_=c+(c-y.points[1])),l=f.shift(),c=f.shift(),P="Q",R.push(m,_,l,c);break;case"t":m=l,_=c,"Q"===(y=a[a.length-1]).command&&(m=l+(l-y.points[0]),_=c+(c-y.points[1])),l+=f.shift(),c+=f.shift(),P="Q",R.push(m,_,l,c);break;case"A":b=f.shift(),w=f.shift(),S=f.shift(),A=f.shift(),k=f.shift(),x=l,C=c,l=f.shift(),c=f.shift(),P="A",R=this.convertEndpointToCenterParameterization(x,C,l,c,A,k,b,w,S);break;case"a":b=f.shift(),w=f.shift(),S=f.shift(),A=f.shift(),k=f.shift(),x=l,C=c,l+=f.shift(),c+=f.shift(),P="A",R=this.convertEndpointToCenterParameterization(x,C,l,c,A,k,b,w,S)}a.push({command:P||d,points:R,start:{x:T,y:E},pathLength:this.calcLength(T,E,P||d,R)})}"z"!==d&&"Z"!==d||a.push({command:"z",points:[],start:void 0,pathLength:0})}return a},e.calcLength=function(t,r,n,i){var o,a,s,l,c=e;switch(n){case"L":return c.getLineLength(t,r,i[0],i[1]);case"C":for(o=0,a=c.getPointOnCubicBezier(0,t,r,i[0],i[1],i[2],i[3],i[4],i[5]),l=.01;l<=1;l+=.01)s=c.getPointOnCubicBezier(l,t,r,i[0],i[1],i[2],i[3],i[4],i[5]),o+=c.getLineLength(a.x,a.y,s.x,s.y),a=s;return o;case"Q":for(o=0,a=c.getPointOnQuadraticBezier(0,t,r,i[0],i[1],i[2],i[3]),l=.01;l<=1;l+=.01)s=c.getPointOnQuadraticBezier(l,t,r,i[0],i[1],i[2],i[3]),o+=c.getLineLength(a.x,a.y,s.x,s.y),a=s;return o;case"A":o=0;var u=i[4],h=i[5],d=i[4]+h,f=Math.PI/180;if(Math.abs(u-d)<f&&(f=Math.abs(u-d)),a=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],u,0),h<0)for(l=u-f;l>d;l-=f)s=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),o+=c.getLineLength(a.x,a.y,s.x,s.y),a=s;else for(l=u+f;l<d;l+=f)s=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),o+=c.getLineLength(a.x,a.y,s.x,s.y),a=s;return s=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],d,0),o+=c.getLineLength(a.x,a.y,s.x,s.y)}return 0},e.convertEndpointToCenterParameterization=function(t,e,r,n,i,o,a,s,l){var c=l*(Math.PI/180),u=Math.cos(c)*(t-r)/2+Math.sin(c)*(e-n)/2,h=-1*Math.sin(c)*(t-r)/2+Math.cos(c)*(e-n)/2,d=u*u/(a*a)+h*h/(s*s);d>1&&(a*=Math.sqrt(d),s*=Math.sqrt(d));var f=Math.sqrt((a*a*(s*s)-a*a*(h*h)-s*s*(u*u))/(a*a*(h*h)+s*s*(u*u)));i===o&&(f*=-1),isNaN(f)&&(f=0);var p=f*a*h/s,g=f*-s*u/a,v=(t+r)/2+Math.cos(c)*p-Math.sin(c)*g,y=(e+n)/2+Math.sin(c)*p+Math.cos(c)*g,m=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},_=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(m(t)*m(e))},b=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(_(t,e))},w=b([1,0],[(u-p)/a,(h-g)/s]),S=[(u-p)/a,(h-g)/s],A=[(-1*u-p)/a,(-1*h-g)/s],k=b(S,A);return _(S,A)<=-1&&(k=Math.PI),_(S,A)>=1&&(k=0),0===o&&k>0&&(k-=2*Math.PI),1===o&&k<0&&(k+=2*Math.PI),[v,y,a,s,w,k,c,o]},e}(s.Shape);e.Path=c,c.prototype.className="Path",c.prototype._attrsAffectingSize=["data"],l._registerNode(c),a.Factory.addGetterSetter(c,"data"),o.Collection.mapMethods(c)},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(8),a=r(5),s=r(10),l=r(6),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){var e=this.cornerRadius(),r=this.width(),n=this.height();if(t.beginPath(),e){var i=0,o=0,a=0,s=0;"number"==typeof e?i=o=a=s=Math.min(e,r/2,n/2):(i=Math.min(e[0],r/2,n/2),o=Math.min(e[1],r/2,n/2),s=Math.min(e[2],r/2,n/2),a=Math.min(e[3],r/2,n/2)),t.moveTo(i,0),t.lineTo(r-o,0),t.arc(r-o,o,o,3*Math.PI/2,0,!1),t.lineTo(r,n-s),t.arc(r-s,n-s,s,0,Math.PI/2,!1),t.lineTo(a,n),t.arc(a,n-a,a,Math.PI/2,Math.PI,!1),t.lineTo(0,i),t.arc(i,i,i,Math.PI,3*Math.PI/2,!1)}else t.rect(0,0,r,n);t.closePath(),t.fillStrokeShape(this)},e}(s.Shape);e.Rect=c,c.prototype.className="Rect",l._registerNode(c),a.Factory.addGetterSetter(c,"cornerRadius",0),o.Collection.mapMethods(c)},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=r(8),s=r(5),l=r(10),c=r(6),u=r(7),h=r(6),d=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],f=d.length;function p(){return o||(o=a.Util.createCanvasElement().getContext("2d"))}String.prototype.trimRight;var g=function(t){function e(e){var r=t.call(this,function(t){return(t=t||{}).fillLinearGradientColorStops||t.fillRadialGradientColorStops||t.fillPatternImage||(t.fill=t.fill||"black"),t}(e))||this;r._partialTextX=0,r._partialTextY=0;for(var n=0;n<f;n++)r.on(d[n]+"Change.konva",r._setTextData);return r._setTextData(),r}return i(e,t),e.prototype._sceneFunc=function(t){var e,r=this.padding(),n=this.fontSize(),i=this.lineHeight()*n,o=this.textArr,a=o.length,s=this.verticalAlign(),l=0,c=this.align(),u=this.getWidth(),h=this.letterSpacing(),d=this.fill(),f=this.textDecoration(),p=-1!==f.indexOf("underline"),g=-1!==f.indexOf("line-through"),v=0,y=(v=i/2,0),m=0;for(t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline","middle"),t.setAttr("textAlign","left"),"middle"===s?l=(this.getHeight()-a*i-2*r)/2:"bottom"===s&&(l=this.getHeight()-a*i-2*r),t.translate(r,l+r),e=0;e<a;e++){y=0,m=0;var _,b,w,S=o[e],A=S.text,k=S.width,x=e!==a-1;if(t.save(),"right"===c?y+=u-k-2*r:"center"===c&&(y+=(u-k-2*r)/2),p&&(t.save(),t.beginPath(),t.moveTo(y,v+m+Math.round(n/2)),b=0===(_=A.split(" ").length-1),w="justify"===c&&x&&!b?u-2*r:k,t.lineTo(y+Math.round(w),v+m+Math.round(n/2)),t.lineWidth=n/15,t.strokeStyle=d,t.stroke(),t.restore()),g&&(t.save(),t.beginPath(),t.moveTo(y,v+m),b=0===(_=A.split(" ").length-1),w="justify"===c&&x&&!b?u-2*r:k,t.lineTo(y+Math.round(w),v+m),t.lineWidth=n/15,t.strokeStyle=d,t.stroke(),t.restore()),0!==h||"justify"===c){_=A.split(" ").length-1;for(var C=0;C<A.length;C++){var P=A[C];" "===P&&e!==a-1&&"justify"===c&&(y+=Math.floor((u-2*r-k)/_)),this._partialTextX=y,this._partialTextY=v+m,this._partialText=P,t.fillStrokeShape(this),y+=Math.round(this.measureSize(P).width)+h}}else this._partialTextX=y,this._partialTextY=v+m,this._partialText=A,t.fillStrokeShape(this);t.restore(),a>1&&(v+=i)}},e.prototype._hitFunc=function(t){var e=this.getWidth(),r=this.getHeight();t.beginPath(),t.rect(0,0,e,r),t.closePath(),t.fillStrokeShape(this)},e.prototype.setText=function(t){var e=a.Util._isString(t)?t:null==t?"":t+"";return this._setAttr("text",e),this},e.prototype.getWidth=function(){return"auto"===this.attrs.width||void 0===this.attrs.width?this.getTextWidth()+2*this.padding():this.attrs.width},e.prototype.getHeight=function(){return"auto"===this.attrs.height||void 0===this.attrs.height?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height},e.prototype.getTextWidth=function(){return this.textWidth},e.prototype.getTextHeight=function(){return a.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight},e.prototype.measureSize=function(t){var e,r=p(),n=this.fontSize();return r.save(),r.font=this._getContextFont(),e=r.measureText(t),r.restore(),{width:e.width,height:n}},e.prototype._getContextFont=function(){return c.Konva.UA.isIE?this.fontStyle()+" "+this.fontSize()+"px "+this.fontFamily():this.fontStyle()+" "+this.fontVariant()+" "+this.fontSize()+"px "+this.fontFamily()},e.prototype._addTextLine=function(t){"justify"===this.align()&&(t=t.trim());var e=this._getTextWidth(t);return this.textArr.push({text:t,width:e})},e.prototype._getTextWidth=function(t){var e=this.letterSpacing(),r=t.length;return p().measureText(t).width+(r?e*(r-1):0)},e.prototype._setTextData=function(){var t=this.text().split("\n"),e=+this.fontSize(),r=0,n=this.lineHeight()*e,i=this.attrs.width,o=this.attrs.height,a="auto"!==i&&void 0!==i,s="auto"!==o&&void 0!==o,l=this.padding(),c=i-2*l,u=o-2*l,h=0,d=this.wrap(),f="none"!==d,g="char"!==d&&f,v=this.ellipsis()&&!f;this.textArr=[],p().font=this._getContextFont();for(var y=v?this._getTextWidth("…"):0,m=0,_=t.length;m<_;++m){var b=t[m],w=this._getTextWidth(b);if(a&&w>c)for(;b.length>0;){for(var S=0,A=b.length,k="",x=0;S<A;){var C=S+A>>>1,P=b.slice(0,C+1),R=this._getTextWidth(P)+y;R<=c?(S=C+1,k=P+(v?"…":""),x=R):A=C}if(!k)break;if(g){var T,E=b[k.length];(T=(" "===E||"-"===E)&&x<=c?k.length:Math.max(k.lastIndexOf(" "),k.lastIndexOf("-"))+1)>0&&(S=T,k=k.slice(0,S),x=this._getTextWidth(k))}if(k=k.trimRight(),this._addTextLine(k),r=Math.max(r,x),h+=n,!f||s&&h+n>u)break;if((b=(b=b.slice(S)).trimLeft()).length>0&&(w=this._getTextWidth(b))<=c){this._addTextLine(b),h+=n,r=Math.max(r,w);break}}else this._addTextLine(b),h+=n,r=Math.max(r,w);if(s&&h+n>u)break}this.textHeight=e,this.textWidth=r},e.prototype.getStrokeScaleEnabled=function(){return!0},e}(l.Shape);e.Text=g,g.prototype._fillFunc=function(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)},g.prototype._strokeFunc=function(t){t.strokeText(this._partialText,this._partialTextX,this._partialTextY)},g.prototype.className="Text",g.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight"],h._registerNode(g),s.Factory.overWriteSetter(g,"width",u.getNumberOrAutoValidator()),s.Factory.overWriteSetter(g,"height",u.getNumberOrAutoValidator()),s.Factory.addGetterSetter(g,"fontFamily","Arial"),s.Factory.addGetterSetter(g,"fontSize",12,u.getNumberValidator()),s.Factory.addGetterSetter(g,"fontStyle","normal"),s.Factory.addGetterSetter(g,"fontVariant","normal"),s.Factory.addGetterSetter(g,"padding",0,u.getNumberValidator()),s.Factory.addGetterSetter(g,"align","left"),s.Factory.addGetterSetter(g,"verticalAlign","top"),s.Factory.addGetterSetter(g,"lineHeight",1,u.getNumberValidator()),s.Factory.addGetterSetter(g,"wrap","word"),s.Factory.addGetterSetter(g,"ellipsis",!1),s.Factory.addGetterSetter(g,"letterSpacing",0,u.getNumberValidator()),s.Factory.addGetterSetter(g,"text","",u.getStringValidator()),s.Factory.addGetterSetter(g,"textDecoration",""),a.Collection.mapMethods(g)},function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(40),i=r.n(n);class o{constructor(t){this.viewport=document.createElement("div");let e=document.createElement("div");this.RectManager=null,this.container=e,this.viewport.id="viewport",e.id="container",this.currentPageIndex=null,[...t.children].map(t=>t.parentNode.removeChild(t)),t.appendChild(this.viewport),t.appendChild(e)}renderPdf(t){let e=new FileReader;e.onloadend=async()=>{await this.initPDFViewer(e.result),this.refreshViewport(),this.render()},e.readAsArrayBuffer(t)}renderFile(t){this.filesGiven=t;const e=t[0];switch(e.type){case"application/pdf":this.renderPdf(e)}}renderNextPage(){this.currentPageIndex!==this.totalPagesCount-1&&(this.currentPageIndex+=1,this.currentPageIndex>this.totalPagesCount-1&&(this.currentPageIndex=this.totalPagesCount-1),this.render())}renderPreviousPage(){this.currentPageIndex<=0||(this.currentPageIndex-=1,this.render())}sizePdf(){window.innerWidth,window.innerHeight;document.querySelector("canvas").getBoundingClientRect().y,window.scrollY}displayPos(){let t=document.querySelector("canvas").getBoundingClientRect();cursorY,t.top,window.scrollY,t.height,cursorX,t.left,window.scrollX,t.width}renderPage(t){let e=t.getViewport({scale:1});const r=this.viewport.children[0];this.pdfViewport=t.getViewport({scale:r.offsetWidth/e.width});const n=r.children[0];n.height=this.pdfViewport.height,n.width=this.pdfViewport.width;const i=n.getContext("2d");t.render({canvasContext:i,viewport:this.pdfViewport})}async initPDFViewer(t){this.pdfUrl=t;let e=i.a.getDocument({data:t});return await e.promise.then(t=>{this.pdfInstance=t,this.totalPagesCount=t.numPages}).catch(t=>console.log(t))}render(t){this.currentPageIndex||(this.currentPageIndex=0),this.pdfInstance.getPage(this.currentPageIndex+1).then(t=>{this.viewport.innerHTML="<div><canvas></canvas></div>",this.renderPage(t),this.RectManager&&(this.RectManagerInstance?this.RectManagerInstance.changeIndexPage(this):this.RectManagerInstance=new this.RectManager(this,this.totalPagesCount))})}refreshViewport(){let t=this.viewport.querySelector("canvas");t&&t.remove()}}},function(t,e,r){(function(e,n,i){var o;o=function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";var n=r(1),i=r(147),o=r(162),a=r(163),s=r(151),l=r(164),c=r(156),u=r(153);if(r(4)()){var h=r(165).PDFNodeStream;i.setPDFNetworkStreamFactory((function(t){return new h(t)}))}else{var d,f=r(168).PDFNetworkStream;s.isFetchSupported()&&(d=r(169).PDFFetchStream),i.setPDFNetworkStreamFactory((function(t){return d&&s.isValidFetchUrl(t.url)?new d(t):new f(t)}))}e.build=i.build,e.version=i.version,e.getDocument=i.getDocument,e.LoopbackPort=i.LoopbackPort,e.PDFDataRangeTransport=i.PDFDataRangeTransport,e.PDFWorker=i.PDFWorker,e.renderTextLayer=o.renderTextLayer,e.AnnotationLayer=a.AnnotationLayer,e.createPromiseCapability=n.createPromiseCapability,e.PasswordResponses=n.PasswordResponses,e.InvalidPDFException=n.InvalidPDFException,e.MissingPDFException=n.MissingPDFException,e.SVGGraphics=l.SVGGraphics,e.NativeImageDecoding=n.NativeImageDecoding,e.CMapCompressionType=n.CMapCompressionType,e.PermissionFlag=n.PermissionFlag,e.UnexpectedResponseException=n.UnexpectedResponseException,e.OPS=n.OPS,e.VerbosityLevel=n.VerbosityLevel,e.UNSUPPORTED_FEATURES=n.UNSUPPORTED_FEATURES,e.createValidAbsoluteUrl=n.createValidAbsoluteUrl,e.createObjectURL=n.createObjectURL,e.removeNullCharacters=n.removeNullCharacters,e.shadow=n.shadow,e.Util=n.Util,e.ReadableStream=n.ReadableStream,e.URL=n.URL,e.RenderingCancelledException=s.RenderingCancelledException,e.getFilenameFromUrl=s.getFilenameFromUrl,e.LinkTarget=s.LinkTarget,e.addLinkAttributes=s.addLinkAttributes,e.loadScript=s.loadScript,e.PDFDateString=s.PDFDateString,e.GlobalWorkerOptions=c.GlobalWorkerOptions,e.apiCompatibilityParams=u.apiCompatibilityParams},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.arrayByteLength=b,e.arraysToBytes=function(t){if(1===t.length&&t[0]instanceof Uint8Array)return t[0];var e,r,n,i=0,o=t.length;for(e=0;e<o;e++)r=t[e],n=b(r),i+=n;var a=0,s=new Uint8Array(i);for(e=0;e<o;e++)(r=t[e])instanceof Uint8Array||(r="string"==typeof r?_(r):new Uint8Array(r)),n=r.byteLength,s.set(r,a),a+=n;return s},e.assert=u,e.bytesToString=function(t){u(null!==t&&"object"===o(t)&&void 0!==t.length,"Invalid argument for bytesToString");var e=t.length;if(e<8192)return String.fromCharCode.apply(null,t);for(var r=[],n=0;n<e;n+=8192){var i=Math.min(n+8192,e),a=t.subarray(n,i);r.push(String.fromCharCode.apply(null,a))}return r.join("")},e.createPromiseCapability=function(){var t=Object.create(null),e=!1;return Object.defineProperty(t,"settled",{get:function(){return e}}),t.promise=new Promise((function(r,n){t.resolve=function(t){e=!0,r(t)},t.reject=function(t){e=!0,n(t)}})),t},e.getVerbosityLevel=function(){return s},e.info=function(t){s>=a.INFOS&&console.log("Info: "+t)},e.isArrayBuffer=function(t){return"object"===o(t)&&null!==t&&void 0!==t.byteLength},e.isArrayEqual=function(t,e){return t.length===e.length&&t.every((function(t,r){return t===e[r]}))},e.isBool=function(t){return"boolean"==typeof t},e.isEmptyObj=function(t){for(var e in t)return!1;return!0},e.isNum=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSpace=function(t){return 32===t||9===t||13===t||10===t},e.isSameOrigin=function(t,e){try{var r=new i.URL(t);if(!r.origin||"null"===r.origin)return!1}catch(t){return!1}var n=new i.URL(e,r);return r.origin===n.origin},e.createValidAbsoluteUrl=function(t,e){if(!t)return null;try{var r=e?new i.URL(t,e):new i.URL(t);if(function(t){if(!t)return!1;switch(t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(r))return r}catch(t){}return null},e.isLittleEndian=function(){var t=new Uint8Array(4);return t[0]=1,1===new Uint32Array(t.buffer,0,1)[0]},e.isEvalSupported=function(){try{return new Function(""),!0}catch(t){return!1}},e.log2=function(t){return t<=0?0:Math.ceil(Math.log2(t))},e.readInt8=function(t,e){return t[e]<<24>>24},e.readUint16=function(t,e){return t[e]<<8|t[e+1]},e.readUint32=function(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0},e.removeNullCharacters=function(t){return"string"!=typeof t?(l("The argument for removeNullCharacters must be a string."),t):t.replace(m,"")},e.setVerbosityLevel=function(t){Number.isInteger(t)&&(s=t)},e.shadow=function(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!1}),r},e.string32=function(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)},e.stringToBytes=_,e.stringToPDFString=function(t){var e,r=t.length,n=[];if("þ"===t[0]&&"ÿ"===t[1])for(e=2;e<r;e+=2)n.push(String.fromCharCode(t.charCodeAt(e)<<8|t.charCodeAt(e+1)));else for(e=0;e<r;++e){var i=A[t.charCodeAt(e)];n.push(i?String.fromCharCode(i):t.charAt(e))}return n.join("")},e.stringToUTF8String=function(t){return decodeURIComponent(escape(t))},e.utf8StringToString=function(t){return unescape(encodeURIComponent(t))},e.warn=l,e.unreachable=c,Object.defineProperty(e,"ReadableStream",{enumerable:!0,get:function(){return n.ReadableStream}}),Object.defineProperty(e,"URL",{enumerable:!0,get:function(){return i.URL}}),e.createObjectURL=e.FormatError=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.StreamType=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.NativeImageDecoding=e.MissingPDFException=e.InvalidPDFException=e.AbortException=e.CMapCompressionType=e.ImageKind=e.FontType=e.AnnotationType=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationBorderStyleType=e.UNSUPPORTED_FEATURES=e.VerbosityLevel=e.OPS=e.IDENTITY_MATRIX=e.FONT_IDENTITY_MATRIX=void 0,r(2);var n=r(143),i=r(145);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.IDENTITY_MATRIX=[1,0,0,1,0,0],e.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],e.NativeImageDecoding={NONE:"none",DECODE:"decode",DISPLAY:"display"},e.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},e.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},e.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},e.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},e.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},e.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},e.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},e.StreamType={UNKNOWN:0,FLATE:1,LZW:2,DCT:3,JPX:4,JBIG:5,A85:6,AHX:7,CCF:8,RL:9},e.FontType={UNKNOWN:0,TYPE1:1,TYPE1C:2,CIDFONTTYPE0:3,CIDFONTTYPE0C:4,TRUETYPE:5,CIDFONTTYPE2:6,TYPE3:7,OPENTYPE:8,TYPE0:9,MMTYPE1:10};var a={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=a,e.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},e.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},e.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font"},e.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};var s=a.WARNINGS;function l(t){s>=a.WARNINGS&&console.log("Warning: "+t)}function c(t){throw new Error(t)}function u(t,e){t||c(e)}var h=function(){function t(t,e){this.name="PasswordException",this.message=t,this.code=e}return t.prototype=new Error,t.constructor=t,t}();e.PasswordException=h;var d=function(){function t(t,e){this.name="UnknownErrorException",this.message=t,this.details=e}return t.prototype=new Error,t.constructor=t,t}();e.UnknownErrorException=d;var f=function(){function t(t){this.name="InvalidPDFException",this.message=t}return t.prototype=new Error,t.constructor=t,t}();e.InvalidPDFException=f;var p=function(){function t(t){this.name="MissingPDFException",this.message=t}return t.prototype=new Error,t.constructor=t,t}();e.MissingPDFException=p;var g=function(){function t(t,e){this.name="UnexpectedResponseException",this.message=t,this.status=e}return t.prototype=new Error,t.constructor=t,t}();e.UnexpectedResponseException=g;var v=function(){function t(t){this.message=t}return t.prototype=new Error,t.prototype.name="FormatError",t.constructor=t,t}();e.FormatError=v;var y=function(){function t(t){this.name="AbortException",this.message=t}return t.prototype=new Error,t.constructor=t,t}();e.AbortException=y;var m=/\x00/g;function _(t){u("string"==typeof t,"Invalid argument for stringToBytes");for(var e=t.length,r=new Uint8Array(e),n=0;n<e;++n)r[n]=255&t.charCodeAt(n);return r}function b(t){return void 0!==t.length?t.length:(u(void 0!==t.byteLength),t.byteLength)}var w=function(){function t(){}var e=["rgb(",0,",",0,",",0,")"];return t.makeCssRgb=function(t,r,n){return e[1]=t,e[3]=r,e[5]=n,e.join("")},t.transform=function(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]},t.applyTransform=function(t,e){return[t[0]*e[0]+t[1]*e[2]+e[4],t[0]*e[1]+t[1]*e[3]+e[5]]},t.applyInverseTransform=function(t,e){var r=e[0]*e[3]-e[1]*e[2];return[(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/r,(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/r]},t.getAxialAlignedBoundingBox=function(e,r){var n=t.applyTransform(e,r),i=t.applyTransform(e.slice(2,4),r),o=t.applyTransform([e[0],e[3]],r),a=t.applyTransform([e[2],e[1]],r);return[Math.min(n[0],i[0],o[0],a[0]),Math.min(n[1],i[1],o[1],a[1]),Math.max(n[0],i[0],o[0],a[0]),Math.max(n[1],i[1],o[1],a[1])]},t.inverseTransform=function(t){var e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]},t.apply3dTransform=function(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2],t[3]*e[0]+t[4]*e[1]+t[5]*e[2],t[6]*e[0]+t[7]*e[1]+t[8]*e[2]]},t.singularValueDecompose2dScale=function(t){var e=[t[0],t[2],t[1],t[3]],r=t[0]*e[0]+t[1]*e[2],n=t[0]*e[1]+t[1]*e[3],i=t[2]*e[0]+t[3]*e[2],o=t[2]*e[1]+t[3]*e[3],a=(r+o)/2,s=Math.sqrt((r+o)*(r+o)-4*(r*o-i*n))/2,l=a+s||1,c=a-s||1;return[Math.sqrt(l),Math.sqrt(c)]},t.normalizeRect=function(t){var e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e},t.intersect=function(e,r){function n(t,e){return t-e}var i=[e[0],e[2],r[0],r[2]].sort(n),o=[e[1],e[3],r[1],r[3]].sort(n),a=[];return e=t.normalizeRect(e),r=t.normalizeRect(r),(i[0]===e[0]&&i[1]===r[0]||i[0]===r[0]&&i[1]===e[0])&&(a[0]=i[1],a[2]=i[2],(o[0]===e[1]&&o[1]===r[1]||o[0]===r[1]&&o[1]===e[1])&&(a[1]=o[1],a[3]=o[2],a))},t}();e.Util=w;var S,A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364],k=(S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!r&&i.URL.createObjectURL){var n=new Blob([t],{type:e});return i.URL.createObjectURL(n)}for(var o="data:"+e+";base64,",a=0,s=t.length;a<s;a+=3){var l=255&t[a],c=255&t[a+1],u=255&t[a+2],h=l>>2,d=(3&l)<<4|c>>4,f=a+1<s?(15&c)<<2|u>>6:64,p=a+2<s?63&u:64;o+=S[h]+S[d]+S[f]+S[p]}return o});e.createObjectURL=k},function(t,r,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(3);if(!o._pdfjsCompatibilityChecked){o._pdfjsCompatibilityChecked=!0;var a=n(4),s="object"===("undefined"==typeof window?"undefined":i(window))&&"object"===("undefined"==typeof document?"undefined":i(document));!o.btoa&&a()&&(o.btoa=function(t){return e.from(t,"binary").toString("base64")}),!o.atob&&a()&&(o.atob=function(t){return e.from(t,"base64").toString("binary")}),s&&void 0===Element.prototype.remove&&(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),function(){if(s&&!a()){var t=document.createElement("div");if(t.classList.add("testOne","testTwo"),!0!==t.classList.contains("testOne")||!0!==t.classList.contains("testTwo")){var e=DOMTokenList.prototype.add,r=DOMTokenList.prototype.remove;DOMTokenList.prototype.add=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];for(var i=0,o=r;i<o.length;i++){var a=o[i];e.call(this,a)}},DOMTokenList.prototype.remove=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var i=0,o=e;i<o.length;i++){var a=o[i];r.call(this,a)}}}}}(),s&&!a()&&!1!==document.createElement("div").classList.toggle("test",0)&&(DOMTokenList.prototype.toggle=function(t){var e=arguments.length>1?!!arguments[1]:!this.contains(t);return this[e?"add":"remove"](t),e}),String.prototype.startsWith||n(5),String.prototype.endsWith||n(36),String.prototype.includes||n(38),Array.prototype.includes||n(40),Array.from||n(47),Object.assign||n(70),Math.log2||(Math.log2=n(75)),Number.isNaN||(Number.isNaN=n(77)),Number.isInteger||(Number.isInteger=n(79)),o.Promise&&o.Promise.prototype&&o.Promise.prototype.finally||(o.Promise=n(82)),o.WeakMap||(o.WeakMap=n(102)),o.WeakSet||(o.WeakSet=n(119)),String.codePointAt||(String.codePointAt=n(123)),String.fromCodePoint||(String.fromCodePoint=n(125)),o.Symbol||n(127),String.prototype.padStart||n(134),String.prototype.padEnd||n(138),Object.values||(Object.values=n(140))}},function(t,e,r){"use strict";t.exports="undefined"!=typeof window&&window.Math===Math?window:void 0!==n&&n.Math===Math?n:"undefined"!=typeof self&&self.Math===Math?self:{}},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(){return"object"===(void 0===i?"undefined":n(i))&&i+""=="[object process]"&&!i.versions.nw&&!i.versions.electron}},function(t,e,r){"use strict";r(6),t.exports=r(9).String.startsWith},function(t,e,r){"use strict";var n=r(7),i=r(28),o=r(30),a="".startsWith;n(n.P+n.F*r(35)("startsWith"),"String",{startsWith:function(t){var e=o(this,t,"startsWith"),r=i(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),n=String(t);return a?a.call(e,n,r):e.slice(r,r+n.length)===n}})},function(t,e,r){"use strict";var n=r(8),i=r(9),o=r(10),a=r(20),s=r(26),l=function t(e,r,l){var c,u,h,d,f=e&t.F,p=e&t.G,g=e&t.P,v=e&t.B,y=p?n:e&t.S?n[r]||(n[r]={}):(n[r]||{}).prototype,m=p?i:i[r]||(i[r]={}),_=m.prototype||(m.prototype={});for(c in p&&(l=r),l)h=((u=!f&&y&&void 0!==y[c])?y:l)[c],d=v&&u?s(h,n):g&&"function"==typeof h?s(Function.call,h):h,y&&a(y,c,h,e&t.U),m[c]!=h&&o(m,c,d),g&&_[c]!=h&&(_[c]=h)};n.core=i,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},function(t,e,r){"use strict";var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,r){"use strict";var n=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=n)},function(t,e,r){"use strict";var n=r(11),i=r(19);t.exports=r(15)?function(t,e,r){return n.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e,r){"use strict";var n=r(12),i=r(14),o=r(18),a=Object.defineProperty;e.f=r(15)?Object.defineProperty:function(t,e,r){if(n(t),e=o(e,!0),n(r),i)try{return a(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},function(t,e,r){"use strict";var n=r(13);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){return"object"===n(t)?null!==t:"function"==typeof t}},function(t,e,r){"use strict";t.exports=!r(15)&&!r(16)((function(){return 7!=Object.defineProperty(r(17)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,r){"use strict";t.exports=!r(16)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e,r){"use strict";t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,r){"use strict";var n=r(13),i=r(8).document,o=n(i)&&n(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,r){"use strict";var n=r(13);t.exports=function(t,e){if(!n(t))return t;var r,i;if(e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!n(i=r.call(t)))return i;if(!e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,r){"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,r){"use strict";var n=r(8),i=r(10),o=r(21),a=r(22)("src"),s=r(23),l=(""+s).split("toString");r(9).inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,r,s){var c="function"==typeof r;c&&(o(r,"name")||i(r,"name",e)),t[e]!==r&&(c&&(o(r,a)||i(r,a,t[e]?""+t[e]:l.join(String(e)))),t===n?t[e]=r:s?t[e]?t[e]=r:i(t,e,r):(delete t[e],i(t,e,r)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[a]||s.call(this)}))},function(t,e,r){"use strict";var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,r){"use strict";var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e,r){"use strict";t.exports=r(24)("native-function-to-string",Function.toString)},function(t,e,r){"use strict";var n=r(9),i=r(8),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:n.version,mode:r(25)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e,r){"use strict";t.exports=!1},function(t,e,r){"use strict";var n=r(27);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,r){"use strict";t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,r){"use strict";var n=r(29),i=Math.min;t.exports=function(t){return t>0?i(n(t),9007199254740991):0}},function(t,e,r){"use strict";var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e,r){"use strict";var n=r(31),i=r(34);t.exports=function(t,e,r){if(n(e))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(t))}},function(t,e,r){"use strict";var n=r(13),i=r(32),o=r(33)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},function(t,e,r){"use strict";var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,r){"use strict";var n=r(24)("wks"),i=r(22),o=r(8).Symbol,a="function"==typeof o;(t.exports=function(t){return n[t]||(n[t]=a&&o[t]||(a?o:i)("Symbol."+t))}).store=n},function(t,e,r){"use strict";t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,r){"use strict";var n=r(33)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[n]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e,r){"use strict";r(37),t.exports=r(9).String.endsWith},function(t,e,r){"use strict";var n=r(7),i=r(28),o=r(30),a="".endsWith;n(n.P+n.F*r(35)("endsWith"),"String",{endsWith:function(t){var e=o(this,t,"endsWith"),r=arguments.length>1?arguments[1]:void 0,n=i(e.length),s=void 0===r?n:Math.min(i(r),n),l=String(t);return a?a.call(e,l,s):e.slice(s-l.length,s)===l}})},function(t,e,r){"use strict";r(39),t.exports=r(9).String.includes},function(t,e,r){"use strict";var n=r(7),i=r(30);n(n.P+n.F*r(35)("includes"),"String",{includes:function(t){return!!~i(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,r){"use strict";r(41),t.exports=r(9).Array.includes},function(t,e,r){"use strict";var n=r(7),i=r(42)(!0);n(n.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(46)("includes")},function(t,e,r){"use strict";var n=r(43),i=r(28),o=r(45);t.exports=function(t){return function(e,r,a){var s,l=n(e),c=i(l.length),u=o(a,c);if(t&&r!=r){for(;c>u;)if((s=l[u++])!=s)return!0}else for(;c>u;u++)if((t||u in l)&&l[u]===r)return t||u||0;return!t&&-1}}},function(t,e,r){"use strict";var n=r(44),i=r(34);t.exports=function(t){return n(i(t))}},function(t,e,r){"use strict";var n=r(32);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e,r){"use strict";var n=r(29),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=n(t))<0?i(t+e,0):o(t,e)}},function(t,e,r){"use strict";var n=r(33)("unscopables"),i=Array.prototype;null==i[n]&&r(10)(i,n,{}),t.exports=function(t){i[n][t]=!0}},function(t,e,r){"use strict";r(48),r(63),t.exports=r(9).Array.from},function(t,e,r){"use strict";var n=r(49)(!0);r(50)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=n(e,r),this._i+=t.length,{value:t,done:!1})}))},function(t,e,r){"use strict";var n=r(29),i=r(34);t.exports=function(t){return function(e,r){var o,a,s=String(i(e)),l=n(r),c=s.length;return l<0||l>=c?t?"":void 0:(o=s.charCodeAt(l))<55296||o>56319||l+1===c||(a=s.charCodeAt(l+1))<56320||a>57343?t?s.charAt(l):o:t?s.slice(l,l+2):a-56320+(o-55296<<10)+65536}}},function(t,e,r){"use strict";var n=r(25),i=r(7),o=r(20),a=r(10),s=r(51),l=r(52),c=r(60),u=r(61),h=r(33)("iterator"),d=!([].keys&&"next"in[].keys()),f=function(){return this};t.exports=function(t,e,r,p,g,v,y){l(r,e,p);var m,_,b,w=function(t){if(!d&&t in x)return x[t];switch(t){case"keys":case"values":return function(){return new r(this,t)}}return function(){return new r(this,t)}},S=e+" Iterator",A="values"==g,k=!1,x=t.prototype,C=x[h]||x["@@iterator"]||g&&x[g],P=C||w(g),R=g?A?w("entries"):P:void 0,T="Array"==e&&x.entries||C;if(T&&(b=u(T.call(new t)))!==Object.prototype&&b.next&&(c(b,S,!0),n||"function"==typeof b[h]||a(b,h,f)),A&&C&&"values"!==C.name&&(k=!0,P=function(){return C.call(this)}),n&&!y||!d&&!k&&x[h]||a(x,h,P),s[e]=P,s[S]=f,g)if(m={values:A?P:w("values"),keys:v?P:w("keys"),entries:R},y)for(_ in m)_ in x||o(x,_,m[_]);else i(i.P+i.F*(d||k),e,m);return m}},function(t,e,r){"use strict";t.exports={}},function(t,e,r){"use strict";var n=r(53),i=r(19),o=r(60),a={};r(10)(a,r(33)("iterator"),(function(){return this})),t.exports=function(t,e,r){t.prototype=n(a,{next:i(1,r)}),o(t,e+" Iterator")}},function(t,e,r){"use strict";var n=r(12),i=r(54),o=r(58),a=r(57)("IE_PROTO"),s=function(){},l=function(){var t,e=r(17)("iframe"),n=o.length;for(e.style.display="none",r(59).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;n--;)delete l.prototype[o[n]];return l()};t.exports=Object.create||function(t,e){var r;return null!==t?(s.prototype=n(t),r=new s,s.prototype=null,r[a]=t):r=l(),void 0===e?r:i(r,e)}},function(t,e,r){"use strict";var n=r(11),i=r(12),o=r(55);t.exports=r(15)?Object.defineProperties:function(t,e){i(t);for(var r,a=o(e),s=a.length,l=0;s>l;)n.f(t,r=a[l++],e[r]);return t}},function(t,e,r){"use strict";var n=r(56),i=r(58);t.exports=Object.keys||function(t){return n(t,i)}},function(t,e,r){"use strict";var n=r(21),i=r(43),o=r(42)(!1),a=r(57)("IE_PROTO");t.exports=function(t,e){var r,s=i(t),l=0,c=[];for(r in s)r!=a&&n(s,r)&&c.push(r);for(;e.length>l;)n(s,r=e[l++])&&(~o(c,r)||c.push(r));return c}},function(t,e,r){"use strict";var n=r(24)("keys"),i=r(22);t.exports=function(t){return n[t]||(n[t]=i(t))}},function(t,e,r){"use strict";t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,r){"use strict";var n=r(8).document;t.exports=n&&n.documentElement},function(t,e,r){"use strict";var n=r(11).f,i=r(21),o=r(33)("toStringTag");t.exports=function(t,e,r){t&&!i(t=r?t:t.prototype,o)&&n(t,o,{configurable:!0,value:e})}},function(t,e,r){"use strict";var n=r(21),i=r(62),o=r(57)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),n(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,r){"use strict";var n=r(34);t.exports=function(t){return Object(n(t))}},function(t,e,r){"use strict";var n=r(26),i=r(7),o=r(62),a=r(64),s=r(65),l=r(28),c=r(66),u=r(67);i(i.S+i.F*!r(69)((function(t){Array.from(t)})),"Array",{from:function(t){var e,r,i,h,d=o(t),f="function"==typeof this?this:Array,p=arguments.length,g=p>1?arguments[1]:void 0,v=void 0!==g,y=0,m=u(d);if(v&&(g=n(g,p>2?arguments[2]:void 0,2)),null==m||f==Array&&s(m))for(r=new f(e=l(d.length));e>y;y++)c(r,y,v?g(d[y],y):d[y]);else for(h=m.call(d),r=new f;!(i=h.next()).done;y++)c(r,y,v?a(h,g,[i.value,y],!0):i.value);return r.length=y,r}})},function(t,e,r){"use strict";var n=r(12);t.exports=function(t,e,r,i){try{return i?e(n(r)[0],r[1]):e(r)}catch(e){var o=t.return;throw void 0!==o&&n(o.call(t)),e}}},function(t,e,r){"use strict";var n=r(51),i=r(33)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||o[i]===t)}},function(t,e,r){"use strict";var n=r(11),i=r(19);t.exports=function(t,e,r){e in t?n.f(t,e,i(0,r)):t[e]=r}},function(t,e,r){"use strict";var n=r(68),i=r(33)("iterator"),o=r(51);t.exports=r(9).getIteratorMethod=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[n(t)]}},function(t,e,r){"use strict";var n=r(32),i=r(33)("toStringTag"),o="Arguments"==n(function(){return arguments}());t.exports=function(t){var e,r,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?r:o?n(e):"Object"==(a=n(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,r){"use strict";var n=r(33)("iterator"),i=!1;try{var o=[7][n]();o.return=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var r=!1;try{var o=[7],a=o[n]();a.next=function(){return{done:r=!0}},o[n]=function(){return a},t(o)}catch(t){}return r}},function(t,e,r){"use strict";r(71),t.exports=r(9).Object.assign},function(t,e,r){"use strict";var n=r(7);n(n.S+n.F,"Object",{assign:r(72)})},function(t,e,r){"use strict";var n=r(15),i=r(55),o=r(73),a=r(74),s=r(62),l=r(44),c=Object.assign;t.exports=!c||r(16)((function(){var t={},e={},r=Symbol(),n="abcdefghijklmnopqrst";return t[r]=7,n.split("").forEach((function(t){e[t]=t})),7!=c({},t)[r]||Object.keys(c({},e)).join("")!=n}))?function(t,e){for(var r=s(t),c=arguments.length,u=1,h=o.f,d=a.f;c>u;)for(var f,p=l(arguments[u++]),g=h?i(p).concat(h(p)):i(p),v=g.length,y=0;v>y;)f=g[y++],n&&!d.call(p,f)||(r[f]=p[f]);return r}:c},function(t,e,r){"use strict";e.f=Object.getOwnPropertySymbols},function(t,e,r){"use strict";e.f={}.propertyIsEnumerable},function(t,e,r){"use strict";r(76),t.exports=r(9).Math.log2},function(t,e,r){"use strict";var n=r(7);n(n.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,r){"use strict";r(78),t.exports=r(9).Number.isNaN},function(t,e,r){"use strict";var n=r(7);n(n.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,r){"use strict";r(80),t.exports=r(9).Number.isInteger},function(t,e,r){"use strict";var n=r(7);n(n.S,"Number",{isInteger:r(81)})},function(t,e,r){"use strict";var n=r(13),i=Math.floor;t.exports=function(t){return!n(t)&&isFinite(t)&&i(t)===t}},function(t,e,r){"use strict";r(83),r(48),r(84),r(87),r(100),r(101),t.exports=r(9).Promise},function(t,e,r){"use strict";var n=r(68),i={};i[r(33)("toStringTag")]="z",i+""!="[object z]"&&r(20)(Object.prototype,"toString",(function(){return"[object "+n(this)+"]"}),!0)},function(t,e,r){"use strict";for(var n=r(85),i=r(55),o=r(20),a=r(8),s=r(10),l=r(51),c=r(33),u=c("iterator"),h=c("toStringTag"),d=l.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(f),g=0;g<p.length;g++){var v,y=p[g],m=f[y],_=a[y],b=_&&_.prototype;if(b&&(b[u]||s(b,u,d),b[h]||s(b,h,y),l[y]=d,m))for(v in n)b[v]||o(b,v,n[v],!0)}},function(t,e,r){"use strict";var n=r(46),i=r(86),o=r(51),a=r(43);t.exports=r(50)(Array,"Array",(function(t,e){this._t=a(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?r:"values"==e?t[r]:[r,t[r]])}),"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},function(t,e,r){"use strict";t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,r){"use strict";var n,i,o,a,s=r(25),l=r(8),c=r(26),u=r(68),h=r(7),d=r(13),f=r(27),p=r(88),g=r(89),v=r(90),y=r(91).set,m=r(93)(),_=r(94),b=r(95),w=r(96),S=r(97),A=l.TypeError,k=l.process,x=k&&k.versions,C=x&&x.v8||"",P=l.Promise,R="process"==u(k),T=function(){},E=i=_.f,O=!!function(){try{var t=P.resolve(1),e=(t.constructor={})[r(33)("species")]=function(t){t(T,T)};return(R||"function"==typeof PromiseRejectionEvent)&&t.then(T)instanceof e&&0!==C.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(t){}}(),F=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},I=function(t,e){if(!t._n){t._n=!0;var r=t._c;m((function(){for(var n=t._v,i=1==t._s,o=0,a=function(e){var r,o,a,s=i?e.ok:e.fail,l=e.resolve,c=e.reject,u=e.domain;try{s?(i||(2==t._h&&D(t),t._h=1),!0===s?r=n:(u&&u.enter(),r=s(n),u&&(u.exit(),a=!0)),r===e.promise?c(A("Promise-chain cycle")):(o=F(r))?o.call(r,l,c):l(r)):c(n)}catch(t){u&&!a&&u.exit(),c(t)}};r.length>o;)a(r[o++]);t._c=[],t._n=!1,e&&!t._h&&M(t)}))}},M=function(t){y.call(l,(function(){var e,r,n,i=t._v,o=L(t);if(o&&(e=b((function(){R?k.emit("unhandledRejection",i,t):(r=l.onunhandledrejection)?r({promise:t,reason:i}):(n=l.console)&&n.error&&n.error("Unhandled promise rejection",i)})),t._h=R||L(t)?2:1),t._a=void 0,o&&e.e)throw e.v}))},L=function(t){return 1!==t._h&&0===(t._a||t._c).length},D=function(t){y.call(l,(function(){var e;R?k.emit("rejectionHandled",t):(e=l.onrejectionhandled)&&e({promise:t,reason:t._v})}))},N=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),I(e,!0))},j=function t(e){var r,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw A("Promise can't be resolved itself");(r=F(e))?m((function(){var i={_w:n,_d:!1};try{r.call(e,c(t,i,1),c(N,i,1))}catch(t){N.call(i,t)}})):(n._v=e,n._s=1,I(n,!1))}catch(t){N.call({_w:n,_d:!1},t)}}};O||(P=function(t){p(this,P,"Promise","_h"),f(t),n.call(this);try{t(c(j,this,1),c(N,this,1))}catch(t){N.call(this,t)}},(n=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(98)(P.prototype,{then:function(t,e){var r=E(v(this,P));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=R?k.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&I(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new n;this.promise=t,this.resolve=c(j,t,1),this.reject=c(N,t,1)},_.f=E=function(t){return t===P||t===a?new o(t):i(t)}),h(h.G+h.W+h.F*!O,{Promise:P}),r(60)(P,"Promise"),r(99)("Promise"),a=r(9).Promise,h(h.S+h.F*!O,"Promise",{reject:function(t){var e=E(this);return(0,e.reject)(t),e.promise}}),h(h.S+h.F*(s||!O),"Promise",{resolve:function(t){return S(s&&this===a?P:this,t)}}),h(h.S+h.F*!(O&&r(69)((function(t){P.all(t).catch(T)}))),"Promise",{all:function(t){var e=this,r=E(e),n=r.resolve,i=r.reject,o=b((function(){var r=[],o=0,a=1;g(t,!1,(function(t){var s=o++,l=!1;r.push(void 0),a++,e.resolve(t).then((function(t){l||(l=!0,r[s]=t,--a||n(r))}),i)})),--a||n(r)}));return o.e&&i(o.v),r.promise},race:function(t){var e=this,r=E(e),n=r.reject,i=b((function(){g(t,!1,(function(t){e.resolve(t).then(r.resolve,n)}))}));return i.e&&n(i.v),r.promise}})},function(t,e,r){"use strict";t.exports=function(t,e,r,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(r+": incorrect invocation!");return t}},function(t,e,r){"use strict";var n=r(26),i=r(64),o=r(65),a=r(12),s=r(28),l=r(67),c={},u={},h=t.exports=function(t,e,r,h,d){var f,p,g,v,y=d?function(){return t}:l(t),m=n(r,h,e?2:1),_=0;if("function"!=typeof y)throw TypeError(t+" is not iterable!");if(o(y)){for(f=s(t.length);f>_;_++)if((v=e?m(a(p=t[_])[0],p[1]):m(t[_]))===c||v===u)return v}else for(g=y.call(t);!(p=g.next()).done;)if((v=i(g,m,p.value,e))===c||v===u)return v};h.BREAK=c,h.RETURN=u},function(t,e,r){"use strict";var n=r(12),i=r(27),o=r(33)("species");t.exports=function(t,e){var r,a=n(t).constructor;return void 0===a||null==(r=n(a)[o])?e:i(r)}},function(t,e,r){"use strict";var n,i,o,a=r(26),s=r(92),l=r(59),c=r(17),u=r(8),h=u.process,d=u.setImmediate,f=u.clearImmediate,p=u.MessageChannel,g=u.Dispatch,v=0,y={},m=function(){var t=+this;if(y.hasOwnProperty(t)){var e=y[t];delete y[t],e()}},_=function(t){m.call(t.data)};d&&f||(d=function(t){for(var e=[],r=1;arguments.length>r;)e.push(arguments[r++]);return y[++v]=function(){s("function"==typeof t?t:Function(t),e)},n(v),v},f=function(t){delete y[t]},"process"==r(32)(h)?n=function(t){h.nextTick(a(m,t,1))}:g&&g.now?n=function(t){g.now(a(m,t,1))}:p?(o=(i=new p).port2,i.port1.onmessage=_,n=a(o.postMessage,o,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(n=function(t){u.postMessage(t+"","*")},u.addEventListener("message",_,!1)):n="onreadystatechange"in c("script")?function(t){l.appendChild(c("script")).onreadystatechange=function(){l.removeChild(this),m.call(t)}}:function(t){setTimeout(a(m,t,1),0)}),t.exports={set:d,clear:f}},function(t,e,r){"use strict";t.exports=function(t,e,r){var n=void 0===r;switch(e.length){case 0:return n?t():t.call(r);case 1:return n?t(e[0]):t.call(r,e[0]);case 2:return n?t(e[0],e[1]):t.call(r,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(r,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(r,e[0],e[1],e[2],e[3])}return t.apply(r,e)}},function(t,e,r){"use strict";var n=r(8),i=r(91).set,o=n.MutationObserver||n.WebKitMutationObserver,a=n.process,s=n.Promise,l="process"==r(32)(a);t.exports=function(){var t,e,r,c=function(){var n,i;for(l&&(n=a.domain)&&n.exit();t;){i=t.fn,t=t.next;try{i()}catch(n){throw t?r():e=void 0,n}}e=void 0,n&&n.enter()};if(l)r=function(){a.nextTick(c)};else if(!o||n.navigator&&n.navigator.standalone)if(s&&s.resolve){var u=s.resolve(void 0);r=function(){u.then(c)}}else r=function(){i.call(n,c)};else{var h=!0,d=document.createTextNode("");new o(c).observe(d,{characterData:!0}),r=function(){d.data=h=!h}}return function(n){var i={fn:n,next:void 0};e&&(e.next=i),t||(t=i,r()),e=i}}},function(t,e,r){"use strict";var n=r(27);function i(t){var e,r;this.promise=new t((function(t,n){if(void 0!==e||void 0!==r)throw TypeError("Bad Promise constructor");e=t,r=n})),this.resolve=n(e),this.reject=n(r)}t.exports.f=function(t){return new i(t)}},function(t,e,r){"use strict";t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,r){"use strict";var n=r(8).navigator;t.exports=n&&n.userAgent||""},function(t,e,r){"use strict";var n=r(12),i=r(13),o=r(94);t.exports=function(t,e){if(n(t),i(e)&&e.constructor===t)return e;var r=o.f(t);return(0,r.resolve)(e),r.promise}},function(t,e,r){"use strict";var n=r(20);t.exports=function(t,e,r){for(var i in e)n(t,i,e[i],r);return t}},function(t,e,r){"use strict";var n=r(8),i=r(11),o=r(15),a=r(33)("species");t.exports=function(t){var e=n[t];o&&e&&!e[a]&&i.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,r){"use strict";var n=r(7),i=r(9),o=r(8),a=r(90),s=r(97);n(n.P+n.R,"Promise",{finally:function(t){var e=a(this,i.Promise||o.Promise),r="function"==typeof t;return this.then(r?function(r){return s(e,t()).then((function(){return r}))}:t,r?function(r){return s(e,t()).then((function(){throw r}))}:t)}})},function(t,e,r){"use strict";var n=r(7),i=r(94),o=r(95);n(n.S,"Promise",{try:function(t){var e=i.f(this),r=o(t);return(r.e?e.reject:e.resolve)(r.v),e.promise}})},function(t,e,r){"use strict";r(83),r(84),r(103),r(115),r(117),t.exports=r(9).WeakMap},function(t,e,r){"use strict";var n,i=r(8),o=r(104)(0),a=r(20),s=r(108),l=r(72),c=r(109),u=r(13),h=r(110),d=r(110),f=!i.ActiveXObject&&"ActiveXObject"in i,p=s.getWeak,g=Object.isExtensible,v=c.ufstore,y=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},m={get:function(t){if(u(t)){var e=p(t);return!0===e?v(h(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return c.def(h(this,"WeakMap"),t,e)}},_=t.exports=r(111)("WeakMap",y,m,c,!0,!0);d&&f&&(l((n=c.getConstructor(y,"WeakMap")).prototype,m),s.NEED=!0,o(["delete","has","get","set"],(function(t){var e=_.prototype,r=e[t];a(e,t,(function(e,i){if(u(e)&&!g(e)){this._f||(this._f=new n);var o=this._f[t](e,i);return"set"==t?this:o}return r.call(this,e,i)}))})))},function(t,e,r){"use strict";var n=r(26),i=r(44),o=r(62),a=r(28),s=r(105);t.exports=function(t,e){var r=1==t,l=2==t,c=3==t,u=4==t,h=6==t,d=5==t||h,f=e||s;return function(e,s,p){for(var g,v,y=o(e),m=i(y),_=n(s,p,3),b=a(m.length),w=0,S=r?f(e,b):l?f(e,0):void 0;b>w;w++)if((d||w in m)&&(v=_(g=m[w],w,y),t))if(r)S[w]=v;else if(v)switch(t){case 3:return!0;case 5:return g;case 6:return w;case 2:S.push(g)}else if(u)return!1;return h?-1:c||u?u:S}}},function(t,e,r){"use strict";var n=r(106);t.exports=function(t,e){return new(n(t))(e)}},function(t,e,r){"use strict";var n=r(13),i=r(107),o=r(33)("species");t.exports=function(t){var e;return i(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!i(e.prototype)||(e=void 0),n(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},function(t,e,r){"use strict";var n=r(32);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=r(22)("meta"),o=r(13),a=r(21),s=r(11).f,l=0,c=Object.isExtensible||function(){return!0},u=!r(16)((function(){return c(Object.preventExtensions({}))})),h=function(t){s(t,i,{value:{i:"O"+ ++l,w:{}}})},d=t.exports={KEY:i,NEED:!1,fastKey:function(t,e){if(!o(t))return"symbol"==n(t)?t:("string"==typeof t?"S":"P")+t;if(!a(t,i)){if(!c(t))return"F";if(!e)return"E";h(t)}return t[i].i},getWeak:function(t,e){if(!a(t,i)){if(!c(t))return!0;if(!e)return!1;h(t)}return t[i].w},onFreeze:function(t){return u&&d.NEED&&c(t)&&!a(t,i)&&h(t),t}}},function(t,e,r){"use strict";var n=r(98),i=r(108).getWeak,o=r(12),a=r(13),s=r(88),l=r(89),c=r(104),u=r(21),h=r(110),d=c(5),f=c(6),p=0,g=function(t){return t._l||(t._l=new v)},v=function(){this.a=[]},y=function(t,e){return d(t.a,(function(t){return t[0]===e}))};v.prototype={get:function(t){var e=y(this,t);if(e)return e[1]},has:function(t){return!!y(this,t)},set:function(t,e){var r=y(this,t);r?r[1]=e:this.a.push([t,e])},delete:function(t){var e=f(this.a,(function(e){return e[0]===t}));return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,r,o){var c=t((function(t,n){s(t,c,e,"_i"),t._t=e,t._i=p++,t._l=void 0,null!=n&&l(n,r,t[o],t)}));return n(c.prototype,{delete:function(t){if(!a(t))return!1;var r=i(t);return!0===r?g(h(this,e)).delete(t):r&&u(r,this._i)&&delete r[this._i]},has:function(t){if(!a(t))return!1;var r=i(t);return!0===r?g(h(this,e)).has(t):r&&u(r,this._i)}}),c},def:function(t,e,r){var n=i(o(e),!0);return!0===n?g(t).set(e,r):n[t._i]=r,t},ufstore:g}},function(t,e,r){"use strict";var n=r(13);t.exports=function(t,e){if(!n(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,r){"use strict";var n=r(8),i=r(7),o=r(20),a=r(98),s=r(108),l=r(89),c=r(88),u=r(13),h=r(16),d=r(69),f=r(60),p=r(112);t.exports=function(t,e,r,g,v,y){var m=n[t],_=m,b=v?"set":"add",w=_&&_.prototype,S={},A=function(t){var e=w[t];o(w,t,"delete"==t?function(t){return!(y&&!u(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(y&&!u(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return y&&!u(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,r){return e.call(this,0===t?0:t,r),this})};if("function"==typeof _&&(y||w.forEach&&!h((function(){(new _).entries().next()})))){var k=new _,x=k[b](y?{}:-0,1)!=k,C=h((function(){k.has(1)})),P=d((function(t){new _(t)})),R=!y&&h((function(){for(var t=new _,e=5;e--;)t[b](e,e);return!t.has(-0)}));P||((_=e((function(e,r){c(e,_,t);var n=p(new m,e,_);return null!=r&&l(r,v,n[b],n),n}))).prototype=w,w.constructor=_),(C||R)&&(A("delete"),A("has"),v&&A("get")),(R||x)&&A(b),y&&w.clear&&delete w.clear}else _=g.getConstructor(e,t,v,b),a(_.prototype,r),s.NEED=!0;return f(_,t),S[t]=_,i(i.G+i.W+i.F*(_!=m),S),y||g.setStrong(_,t,v),_}},function(t,e,r){"use strict";var n=r(13),i=r(113).set;t.exports=function(t,e,r){var o,a=e.constructor;return a!==r&&"function"==typeof a&&(o=a.prototype)!==r.prototype&&n(o)&&i&&i(t,o),t}},function(t,e,r){"use strict";var n=r(13),i=r(12),o=function(t,e){if(i(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=r(26)(Function.call,r(114).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,r){return o(t,r),e?t.__proto__=r:n(t,r),t}}({},!1):void 0),check:o}},function(t,e,r){"use strict";var n=r(74),i=r(19),o=r(43),a=r(18),s=r(21),l=r(14),c=Object.getOwnPropertyDescriptor;e.f=r(15)?c:function(t,e){if(t=o(t),e=a(e,!0),l)try{return c(t,e)}catch(t){}if(s(t,e))return i(!n.f.call(t,e),t[e])}},function(t,e,r){"use strict";r(116)("WeakMap")},function(t,e,r){"use strict";var n=r(7);t.exports=function(t){n(n.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,r){"use strict";r(118)("WeakMap")},function(t,e,r){"use strict";var n=r(7),i=r(27),o=r(26),a=r(89);t.exports=function(t){n(n.S,t,{from:function(t){var e,r,n,s,l=arguments[1];return i(this),(e=void 0!==l)&&i(l),null==t?new this:(r=[],e?(n=0,s=o(l,arguments[2],2),a(t,!1,(function(t){r.push(s(t,n++))}))):a(t,!1,r.push,r),new this(r))}})}},function(t,e,r){"use strict";r(83),r(84),r(120),r(121),r(122),t.exports=r(9).WeakSet},function(t,e,r){"use strict";var n=r(109),i=r(110);r(111)("WeakSet",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return n.def(i(this,"WeakSet"),t,!0)}},n,!1,!0)},function(t,e,r){"use strict";r(116)("WeakSet")},function(t,e,r){"use strict";r(118)("WeakSet")},function(t,e,r){"use strict";r(124),t.exports=r(9).String.codePointAt},function(t,e,r){"use strict";var n=r(7),i=r(49)(!1);n(n.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,e,r){"use strict";r(126),t.exports=r(9).String.fromCodePoint},function(t,e,r){"use strict";var n=r(7),i=r(45),o=String.fromCharCode,a=String.fromCodePoint;n(n.S+n.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(t){for(var e,r=[],n=arguments.length,a=0;n>a;){if(e=+arguments[a++],i(e,1114111)!==e)throw RangeError(e+" is not a valid code point");r.push(e<65536?o(e):o(55296+((e-=65536)>>10),e%1024+56320))}return r.join("")}})},function(t,e,r){"use strict";r(128),r(83),t.exports=r(9).Symbol},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=r(8),o=r(21),a=r(15),s=r(7),l=r(20),c=r(108).KEY,u=r(16),h=r(24),d=r(60),f=r(22),p=r(33),g=r(129),v=r(130),y=r(131),m=r(107),_=r(12),b=r(13),w=r(62),S=r(43),A=r(18),k=r(19),x=r(53),C=r(132),P=r(114),R=r(73),T=r(11),E=r(55),O=P.f,F=T.f,I=C.f,M=i.Symbol,L=i.JSON,D=L&&L.stringify,N=p("_hidden"),j=p("toPrimitive"),U={}.propertyIsEnumerable,G=h("symbol-registry"),q=h("symbols"),B=h("op-symbols"),W=Object.prototype,z="function"==typeof M&&!!R.f,H=i.QObject,Y=!H||!H.prototype||!H.prototype.findChild,V=a&&u((function(){return 7!=x(F({},"a",{get:function(){return F(this,"a",{value:7}).a}})).a}))?function(t,e,r){var n=O(W,e);n&&delete W[e],F(t,e,r),n&&t!==W&&F(W,e,n)}:F,X=function(t){var e=q[t]=x(M.prototype);return e._k=t,e},K=z&&"symbol"==n(M.iterator)?function(t){return"symbol"==n(t)}:function(t){return t instanceof M},Q=function(t,e,r){return t===W&&Q(B,e,r),_(t),e=A(e,!0),_(r),o(q,e)?(r.enumerable?(o(t,N)&&t[N][e]&&(t[N][e]=!1),r=x(r,{enumerable:k(0,!1)})):(o(t,N)||F(t,N,k(1,{})),t[N][e]=!0),V(t,e,r)):F(t,e,r)},J=function(t,e){_(t);for(var r,n=y(e=S(e)),i=0,o=n.length;o>i;)Q(t,r=n[i++],e[r]);return t},$=function(t){var e=U.call(this,t=A(t,!0));return!(this===W&&o(q,t)&&!o(B,t))&&(!(e||!o(this,t)||!o(q,t)||o(this,N)&&this[N][t])||e)},Z=function(t,e){if(t=S(t),e=A(e,!0),t!==W||!o(q,e)||o(B,e)){var r=O(t,e);return!r||!o(q,e)||o(t,N)&&t[N][e]||(r.enumerable=!0),r}},tt=function(t){for(var e,r=I(S(t)),n=[],i=0;r.length>i;)o(q,e=r[i++])||e==N||e==c||n.push(e);return n},et=function(t){for(var e,r=t===W,n=I(r?B:S(t)),i=[],a=0;n.length>a;)!o(q,e=n[a++])||r&&!o(W,e)||i.push(q[e]);return i};z||(l((M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function e(r){this===W&&e.call(B,r),o(this,N)&&o(this[N],t)&&(this[N][t]=!1),V(this,t,k(1,r))};return a&&Y&&V(W,t,{configurable:!0,set:e}),X(t)}).prototype,"toString",(function(){return this._k})),P.f=Z,T.f=Q,r(133).f=C.f=tt,r(74).f=$,R.f=et,a&&!r(25)&&l(W,"propertyIsEnumerable",$,!0),g.f=function(t){return X(p(t))}),s(s.G+s.W+s.F*!z,{Symbol:M});for(var rt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;rt.length>nt;)p(rt[nt++]);for(var it=E(p.store),ot=0;it.length>ot;)v(it[ot++]);s(s.S+s.F*!z,"Symbol",{for:function(t){return o(G,t+="")?G[t]:G[t]=M(t)},keyFor:function(t){if(!K(t))throw TypeError(t+" is not a symbol!");for(var e in G)if(G[e]===t)return e},useSetter:function(){Y=!0},useSimple:function(){Y=!1}}),s(s.S+s.F*!z,"Object",{create:function(t,e){return void 0===e?x(t):J(x(t),e)},defineProperty:Q,defineProperties:J,getOwnPropertyDescriptor:Z,getOwnPropertyNames:tt,getOwnPropertySymbols:et});var at=u((function(){R.f(1)}));s(s.S+s.F*at,"Object",{getOwnPropertySymbols:function(t){return R.f(w(t))}}),L&&s(s.S+s.F*(!z||u((function(){var t=M();return"[null]"!=D([t])||"{}"!=D({a:t})||"{}"!=D(Object(t))}))),"JSON",{stringify:function(t){for(var e,r,n=[t],i=1;arguments.length>i;)n.push(arguments[i++]);if(r=e=n[1],(b(e)||void 0!==t)&&!K(t))return m(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!K(e))return e}),n[1]=e,D.apply(L,n)}}),M.prototype[j]||r(10)(M.prototype,j,M.prototype.valueOf),d(M,"Symbol"),d(Math,"Math",!0),d(i.JSON,"JSON",!0)},function(t,e,r){"use strict";e.f=r(33)},function(t,e,r){"use strict";var n=r(8),i=r(9),o=r(25),a=r(129),s=r(11).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e,r){"use strict";var n=r(55),i=r(73),o=r(74);t.exports=function(t){var e=n(t),r=i.f;if(r)for(var a,s=r(t),l=o.f,c=0;s.length>c;)l.call(t,a=s[c++])&&e.push(a);return e}},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=r(43),o=r(133).f,a={}.toString,s="object"==("undefined"==typeof window?"undefined":n(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"[object Window]"==a.call(t)?function(t){try{return o(t)}catch(t){return s.slice()}}(t):o(i(t))}},function(t,e,r){"use strict";var n=r(56),i=r(58).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,i)}},function(t,e,r){"use strict";r(135),t.exports=r(9).String.padStart},function(t,e,r){"use strict";var n=r(7),i=r(136),o=r(96),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);n(n.P+n.F*a,"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,r){"use strict";var n=r(28),i=r(137),o=r(34);t.exports=function(t,e,r,a){var s=String(o(t)),l=s.length,c=void 0===r?" ":String(r),u=n(e);if(u<=l||""==c)return s;var h=u-l,d=i.call(c,Math.ceil(h/c.length));return d.length>h&&(d=d.slice(0,h)),a?d+s:s+d}},function(t,e,r){"use strict";var n=r(29),i=r(34);t.exports=function(t){var e=String(i(this)),r="",o=n(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(r+=e);return r}},function(t,e,r){"use strict";r(139),t.exports=r(9).String.padEnd},function(t,e,r){"use strict";var n=r(7),i=r(136),o=r(96),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);n(n.P+n.F*a,"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,r){"use strict";r(141),t.exports=r(9).Object.values},function(t,e,r){"use strict";var n=r(7),i=r(142)(!1);n(n.S,"Object",{values:function(t){return i(t)}})},function(t,e,r){"use strict";var n=r(15),i=r(55),o=r(43),a=r(74).f;t.exports=function(t){return function(e){for(var r,s=o(e),l=i(s),c=l.length,u=0,h=[];c>u;)r=l[u++],n&&!a.call(s,r)||h.push(t?[r,s[r]]:s[r]);return h}}},function(t,e,r){"use strict";var n=!1;if("undefined"!=typeof ReadableStream)try{new ReadableStream({start:function(t){t.close()}}),n=!0}catch(t){}e.ReadableStream=n?ReadableStream:r(144).ReadableStream},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t,e){for(var r in e)t[r]=e[r]}(e,function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.i=function(t){return t},r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=7)}([function(t,e,r){var i="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},o=r(1).assert;function a(t){return"string"==typeof t||"symbol"===(void 0===t?"undefined":i(t))}function s(t,e,r){if("function"!=typeof t)throw new TypeError("Argument is not a function");return Function.prototype.apply.call(t,e,r)}e.typeIsObject=function(t){return"object"===(void 0===t?"undefined":i(t))&&null!==t||"function"==typeof t},e.createDataProperty=function(t,r,n){o(e.typeIsObject(t)),Object.defineProperty(t,r,{value:n,writable:!0,enumerable:!0,configurable:!0})},e.createArrayFromList=function(t){return t.slice()},e.ArrayBufferCopy=function(t,e,r,n,i){new Uint8Array(t).set(new Uint8Array(r,n,i),e)},e.CreateIterResultObject=function(t,e){o("boolean"==typeof e);var r={};return Object.defineProperty(r,"value",{value:t,enumerable:!0,writable:!0,configurable:!0}),Object.defineProperty(r,"done",{value:e,enumerable:!0,writable:!0,configurable:!0}),r},e.IsFiniteNonNegativeNumber=function(t){return!(Number.isNaN(t)||t===1/0||t<0)},e.InvokeOrNoop=function(t,e,r){o(void 0!==t),o(a(e)),o(Array.isArray(r));var n=t[e];if(void 0!==n)return s(n,t,r)},e.PromiseInvokeOrNoop=function(t,r,n){o(void 0!==t),o(a(r)),o(Array.isArray(n));try{return Promise.resolve(e.InvokeOrNoop(t,r,n))}catch(t){return Promise.reject(t)}},e.PromiseInvokeOrPerformFallback=function(t,e,r,n,i){o(void 0!==t),o(a(e)),o(Array.isArray(r)),o(Array.isArray(i));var l=void 0;try{l=t[e]}catch(t){return Promise.reject(t)}if(void 0===l)return n.apply(null,i);try{return Promise.resolve(s(l,t,r))}catch(t){return Promise.reject(t)}},e.TransferArrayBuffer=function(t){return t.slice()},e.ValidateAndNormalizeHighWaterMark=function(t){if(t=Number(t),Number.isNaN(t)||t<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return t},e.ValidateAndNormalizeQueuingStrategy=function(t,r){if(void 0!==t&&"function"!=typeof t)throw new TypeError("size property of a queuing strategy must be a function");return{size:t,highWaterMark:r=e.ValidateAndNormalizeHighWaterMark(r)}}},function(t,e,r){function n(t){this.name="AssertionError",this.message=t||"",this.stack=(new Error).stack}n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,t.exports={rethrowAssertionErrorRejection:function(t){t&&t.constructor===n&&setTimeout((function(){throw t}),0)},AssertionError:n,assert:function(t,e){if(!t)throw new n(e)}}},function(t,e,r){var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=r(0),a=o.InvokeOrNoop,s=o.PromiseInvokeOrNoop,l=o.ValidateAndNormalizeQueuingStrategy,c=o.typeIsObject,u=r(1),h=u.assert,d=u.rethrowAssertionErrorRejection,f=r(3),p=f.DequeueValue,g=f.EnqueueValueWithSize,v=f.PeekQueueValue,y=f.ResetQueue,m=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.size,o=r.highWaterMark,a=void 0===o?1:o;i(this,t),this._state="writable",this._storedError=void 0,this._writer=void 0,this._writableStreamController=void 0,this._writeRequests=[],this._inFlightWriteRequest=void 0,this._closeRequest=void 0,this._inFlightCloseRequest=void 0,this._pendingAbortRequest=void 0,this._backpressure=!1;var s=e.type;if(void 0!==s)throw new RangeError("Invalid type is specified");this._writableStreamController=new j(this,e,n,a),this._writableStreamController.__startSteps()}return n(t,[{key:"abort",value:function(t){return!1===b(this)?Promise.reject(z("abort")):!0===w(this)?Promise.reject(new TypeError("Cannot abort a stream that already has a writer")):S(this,t)}},{key:"getWriter",value:function(){if(!1===b(this))throw z("getWriter");return _(this)}},{key:"locked",get:function(){if(!1===b(this))throw z("locked");return w(this)}}]),t}();function _(t){return new O(t)}function b(t){return!!c(t)&&!!Object.prototype.hasOwnProperty.call(t,"_writableStreamController")}function w(t){return h(!0===b(t),"IsWritableStreamLocked should only be used on known writable streams"),void 0!==t._writer}function S(t,e){var r=t._state;if("closed"===r)return Promise.resolve(void 0);if("errored"===r)return Promise.reject(t._storedError);var n=new TypeError("Requested to abort");if(void 0!==t._pendingAbortRequest)return Promise.reject(n);h("writable"===r||"erroring"===r,"state must be writable or erroring");var i=!1;"erroring"===r&&(i=!0,e=void 0);var o=new Promise((function(r,n){t._pendingAbortRequest={_resolve:r,_reject:n,_reason:e,_wasAlreadyErroring:i}}));return!1===i&&k(t,n),o}function A(t,e){var r=t._state;"writable"!==r?(h("erroring"===r),x(t)):k(t,e)}function k(t,e){h(void 0===t._storedError,"stream._storedError === undefined"),h("writable"===t._state,"state must be writable");var r=t._writableStreamController;h(void 0!==r,"controller must not be undefined"),t._state="erroring",t._storedError=e;var n=t._writer;void 0!==n&&L(n,e),!1===R(t)&&!0===r._started&&x(t)}function x(t){h("erroring"===t._state,"stream._state === erroring"),h(!1===R(t),"WritableStreamHasOperationMarkedInFlight(stream) === false"),t._state="errored",t._writableStreamController.__errorSteps();for(var e=t._storedError,r=0;r<t._writeRequests.length;r++)t._writeRequests[r]._reject(e);if(t._writeRequests=[],void 0!==t._pendingAbortRequest){var n=t._pendingAbortRequest;if(t._pendingAbortRequest=void 0,!0===n._wasAlreadyErroring)return n._reject(e),void T(t);t._writableStreamController.__abortSteps(n._reason).then((function(){n._resolve(),T(t)}),(function(e){n._reject(e),T(t)}))}else T(t)}function C(t){h(void 0!==t._inFlightCloseRequest),t._inFlightCloseRequest._resolve(void 0),t._inFlightCloseRequest=void 0;var e=t._state;h("writable"===e||"erroring"===e),"erroring"===e&&(t._storedError=void 0,void 0!==t._pendingAbortRequest&&(t._pendingAbortRequest._resolve(),t._pendingAbortRequest=void 0)),t._state="closed";var r=t._writer;void 0!==r&&function(t){h(void 0!==t._closedPromise_resolve,"writer._closedPromise_resolve !== undefined"),h(void 0!==t._closedPromise_reject,"writer._closedPromise_reject !== undefined"),h("pending"===t._closedPromiseState,"writer._closedPromiseState is pending"),t._closedPromise_resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="resolved"}(r),h(void 0===t._pendingAbortRequest,"stream._pendingAbortRequest === undefined"),h(void 0===t._storedError,"stream._storedError === undefined")}function P(t){return void 0!==t._closeRequest||void 0!==t._inFlightCloseRequest}function R(t){return void 0!==t._inFlightWriteRequest||void 0!==t._inFlightCloseRequest}function T(t){h("errored"===t._state,'_stream_.[[state]] is `"errored"`'),void 0!==t._closeRequest&&(h(void 0===t._inFlightCloseRequest),t._closeRequest._reject(t._storedError),t._closeRequest=void 0);var e=t._writer;void 0!==e&&(X(e,t._storedError),e._closedPromise.catch((function(){})))}function E(t,e){h("writable"===t._state),h(!1===P(t));var r=t._writer;void 0!==r&&e!==t._backpressure&&(!0===e?function(t){h(void 0===t._readyPromise_resolve,"writer._readyPromise_resolve === undefined"),h(void 0===t._readyPromise_reject,"writer._readyPromise_reject === undefined"),t._readyPromise=new Promise((function(e,r){t._readyPromise_resolve=e,t._readyPromise_reject=r})),t._readyPromiseState="pending"}(r):(h(!1===e),J(r))),t._backpressure=e}t.exports={AcquireWritableStreamDefaultWriter:_,IsWritableStream:b,IsWritableStreamLocked:w,WritableStream:m,WritableStreamAbort:S,WritableStreamDefaultControllerError:W,WritableStreamDefaultWriterCloseWithErrorPropagation:function(t){var e=t._ownerWritableStream;h(void 0!==e);var r=e._state;return!0===P(e)||"closed"===r?Promise.resolve():"errored"===r?Promise.reject(e._storedError):(h("writable"===r||"erroring"===r),I(t))},WritableStreamDefaultWriterRelease:D,WritableStreamDefaultWriterWrite:N,WritableStreamCloseQueuedOrInFlight:P};var O=function(){function t(e){if(i(this,t),!1===b(e))throw new TypeError("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(!0===w(e))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=e,e._writer=this;var r,n=e._state;if("writable"===n)!1===P(e)&&!0===e._backpressure?((r=this)._readyPromise=new Promise((function(t,e){r._readyPromise_resolve=t,r._readyPromise_reject=e})),r._readyPromiseState="pending"):Q(this),V(this);else if("erroring"===n)K(this,e._storedError),this._readyPromise.catch((function(){})),V(this);else if("closed"===n)Q(this),function(t){t._closedPromise=Promise.resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="resolved"}(this);else{h("errored"===n,"state must be errored");var o=e._storedError;K(this,o),this._readyPromise.catch((function(){})),function(t,e){t._closedPromise=Promise.reject(e),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="rejected"}(this,o),this._closedPromise.catch((function(){}))}}return n(t,[{key:"abort",value:function(t){return!1===F(this)?Promise.reject(H("abort")):void 0===this._ownerWritableStream?Promise.reject(Y("abort")):function(t,e){var r=t._ownerWritableStream;return h(void 0!==r),S(r,e)}(this,t)}},{key:"close",value:function(){if(!1===F(this))return Promise.reject(H("close"));var t=this._ownerWritableStream;return void 0===t?Promise.reject(Y("close")):!0===P(t)?Promise.reject(new TypeError("cannot close an already-closing stream")):I(this)}},{key:"releaseLock",value:function(){if(!1===F(this))throw H("releaseLock");var t=this._ownerWritableStream;void 0!==t&&(h(void 0!==t._writer),D(this))}},{key:"write",value:function(t){return!1===F(this)?Promise.reject(H("write")):void 0===this._ownerWritableStream?Promise.reject(Y("write to")):N(this,t)}},{key:"closed",get:function(){return!1===F(this)?Promise.reject(H("closed")):this._closedPromise}},{key:"desiredSize",get:function(){if(!1===F(this))throw H("desiredSize");if(void 0===this._ownerWritableStream)throw Y("desiredSize");return t=this._ownerWritableStream,"errored"===(e=t._state)||"erroring"===e?null:"closed"===e?0:U(t._writableStreamController);var t,e}},{key:"ready",get:function(){return!1===F(this)?Promise.reject(H("ready")):this._readyPromise}}]),t}();function F(t){return!!c(t)&&!!Object.prototype.hasOwnProperty.call(t,"_ownerWritableStream")}function I(t){var e=t._ownerWritableStream;h(void 0!==e);var r=e._state;if("closed"===r||"errored"===r)return Promise.reject(new TypeError("The stream (in "+r+" state) is not in the writable state and cannot be closed"));h("writable"===r||"erroring"===r),h(!1===P(e));var n,i=new Promise((function(t,r){var n={_resolve:t,_reject:r};e._closeRequest=n}));return!0===e._backpressure&&"writable"===r&&J(t),n=e._writableStreamController,g(n,"close",0),G(n),i}function M(t,e){"pending"===t._closedPromiseState?X(t,e):function(t,e){h(void 0===t._closedPromise_resolve,"writer._closedPromise_resolve === undefined"),h(void 0===t._closedPromise_reject,"writer._closedPromise_reject === undefined"),h("pending"!==t._closedPromiseState,"writer._closedPromiseState is not pending"),t._closedPromise=Promise.reject(e),t._closedPromiseState="rejected"}(t,e),t._closedPromise.catch((function(){}))}function L(t,e){"pending"===t._readyPromiseState?function(t,e){h(void 0!==t._readyPromise_resolve,"writer._readyPromise_resolve !== undefined"),h(void 0!==t._readyPromise_reject,"writer._readyPromise_reject !== undefined"),t._readyPromise_reject(e),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="rejected"}(t,e):function(t,e){h(void 0===t._readyPromise_resolve,"writer._readyPromise_resolve === undefined"),h(void 0===t._readyPromise_reject,"writer._readyPromise_reject === undefined"),t._readyPromise=Promise.reject(e),t._readyPromiseState="rejected"}(t,e),t._readyPromise.catch((function(){}))}function D(t){var e=t._ownerWritableStream;h(void 0!==e),h(e._writer===t);var r=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");L(t,r),M(t,r),e._writer=void 0,t._ownerWritableStream=void 0}function N(t,e){var r=t._ownerWritableStream;h(void 0!==r);var n=r._writableStreamController,i=function(t,e){var r=t._strategySize;if(void 0===r)return 1;try{return r(e)}catch(e){return q(t,e),1}}(n,e);if(r!==t._ownerWritableStream)return Promise.reject(Y("write to"));var o=r._state;if("errored"===o)return Promise.reject(r._storedError);if(!0===P(r)||"closed"===o)return Promise.reject(new TypeError("The stream is closing or closed and cannot be written to"));if("erroring"===o)return Promise.reject(r._storedError);h("writable"===o);var a=function(t){return h(!0===w(t)),h("writable"===t._state),new Promise((function(e,r){var n={_resolve:e,_reject:r};t._writeRequests.push(n)}))}(r);return function(t,e,r){var n={chunk:e};try{g(t,n,r)}catch(e){return void q(t,e)}var i=t._controlledWritableStream;if(!1===P(i)&&"writable"===i._state){var o=B(t);E(i,o)}G(t)}(n,e,i),a}var j=function(){function t(e,r,n,o){if(i(this,t),!1===b(e))throw new TypeError("WritableStreamDefaultController can only be constructed with a WritableStream instance");if(void 0!==e._writableStreamController)throw new TypeError("WritableStreamDefaultController instances can only be created by the WritableStream constructor");this._controlledWritableStream=e,this._underlyingSink=r,this._queue=void 0,this._queueTotalSize=void 0,y(this),this._started=!1;var a=l(n,o);this._strategySize=a.size,this._strategyHWM=a.highWaterMark,E(e,B(this))}return n(t,[{key:"error",value:function(t){if(!1==(!!c(e=this)&&!!Object.prototype.hasOwnProperty.call(e,"_underlyingSink")))throw new TypeError("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");var e;"writable"===this._controlledWritableStream._state&&W(this,t)}},{key:"__abortSteps",value:function(t){return s(this._underlyingSink,"abort",[t])}},{key:"__errorSteps",value:function(){y(this)}},{key:"__startSteps",value:function(){var t=this,e=a(this._underlyingSink,"start",[this]),r=this._controlledWritableStream;Promise.resolve(e).then((function(){h("writable"===r._state||"erroring"===r._state),t._started=!0,G(t)}),(function(e){h("writable"===r._state||"erroring"===r._state),t._started=!0,A(r,e)})).catch(d)}}]),t}();function U(t){return t._strategyHWM-t._queueTotalSize}function G(t){var e=t._controlledWritableStream;if(!1!==t._started&&void 0===e._inFlightWriteRequest){var r=e._state;if("closed"!==r&&"errored"!==r)if("erroring"!==r){if(0!==t._queue.length){var n=v(t);"close"===n?function(t){var e=t._controlledWritableStream;(function(t){h(void 0===t._inFlightCloseRequest),h(void 0!==t._closeRequest),t._inFlightCloseRequest=t._closeRequest,t._closeRequest=void 0})(e),p(t),h(0===t._queue.length,"queue must be empty once the final write record is dequeued"),s(t._underlyingSink,"close",[]).then((function(){C(e)}),(function(t){!function(t,e){h(void 0!==t._inFlightCloseRequest),t._inFlightCloseRequest._reject(e),t._inFlightCloseRequest=void 0,h("writable"===t._state||"erroring"===t._state),void 0!==t._pendingAbortRequest&&(t._pendingAbortRequest._reject(e),t._pendingAbortRequest=void 0),A(t,e)}(e,t)})).catch(d)}(t):function(t,e){var r=t._controlledWritableStream;(function(t){h(void 0===t._inFlightWriteRequest,"there must be no pending write request"),h(0!==t._writeRequests.length,"writeRequests must not be empty"),t._inFlightWriteRequest=t._writeRequests.shift()})(r),s(t._underlyingSink,"write",[e,t]).then((function(){!function(t){h(void 0!==t._inFlightWriteRequest),t._inFlightWriteRequest._resolve(void 0),t._inFlightWriteRequest=void 0}(r);var e=r._state;if(h("writable"===e||"erroring"===e),p(t),!1===P(r)&&"writable"===e){var n=B(t);E(r,n)}G(t)}),(function(t){!function(t,e){h(void 0!==t._inFlightWriteRequest),t._inFlightWriteRequest._reject(e),t._inFlightWriteRequest=void 0,h("writable"===t._state||"erroring"===t._state),A(t,e)}(r,t)})).catch(d)}(t,n.chunk)}}else x(e)}}function q(t,e){"writable"===t._controlledWritableStream._state&&W(t,e)}function B(t){return U(t)<=0}function W(t,e){var r=t._controlledWritableStream;h("writable"===r._state),k(r,e)}function z(t){return new TypeError("WritableStream.prototype."+t+" can only be used on a WritableStream")}function H(t){return new TypeError("WritableStreamDefaultWriter.prototype."+t+" can only be used on a WritableStreamDefaultWriter")}function Y(t){return new TypeError("Cannot "+t+" a stream using a released writer")}function V(t){t._closedPromise=new Promise((function(e,r){t._closedPromise_resolve=e,t._closedPromise_reject=r,t._closedPromiseState="pending"}))}function X(t,e){h(void 0!==t._closedPromise_resolve,"writer._closedPromise_resolve !== undefined"),h(void 0!==t._closedPromise_reject,"writer._closedPromise_reject !== undefined"),h("pending"===t._closedPromiseState,"writer._closedPromiseState is pending"),t._closedPromise_reject(e),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="rejected"}function K(t,e){t._readyPromise=Promise.reject(e),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="rejected"}function Q(t){t._readyPromise=Promise.resolve(void 0),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="fulfilled"}function J(t){h(void 0!==t._readyPromise_resolve,"writer._readyPromise_resolve !== undefined"),h(void 0!==t._readyPromise_reject,"writer._readyPromise_reject !== undefined"),t._readyPromise_resolve(void 0),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="fulfilled"}},function(t,e,r){var n=r(0).IsFiniteNonNegativeNumber,i=r(1).assert;e.DequeueValue=function(t){i("_queue"in t&&"_queueTotalSize"in t,"Spec-level failure: DequeueValue should only be used on containers with [[queue]] and [[queueTotalSize]]."),i(t._queue.length>0,"Spec-level failure: should never dequeue from an empty queue.");var e=t._queue.shift();return t._queueTotalSize-=e.size,t._queueTotalSize<0&&(t._queueTotalSize=0),e.value},e.EnqueueValueWithSize=function(t,e,r){if(i("_queue"in t&&"_queueTotalSize"in t,"Spec-level failure: EnqueueValueWithSize should only be used on containers with [[queue]] and [[queueTotalSize]]."),r=Number(r),!n(r))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");t._queue.push({value:e,size:r}),t._queueTotalSize+=r},e.PeekQueueValue=function(t){return i("_queue"in t&&"_queueTotalSize"in t,"Spec-level failure: PeekQueueValue should only be used on containers with [[queue]] and [[queueTotalSize]]."),i(t._queue.length>0,"Spec-level failure: should never peek at an empty queue."),t._queue[0].value},e.ResetQueue=function(t){i("_queue"in t&&"_queueTotalSize"in t,"Spec-level failure: ResetQueue should only be used on containers with [[queue]] and [[queueTotalSize]]."),t._queue=[],t._queueTotalSize=0}},function(t,e,r){var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=r(0),a=o.ArrayBufferCopy,s=o.CreateIterResultObject,l=o.IsFiniteNonNegativeNumber,c=o.InvokeOrNoop,u=o.PromiseInvokeOrNoop,h=o.TransferArrayBuffer,d=o.ValidateAndNormalizeQueuingStrategy,f=o.ValidateAndNormalizeHighWaterMark,p=r(0),g=p.createArrayFromList,v=p.createDataProperty,y=p.typeIsObject,m=r(1),_=m.assert,b=m.rethrowAssertionErrorRejection,w=r(3),S=w.DequeueValue,A=w.EnqueueValueWithSize,k=w.ResetQueue,x=r(2),C=x.AcquireWritableStreamDefaultWriter,P=x.IsWritableStream,R=x.IsWritableStreamLocked,T=x.WritableStreamAbort,E=x.WritableStreamDefaultWriterCloseWithErrorPropagation,O=x.WritableStreamDefaultWriterRelease,F=x.WritableStreamDefaultWriterWrite,I=x.WritableStreamCloseQueuedOrInFlight,M=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.size,o=r.highWaterMark;i(this,t),this._state="readable",this._reader=void 0,this._storedError=void 0,this._disturbed=!1,this._readableStreamController=void 0;var a=e.type,s=String(a);if("bytes"===s)void 0===o&&(o=0),this._readableStreamController=new ft(this,e,o);else{if(void 0!==a)throw new RangeError("Invalid type is specified");void 0===o&&(o=1),this._readableStreamController=new it(this,e,n,o)}}return n(t,[{key:"cancel",value:function(t){return!1===N(this)?Promise.reject(Et("cancel")):!0===j(this)?Promise.reject(new TypeError("Cannot cancel a stream that already has a reader")):B(this,t)}},{key:"getReader",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.mode;if(!1===N(this))throw Et("getReader");if(void 0===e)return D(this);if("byob"===(e=String(e)))return L(this);throw new RangeError("Invalid mode is specified")}},{key:"pipeThrough",value:function(t,e){var r=t.writable,n=t.readable;return function(t){try{Promise.prototype.then.call(t,void 0,(function(){}))}catch(t){}}(this.pipeTo(r,e)),n}},{key:"pipeTo",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.preventClose,i=r.preventAbort,o=r.preventCancel;if(!1===N(this))return Promise.reject(Et("pipeTo"));if(!1===P(t))return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));if(n=Boolean(n),i=Boolean(i),o=Boolean(o),!0===j(this))return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream"));if(!0===R(t))return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream"));var a=D(this),s=C(t),l=!1,c=Promise.resolve();return new Promise((function(r,u){var h,d,f;if(v(e,a._closedPromise,(function(e){!1===i?y((function(){return T(t,e)}),!0,e):m(!0,e)})),v(t,s._closedPromise,(function(t){!1===o?y((function(){return B(e,t)}),!0,t):m(!0,t)})),h=e,d=a._closedPromise,f=function(){!1===n?y((function(){return E(s)})):m()},"closed"===h._state?f():d.then(f).catch(b),!0===I(t)||"closed"===t._state){var p=new TypeError("the destination writable stream closed before all data could be piped to it");!1===o?y((function(){return B(e,p)}),!0,p):m(!0,p)}function g(){var t=c;return c.then((function(){return t!==c?g():void 0}))}function v(t,e,r){"errored"===t._state?r(t._storedError):e.catch(r).catch(b)}function y(e,r,n){function i(){e().then((function(){return _(r,n)}),(function(t){return _(!0,t)})).catch(b)}!0!==l&&(l=!0,"writable"===t._state&&!1===I(t)?g().then(i):i())}function m(e,r){!0!==l&&(l=!0,"writable"===t._state&&!1===I(t)?g().then((function(){return _(e,r)})).catch(b):_(e,r))}function _(t,e){O(s),rt(a),t?u(e):r(void 0)}(function t(){return c=Promise.resolve(),!0===l?Promise.resolve():s._readyPromise.then((function(){return nt(a).then((function(t){var e=t.value;!0!==t.done&&(c=F(s,e).catch((function(){})))}))})).then(t)})().catch((function(t){c=Promise.resolve(),b(t)}))}))}},{key:"tee",value:function(){if(!1===N(this))throw Et("tee");var t=U(this,!1);return g(t)}},{key:"locked",get:function(){if(!1===N(this))throw Et("locked");return j(this)}}]),t}();function L(t){return new J(t)}function D(t){return new Q(t)}function N(t){return!!y(t)&&!!Object.prototype.hasOwnProperty.call(t,"_readableStreamController")}function j(t){return _(!0===N(t),"IsReadableStreamLocked should only be used on known readable streams"),void 0!==t._reader}function U(t,e){_(!0===N(t)),_("boolean"==typeof e);var r=D(t),n={closedOrErrored:!1,canceled1:!1,canceled2:!1,reason1:void 0,reason2:void 0};n.promise=new Promise((function(t){n._resolve=t}));var i=function t(){var e=t._branch1,r=t._branch2,n=t._teeState;return nt(t._reader).then((function(t){_(y(t));var i=t.value,o=t.done;if(_("boolean"==typeof o),!0===o&&!1===n.closedOrErrored&&(!1===n.canceled1&&st(e),!1===n.canceled2&&st(r),n.closedOrErrored=!0),!0!==n.closedOrErrored){var a=i,s=i;!1===n.canceled1&&lt(e,a),!1===n.canceled2&&lt(r,s)}}))};i._reader=r,i._teeState=n,i._cloneForBranch2=e;var o=function t(e){var r=t._stream,n=t._teeState;if(n.canceled1=!0,n.reason1=e,!0===n.canceled2){var i=B(r,g([n.reason1,n.reason2]));n._resolve(i)}return n.promise};o._stream=t,o._teeState=n;var a=function t(e){var r=t._stream,n=t._teeState;if(n.canceled2=!0,n.reason2=e,!0===n.canceled1){var i=B(r,g([n.reason1,n.reason2]));n._resolve(i)}return n.promise};a._stream=t,a._teeState=n;var s=Object.create(Object.prototype);v(s,"pull",i),v(s,"cancel",o);var l=new M(s),c=Object.create(Object.prototype);v(c,"pull",i),v(c,"cancel",a);var u=new M(c);return i._branch1=l._readableStreamController,i._branch2=u._readableStreamController,r._closedPromise.catch((function(t){!0!==n.closedOrErrored&&(ct(i._branch1,t),ct(i._branch2,t),n.closedOrErrored=!0)})),[l,u]}function G(t){return _(!0===$(t._reader)),_("readable"===t._state||"closed"===t._state),new Promise((function(e,r){var n={_resolve:e,_reject:r};t._reader._readIntoRequests.push(n)}))}function q(t){return _(!0===Z(t._reader)),_("readable"===t._state),new Promise((function(e,r){var n={_resolve:e,_reject:r};t._reader._readRequests.push(n)}))}function B(t,e){return t._disturbed=!0,"closed"===t._state?Promise.resolve(void 0):"errored"===t._state?Promise.reject(t._storedError):(W(t),t._readableStreamController.__cancelSteps(e).then((function(){})))}function W(t){_("readable"===t._state),t._state="closed";var e=t._reader;if(void 0!==e){if(!0===Z(e)){for(var r=0;r<e._readRequests.length;r++)(0,e._readRequests[r]._resolve)(s(void 0,!0));e._readRequests=[]}!function(t){_(void 0!==t._closedPromise_resolve),_(void 0!==t._closedPromise_reject),t._closedPromise_resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0}(e)}}function z(t,e){_(!0===N(t),"stream must be ReadableStream"),_("readable"===t._state,"state must be readable"),t._state="errored",t._storedError=e;var r=t._reader;if(void 0!==r){if(!0===Z(r)){for(var n=0;n<r._readRequests.length;n++)r._readRequests[n]._reject(e);r._readRequests=[]}else{_($(r),"reader must be ReadableStreamBYOBReader");for(var i=0;i<r._readIntoRequests.length;i++)r._readIntoRequests[i]._reject(e);r._readIntoRequests=[]}It(r,e),r._closedPromise.catch((function(){}))}}function H(t,e,r){var n=t._reader;_(n._readRequests.length>0),n._readRequests.shift()._resolve(s(e,r))}function Y(t){return t._reader._readIntoRequests.length}function V(t){return t._reader._readRequests.length}function X(t){var e=t._reader;return void 0!==e&&!1!==$(e)}function K(t){var e=t._reader;return void 0!==e&&!1!==Z(e)}t.exports={ReadableStream:M,IsReadableStreamDisturbed:function(t){return _(!0===N(t),"IsReadableStreamDisturbed should only be used on known readable streams"),t._disturbed},ReadableStreamDefaultControllerClose:st,ReadableStreamDefaultControllerEnqueue:lt,ReadableStreamDefaultControllerError:ct,ReadableStreamDefaultControllerGetDesiredSize:ht};var Q=function(){function t(e){if(i(this,t),!1===N(e))throw new TypeError("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(!0===j(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");tt(this,e),this._readRequests=[]}return n(t,[{key:"cancel",value:function(t){return!1===Z(this)?Promise.reject(Ft("cancel")):void 0===this._ownerReadableStream?Promise.reject(Ot("cancel")):et(this,t)}},{key:"read",value:function(){return!1===Z(this)?Promise.reject(Ft("read")):void 0===this._ownerReadableStream?Promise.reject(Ot("read from")):nt(this)}},{key:"releaseLock",value:function(){if(!1===Z(this))throw Ft("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");rt(this)}}},{key:"closed",get:function(){return!1===Z(this)?Promise.reject(Ft("closed")):this._closedPromise}}]),t}(),J=function(){function t(e){if(i(this,t),!N(e))throw new TypeError("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(!1===pt(e._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(j(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");tt(this,e),this._readIntoRequests=[]}return n(t,[{key:"cancel",value:function(t){return $(this)?void 0===this._ownerReadableStream?Promise.reject(Ot("cancel")):et(this,t):Promise.reject(Mt("cancel"))}},{key:"read",value:function(t){return $(this)?void 0===this._ownerReadableStream?Promise.reject(Ot("read from")):ArrayBuffer.isView(t)?0===t.byteLength?Promise.reject(new TypeError("view must have non-zero byteLength")):function(t,e){var r=t._ownerReadableStream;return _(void 0!==r),r._disturbed=!0,"errored"===r._state?Promise.reject(r._storedError):function(t,e){var r=t._controlledReadableStream,n=1;e.constructor!==DataView&&(n=e.constructor.BYTES_PER_ELEMENT);var i=e.constructor,o={buffer:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength,bytesFilled:0,elementSize:n,ctor:i,readerType:"byob"};if(t._pendingPullIntos.length>0)return o.buffer=h(o.buffer),t._pendingPullIntos.push(o),G(r);if("closed"===r._state){var a=new e.constructor(o.buffer,o.byteOffset,0);return Promise.resolve(s(a,!0))}if(t._queueTotalSize>0){if(!0===wt(t,o)){var l=_t(o);return At(t),Promise.resolve(s(l,!1))}if(!0===t._closeRequested){var c=new TypeError("Insufficient bytes to fill elements in the given buffer");return Rt(t,c),Promise.reject(c)}}o.buffer=h(o.buffer),t._pendingPullIntos.push(o);var u=G(r);return vt(t),u}(r._readableStreamController,e)}(this,t):Promise.reject(new TypeError("view must be an array buffer view")):Promise.reject(Mt("read"))}},{key:"releaseLock",value:function(){if(!$(this))throw Mt("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");rt(this)}}},{key:"closed",get:function(){return $(this)?this._closedPromise:Promise.reject(Mt("closed"))}}]),t}();function $(t){return!!y(t)&&!!Object.prototype.hasOwnProperty.call(t,"_readIntoRequests")}function Z(t){return!!y(t)&&!!Object.prototype.hasOwnProperty.call(t,"_readRequests")}function tt(t,e){t._ownerReadableStream=e,e._reader=t,"readable"===e._state?function(t){t._closedPromise=new Promise((function(e,r){t._closedPromise_resolve=e,t._closedPromise_reject=r}))}(t):"closed"===e._state?function(t){t._closedPromise=Promise.resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0}(t):(_("errored"===e._state,"state must be errored"),function(t,e){t._closedPromise=Promise.reject(e),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0}(t,e._storedError),t._closedPromise.catch((function(){})))}function et(t,e){var r=t._ownerReadableStream;return _(void 0!==r),B(r,e)}function rt(t){_(void 0!==t._ownerReadableStream),_(t._ownerReadableStream._reader===t),"readable"===t._ownerReadableStream._state?It(t,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):function(t,e){_(void 0===t._closedPromise_resolve),_(void 0===t._closedPromise_reject),t._closedPromise=Promise.reject(e)}(t,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),t._closedPromise.catch((function(){})),t._ownerReadableStream._reader=void 0,t._ownerReadableStream=void 0}function nt(t){var e=t._ownerReadableStream;return _(void 0!==e),e._disturbed=!0,"closed"===e._state?Promise.resolve(s(void 0,!0)):"errored"===e._state?Promise.reject(e._storedError):(_("readable"===e._state),e._readableStreamController.__pullSteps())}var it=function(){function t(e,r,n,o){if(i(this,t),!1===N(e))throw new TypeError("ReadableStreamDefaultController can only be constructed with a ReadableStream instance");if(void 0!==e._readableStreamController)throw new TypeError("ReadableStreamDefaultController instances can only be created by the ReadableStream constructor");this._controlledReadableStream=e,this._underlyingSource=r,this._queue=void 0,this._queueTotalSize=void 0,k(this),this._started=!1,this._closeRequested=!1,this._pullAgain=!1,this._pulling=!1;var a=d(n,o);this._strategySize=a.size,this._strategyHWM=a.highWaterMark;var s=this,l=c(r,"start",[this]);Promise.resolve(l).then((function(){s._started=!0,_(!1===s._pulling),_(!1===s._pullAgain),at(s)}),(function(t){ut(s,t)})).catch(b)}return n(t,[{key:"close",value:function(){if(!1===ot(this))throw Lt("close");if(!0===this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var t=this._controlledReadableStream._state;if("readable"!==t)throw new TypeError("The stream (in "+t+" state) is not in the readable state and cannot be closed");st(this)}},{key:"enqueue",value:function(t){if(!1===ot(this))throw Lt("enqueue");if(!0===this._closeRequested)throw new TypeError("stream is closed or draining");var e=this._controlledReadableStream._state;if("readable"!==e)throw new TypeError("The stream (in "+e+" state) is not in the readable state and cannot be enqueued to");return lt(this,t)}},{key:"error",value:function(t){if(!1===ot(this))throw Lt("error");var e=this._controlledReadableStream;if("readable"!==e._state)throw new TypeError("The stream is "+e._state+" and so cannot be errored");ct(this,t)}},{key:"__cancelSteps",value:function(t){return k(this),u(this._underlyingSource,"cancel",[t])}},{key:"__pullSteps",value:function(){var t=this._controlledReadableStream;if(this._queue.length>0){var e=S(this);return!0===this._closeRequested&&0===this._queue.length?W(t):at(this),Promise.resolve(s(e,!1))}var r=q(t);return at(this),r}},{key:"desiredSize",get:function(){if(!1===ot(this))throw Lt("desiredSize");return ht(this)}}]),t}();function ot(t){return!!y(t)&&!!Object.prototype.hasOwnProperty.call(t,"_underlyingSource")}function at(t){!1!==function(t){var e=t._controlledReadableStream;return"closed"!==e._state&&"errored"!==e._state&&(!0!==t._closeRequested&&(!1!==t._started&&(!0===j(e)&&V(e)>0||ht(t)>0)))}(t)&&(!0!==t._pulling?(_(!1===t._pullAgain),t._pulling=!0,u(t._underlyingSource,"pull",[t]).then((function(){if(t._pulling=!1,!0===t._pullAgain)return t._pullAgain=!1,at(t)}),(function(e){ut(t,e)})).catch(b)):t._pullAgain=!0)}function st(t){var e=t._controlledReadableStream;_(!1===t._closeRequested),_("readable"===e._state),t._closeRequested=!0,0===t._queue.length&&W(e)}function lt(t,e){var r=t._controlledReadableStream;if(_(!1===t._closeRequested),_("readable"===r._state),!0===j(r)&&V(r)>0)H(r,e,!1);else{var n=1;if(void 0!==t._strategySize){var i=t._strategySize;try{n=i(e)}catch(e){throw ut(t,e),e}}try{A(t,e,n)}catch(e){throw ut(t,e),e}}at(t)}function ct(t,e){var r=t._controlledReadableStream;_("readable"===r._state),k(t),z(r,e)}function ut(t,e){"readable"===t._controlledReadableStream._state&&ct(t,e)}function ht(t){var e=t._controlledReadableStream._state;return"errored"===e?null:"closed"===e?0:t._strategyHWM-t._queueTotalSize}var dt=function(){function t(e,r){i(this,t),this._associatedReadableByteStreamController=e,this._view=r}return n(t,[{key:"respond",value:function(t){if(!1===gt(this))throw Dt("respond");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");!function(t,e){if(e=Number(e),!1===l(e))throw new RangeError("bytesWritten must be a finite");_(t._pendingPullIntos.length>0),Ct(t,e)}(this._associatedReadableByteStreamController,t)}},{key:"respondWithNewView",value:function(t){if(!1===gt(this))throw Dt("respond");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");if(!ArrayBuffer.isView(t))throw new TypeError("You can only respond with array buffer views");!function(t,e){_(t._pendingPullIntos.length>0);var r=t._pendingPullIntos[0];if(r.byteOffset+r.bytesFilled!==e.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(r.byteLength!==e.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");r.buffer=e.buffer,Ct(t,e.byteLength)}(this._associatedReadableByteStreamController,t)}},{key:"view",get:function(){return this._view}}]),t}(),ft=function(){function t(e,r,n){if(i(this,t),!1===N(e))throw new TypeError("ReadableByteStreamController can only be constructed with a ReadableStream instance given a byte source");if(void 0!==e._readableStreamController)throw new TypeError("ReadableByteStreamController instances can only be created by the ReadableStream constructor given a byte source");this._controlledReadableStream=e,this._underlyingByteSource=r,this._pullAgain=!1,this._pulling=!1,yt(this),this._queue=this._queueTotalSize=void 0,k(this),this._closeRequested=!1,this._started=!1,this._strategyHWM=f(n);var o=r.autoAllocateChunkSize;if(void 0!==o&&(!1===Number.isInteger(o)||o<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");this._autoAllocateChunkSize=o,this._pendingPullIntos=[];var a=this,s=c(r,"start",[this]);Promise.resolve(s).then((function(){a._started=!0,_(!1===a._pulling),_(!1===a._pullAgain),vt(a)}),(function(t){"readable"===e._state&&Rt(a,t)})).catch(b)}return n(t,[{key:"close",value:function(){if(!1===pt(this))throw Nt("close");if(!0===this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var t=this._controlledReadableStream._state;if("readable"!==t)throw new TypeError("The stream (in "+t+" state) is not in the readable state and cannot be closed");!function(t){var e=t._controlledReadableStream;if(_(!1===t._closeRequested),_("readable"===e._state),t._queueTotalSize>0)t._closeRequested=!0;else{if(t._pendingPullIntos.length>0&&t._pendingPullIntos[0].bytesFilled>0){var r=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Rt(t,r),r}W(e)}}(this)}},{key:"enqueue",value:function(t){if(!1===pt(this))throw Nt("enqueue");if(!0===this._closeRequested)throw new TypeError("stream is closed or draining");var e=this._controlledReadableStream._state;if("readable"!==e)throw new TypeError("The stream (in "+e+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(t))throw new TypeError("You can only enqueue array buffer views when using a ReadableByteStreamController");!function(t,e){var r=t._controlledReadableStream;_(!1===t._closeRequested),_("readable"===r._state);var n=e.buffer,i=e.byteOffset,o=e.byteLength,a=h(n);if(!0===K(r))if(0===V(r))bt(t,a,i,o);else{_(0===t._queue.length);var s=new Uint8Array(a,i,o);H(r,s,!1)}else!0===X(r)?(bt(t,a,i,o),xt(t)):(_(!1===j(r),"stream must not be locked"),bt(t,a,i,o))}(this,t)}},{key:"error",value:function(t){if(!1===pt(this))throw Nt("error");var e=this._controlledReadableStream;if("readable"!==e._state)throw new TypeError("The stream is "+e._state+" and so cannot be errored");Rt(this,t)}},{key:"__cancelSteps",value:function(t){return this._pendingPullIntos.length>0&&(this._pendingPullIntos[0].bytesFilled=0),k(this),u(this._underlyingByteSource,"cancel",[t])}},{key:"__pullSteps",value:function(){var t=this._controlledReadableStream;if(_(!0===K(t)),this._queueTotalSize>0){_(0===V(t));var e=this._queue.shift();this._queueTotalSize-=e.byteLength,At(this);var r=void 0;try{r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}catch(t){return Promise.reject(t)}return Promise.resolve(s(r,!1))}var n=this._autoAllocateChunkSize;if(void 0!==n){var i=void 0;try{i=new ArrayBuffer(n)}catch(t){return Promise.reject(t)}var o={buffer:i,byteOffset:0,byteLength:n,bytesFilled:0,elementSize:1,ctor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(o)}var a=q(t);return vt(this),a}},{key:"byobRequest",get:function(){if(!1===pt(this))throw Nt("byobRequest");if(void 0===this._byobRequest&&this._pendingPullIntos.length>0){var t=this._pendingPullIntos[0],e=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled);this._byobRequest=new dt(this,e)}return this._byobRequest}},{key:"desiredSize",get:function(){if(!1===pt(this))throw Nt("desiredSize");return Tt(this)}}]),t}();function pt(t){return!!y(t)&&!!Object.prototype.hasOwnProperty.call(t,"_underlyingByteSource")}function gt(t){return!!y(t)&&!!Object.prototype.hasOwnProperty.call(t,"_associatedReadableByteStreamController")}function vt(t){!1!==function(t){var e=t._controlledReadableStream;return"readable"===e._state&&(!0!==t._closeRequested&&(!1!==t._started&&(!0===K(e)&&V(e)>0||(!0===X(e)&&Y(e)>0||Tt(t)>0))))}(t)&&(!0!==t._pulling?(_(!1===t._pullAgain),t._pulling=!0,u(t._underlyingByteSource,"pull",[t]).then((function(){t._pulling=!1,!0===t._pullAgain&&(t._pullAgain=!1,vt(t))}),(function(e){"readable"===t._controlledReadableStream._state&&Rt(t,e)})).catch(b)):t._pullAgain=!0)}function yt(t){kt(t),t._pendingPullIntos=[]}function mt(t,e){_("errored"!==t._state,"state must not be errored");var r=!1;"closed"===t._state&&(_(0===e.bytesFilled),r=!0);var n=_t(e);"default"===e.readerType?H(t,n,r):(_("byob"===e.readerType),function(t,e,r){var n=t._reader;_(n._readIntoRequests.length>0),n._readIntoRequests.shift()._resolve(s(e,r))}(t,n,r))}function _t(t){var e=t.bytesFilled,r=t.elementSize;return _(e<=t.byteLength),_(e%r==0),new t.ctor(t.buffer,t.byteOffset,e/r)}function bt(t,e,r,n){t._queue.push({buffer:e,byteOffset:r,byteLength:n}),t._queueTotalSize+=n}function wt(t,e){var r=e.elementSize,n=e.bytesFilled-e.bytesFilled%r,i=Math.min(t._queueTotalSize,e.byteLength-e.bytesFilled),o=e.bytesFilled+i,s=o-o%r,l=i,c=!1;s>n&&(l=s-e.bytesFilled,c=!0);for(var u=t._queue;l>0;){var h=u[0],d=Math.min(l,h.byteLength),f=e.byteOffset+e.bytesFilled;a(e.buffer,f,h.buffer,h.byteOffset,d),h.byteLength===d?u.shift():(h.byteOffset+=d,h.byteLength-=d),t._queueTotalSize-=d,St(t,d,e),l-=d}return!1===c&&(_(0===t._queueTotalSize,"queue must be empty"),_(e.bytesFilled>0),_(e.bytesFilled<e.elementSize)),c}function St(t,e,r){_(0===t._pendingPullIntos.length||t._pendingPullIntos[0]===r),kt(t),r.bytesFilled+=e}function At(t){_("readable"===t._controlledReadableStream._state),0===t._queueTotalSize&&!0===t._closeRequested?W(t._controlledReadableStream):vt(t)}function kt(t){void 0!==t._byobRequest&&(t._byobRequest._associatedReadableByteStreamController=void 0,t._byobRequest._view=void 0,t._byobRequest=void 0)}function xt(t){for(_(!1===t._closeRequested);t._pendingPullIntos.length>0;){if(0===t._queueTotalSize)return;var e=t._pendingPullIntos[0];!0===wt(t,e)&&(Pt(t),mt(t._controlledReadableStream,e))}}function Ct(t,e){var r=t._pendingPullIntos[0],n=t._controlledReadableStream;if("closed"===n._state){if(0!==e)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream");!function(t,e){e.buffer=h(e.buffer),_(0===e.bytesFilled,"bytesFilled must be 0");var r=t._controlledReadableStream;if(!0===X(r))for(;Y(r)>0;)mt(r,Pt(t))}(t,r)}else _("readable"===n._state),function(t,e,r){if(r.bytesFilled+e>r.byteLength)throw new RangeError("bytesWritten out of range");if(St(t,e,r),!(r.bytesFilled<r.elementSize)){Pt(t);var n=r.bytesFilled%r.elementSize;if(n>0){var i=r.byteOffset+r.bytesFilled,o=r.buffer.slice(i-n,i);bt(t,o,0,o.byteLength)}r.buffer=h(r.buffer),r.bytesFilled-=n,mt(t._controlledReadableStream,r),xt(t)}}(t,e,r)}function Pt(t){var e=t._pendingPullIntos.shift();return kt(t),e}function Rt(t,e){var r=t._controlledReadableStream;_("readable"===r._state),yt(t),k(t),z(r,e)}function Tt(t){var e=t._controlledReadableStream._state;return"errored"===e?null:"closed"===e?0:t._strategyHWM-t._queueTotalSize}function Et(t){return new TypeError("ReadableStream.prototype."+t+" can only be used on a ReadableStream")}function Ot(t){return new TypeError("Cannot "+t+" a stream using a released reader")}function Ft(t){return new TypeError("ReadableStreamDefaultReader.prototype."+t+" can only be used on a ReadableStreamDefaultReader")}function It(t,e){_(void 0!==t._closedPromise_resolve),_(void 0!==t._closedPromise_reject),t._closedPromise_reject(e),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0}function Mt(t){return new TypeError("ReadableStreamBYOBReader.prototype."+t+" can only be used on a ReadableStreamBYOBReader")}function Lt(t){return new TypeError("ReadableStreamDefaultController.prototype."+t+" can only be used on a ReadableStreamDefaultController")}function Dt(t){return new TypeError("ReadableStreamBYOBRequest.prototype."+t+" can only be used on a ReadableStreamBYOBRequest")}function Nt(t){return new TypeError("ReadableByteStreamController.prototype."+t+" can only be used on a ReadableByteStreamController")}},function(t,e,r){var n=r(6),i=r(4),o=r(2);e.TransformStream=n.TransformStream,e.ReadableStream=i.ReadableStream,e.IsReadableStreamDisturbed=i.IsReadableStreamDisturbed,e.ReadableStreamDefaultControllerClose=i.ReadableStreamDefaultControllerClose,e.ReadableStreamDefaultControllerEnqueue=i.ReadableStreamDefaultControllerEnqueue,e.ReadableStreamDefaultControllerError=i.ReadableStreamDefaultControllerError,e.ReadableStreamDefaultControllerGetDesiredSize=i.ReadableStreamDefaultControllerGetDesiredSize,e.AcquireWritableStreamDefaultWriter=o.AcquireWritableStreamDefaultWriter,e.IsWritableStream=o.IsWritableStream,e.IsWritableStreamLocked=o.IsWritableStreamLocked,e.WritableStream=o.WritableStream,e.WritableStreamAbort=o.WritableStreamAbort,e.WritableStreamDefaultControllerError=o.WritableStreamDefaultControllerError,e.WritableStreamDefaultWriterCloseWithErrorPropagation=o.WritableStreamDefaultWriterCloseWithErrorPropagation,e.WritableStreamDefaultWriterRelease=o.WritableStreamDefaultWriterRelease,e.WritableStreamDefaultWriterWrite=o.WritableStreamDefaultWriterWrite},function(t,e,r){var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=r(1).assert,a=r(0),s=a.InvokeOrNoop,l=a.PromiseInvokeOrPerformFallback,c=a.PromiseInvokeOrNoop,u=a.typeIsObject,h=r(4),d=h.ReadableStream,f=h.ReadableStreamDefaultControllerClose,p=h.ReadableStreamDefaultControllerEnqueue,g=h.ReadableStreamDefaultControllerError,v=h.ReadableStreamDefaultControllerGetDesiredSize,y=r(2),m=y.WritableStream,_=y.WritableStreamDefaultControllerError;function b(t,e){if(!0===t._errored)throw new TypeError("TransformStream is already errored");if(!0===t._readableClosed)throw new TypeError("Readable side is already closed");var r=t._readableController;try{p(r,e)}catch(e){throw t._readableClosed=!0,S(t,e),t._storedError}!0==v(r)<=0&&!1===t._backpressure&&x(t,!0)}function w(t){o(!1===t._errored),o(!1===t._readableClosed);try{f(t._readableController)}catch(t){o(!1)}t._readableClosed=!0}function S(t,e){!1===t._errored&&A(t,e)}function A(t,e){o(!1===t._errored),t._errored=!0,t._storedError=e,!1===t._writableDone&&_(t._writableController,e),!1===t._readableClosed&&g(t._readableController,e)}function k(t){return o(void 0!==t._backpressureChangePromise,"_backpressureChangePromise should have been initialized"),!1===t._backpressure?Promise.resolve():(o(!0===t._backpressure,"_backpressure should have been initialized"),t._backpressureChangePromise)}function x(t,e){o(t._backpressure!==e,"TransformStreamSetBackpressure() should be called only when backpressure is changed"),void 0!==t._backpressureChangePromise&&t._backpressureChangePromise_resolve(e),t._backpressureChangePromise=new Promise((function(e){t._backpressureChangePromise_resolve=e})),t._backpressureChangePromise.then((function(t){o(t!==e,"_backpressureChangePromise should be fulfilled only when backpressure is changed")})),t._backpressure=e}function C(t,e){return b(e._controlledTransformStream,t),Promise.resolve()}function P(t){return!!u(t)&&!!Object.prototype.hasOwnProperty.call(t,"_controlledTransformStream")}function R(t){return!!u(t)&&!!Object.prototype.hasOwnProperty.call(t,"_transformStreamController")}var T=function(){function t(e,r){i(this,t),this._transformStream=e,this._startPromise=r}return n(t,[{key:"start",value:function(t){var e=this._transformStream;return e._writableController=t,this._startPromise.then((function(){return k(e)}))}},{key:"write",value:function(t){return function(t,e){o(!1===t._errored),o(!1===t._transforming),o(!1===t._backpressure),t._transforming=!0;var r=t._transformer,n=t._transformStreamController;return l(r,"transform",[e,n],C,[e,n]).then((function(){return t._transforming=!1,k(t)}),(function(e){return S(t,e),Promise.reject(e)}))}(this._transformStream,t)}},{key:"abort",value:function(){var t=this._transformStream;t._writableDone=!0,A(t,new TypeError("Writable side aborted"))}},{key:"close",value:function(){var t=this._transformStream;return o(!1===t._transforming),t._writableDone=!0,c(t._transformer,"flush",[t._transformStreamController]).then((function(){return!0===t._errored?Promise.reject(t._storedError):(!1===t._readableClosed&&w(t),Promise.resolve())})).catch((function(e){return S(t,e),Promise.reject(t._storedError)}))}}]),t}(),E=function(){function t(e,r){i(this,t),this._transformStream=e,this._startPromise=r}return n(t,[{key:"start",value:function(t){var e=this._transformStream;return e._readableController=t,this._startPromise.then((function(){return o(void 0!==e._backpressureChangePromise,"_backpressureChangePromise should have been initialized"),!0===e._backpressure?Promise.resolve():(o(!1===e._backpressure,"_backpressure should have been initialized"),e._backpressureChangePromise)}))}},{key:"pull",value:function(){var t=this._transformStream;return o(!0===t._backpressure,"pull() should be never called while _backpressure is false"),o(void 0!==t._backpressureChangePromise,"_backpressureChangePromise should have been initialized"),x(t,!1),t._backpressureChangePromise}},{key:"cancel",value:function(){var t=this._transformStream;t._readableClosed=!0,A(t,new TypeError("Readable side canceled"))}}]),t}(),O=function(){function t(e){if(i(this,t),!1===R(e))throw new TypeError("TransformStreamDefaultController can only be constructed with a TransformStream instance");if(void 0!==e._transformStreamController)throw new TypeError("TransformStreamDefaultController instances can only be created by the TransformStream constructor");this._controlledTransformStream=e}return n(t,[{key:"enqueue",value:function(t){if(!1===P(this))throw I("enqueue");b(this._controlledTransformStream,t)}},{key:"close",value:function(){if(!1===P(this))throw I("close");!function(t){if(!0===t._errored)throw new TypeError("TransformStream is already errored");if(!0===t._readableClosed)throw new TypeError("Readable side is already closed");w(t)}(this._controlledTransformStream)}},{key:"error",value:function(t){if(!1===P(this))throw I("error");!function(t,e){if(!0===t._errored)throw new TypeError("TransformStream is already errored");A(t,e)}(this._controlledTransformStream,t)}},{key:"desiredSize",get:function(){if(!1===P(this))throw I("desiredSize");var t=this._controlledTransformStream._readableController;return v(t)}}]),t}(),F=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t),this._transformer=e;var r=e.readableStrategy,n=e.writableStrategy;this._transforming=!1,this._errored=!1,this._storedError=void 0,this._writableController=void 0,this._readableController=void 0,this._transformStreamController=void 0,this._writableDone=!1,this._readableClosed=!1,this._backpressure=void 0,this._backpressureChangePromise=void 0,this._backpressureChangePromise_resolve=void 0,this._transformStreamController=new O(this);var a=void 0,l=new Promise((function(t){a=t})),c=new E(this,l);this._readable=new d(c,r);var u=new T(this,l);this._writable=new m(u,n),o(void 0!==this._writableController),o(void 0!==this._readableController);var h=v(this._readableController);x(this,h<=0);var f=this,p=s(e,"start",[f._transformStreamController]);a(p),l.catch((function(t){!1===f._errored&&(f._errored=!0,f._storedError=t)}))}return n(t,[{key:"readable",get:function(){if(!1===R(this))throw M("readable");return this._readable}},{key:"writable",get:function(){if(!1===R(this))throw M("writable");return this._writable}}]),t}();function I(t){return new TypeError("TransformStreamDefaultController.prototype."+t+" can only be used on a TransformStreamDefaultController")}function M(t){return new TypeError("TransformStream.prototype."+t+" can only be used on a TransformStream")}t.exports={TransformStream:F}},function(t,e,r){t.exports=r(5)}]))},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=!1;try{if("function"==typeof URL&&"object"===n(URL.prototype)&&"origin"in URL.prototype){var o=new URL("b","http://a");o.pathname="c%20d",i="http://a/c%20d"===o.href}}catch(t){}if(i)e.URL=URL;else{var a=r(146).URL,s=r(3).URL;s&&(a.createObjectURL=function(t){return s.createObjectURL.apply(s,arguments)},a.revokeObjectURL=function(t){s.revokeObjectURL(t)}),e.URL=a}},function(t,e,r){"use strict";!function(){var t=Object.create(null);t.ftp=21,t.file=0,t.gopher=70,t.http=80,t.https=443,t.ws=80,t.wss=443;var r=Object.create(null);function n(e){return void 0!==t[e]}function i(){d.call(this),this._isInvalid=!0}function o(t){return""===t&&i.call(this),t.toLowerCase()}function a(t){var e=t.charCodeAt(0);return e>32&&e<127&&-1===[34,35,60,62,63,96].indexOf(e)?t:encodeURIComponent(t)}function s(t){var e=t.charCodeAt(0);return e>32&&e<127&&-1===[34,35,60,62,96].indexOf(e)?t:encodeURIComponent(t)}r["%2e"]=".",r[".%2e"]="..",r["%2e."]="..",r["%2e%2e"]="..";var l,c=/[a-zA-Z]/,u=/[a-zA-Z0-9\+\-\.]/;function h(e,h,d){function f(t){_.push(t)}var p=h||"scheme start",g=0,v="",y=!1,m=!1,_=[];t:for(;(e[g-1]!==l||0===g)&&!this._isInvalid;){var b=e[g];switch(p){case"scheme start":if(!b||!c.test(b)){if(h){f("Invalid scheme.");break t}v="",p="no scheme";continue}v+=b.toLowerCase(),p="scheme";break;case"scheme":if(b&&u.test(b))v+=b.toLowerCase();else{if(":"!==b){if(h){if(b===l)break t;f("Code point not allowed in scheme: "+b);break t}v="",g=0,p="no scheme";continue}if(this._scheme=v,v="",h)break t;n(this._scheme)&&(this._isRelative=!0),p="file"===this._scheme?"relative":this._isRelative&&d&&d._scheme===this._scheme?"relative or authority":this._isRelative?"authority first slash":"scheme data"}break;case"scheme data":"?"===b?(this._query="?",p="query"):"#"===b?(this._fragment="#",p="fragment"):b!==l&&"\t"!==b&&"\n"!==b&&"\r"!==b&&(this._schemeData+=a(b));break;case"no scheme":if(d&&n(d._scheme)){p="relative";continue}f("Missing scheme."),i.call(this);break;case"relative or authority":if("/"!==b||"/"!==e[g+1]){f("Expected /, got: "+b),p="relative";continue}p="authority ignore slashes";break;case"relative":if(this._isRelative=!0,"file"!==this._scheme&&(this._scheme=d._scheme),b===l){this._host=d._host,this._port=d._port,this._path=d._path.slice(),this._query=d._query,this._username=d._username,this._password=d._password;break t}if("/"===b||"\\"===b)"\\"===b&&f("\\ is an invalid code point."),p="relative slash";else if("?"===b)this._host=d._host,this._port=d._port,this._path=d._path.slice(),this._query="?",this._username=d._username,this._password=d._password,p="query";else{if("#"!==b){var w=e[g+1],S=e[g+2];("file"!==this._scheme||!c.test(b)||":"!==w&&"|"!==w||S!==l&&"/"!==S&&"\\"!==S&&"?"!==S&&"#"!==S)&&(this._host=d._host,this._port=d._port,this._username=d._username,this._password=d._password,this._path=d._path.slice(),this._path.pop()),p="relative path";continue}this._host=d._host,this._port=d._port,this._path=d._path.slice(),this._query=d._query,this._fragment="#",this._username=d._username,this._password=d._password,p="fragment"}break;case"relative slash":if("/"!==b&&"\\"!==b){"file"!==this._scheme&&(this._host=d._host,this._port=d._port,this._username=d._username,this._password=d._password),p="relative path";continue}"\\"===b&&f("\\ is an invalid code point."),p="file"===this._scheme?"file host":"authority ignore slashes";break;case"authority first slash":if("/"!==b){f("Expected '/', got: "+b),p="authority ignore slashes";continue}p="authority second slash";break;case"authority second slash":if(p="authority ignore slashes","/"!==b){f("Expected '/', got: "+b);continue}break;case"authority ignore slashes":if("/"!==b&&"\\"!==b){p="authority";continue}f("Expected authority, got: "+b);break;case"authority":if("@"===b){y&&(f("@ already seen."),v+="%40"),y=!0;for(var A=0;A<v.length;A++){var k=v[A];if("\t"!==k&&"\n"!==k&&"\r"!==k)if(":"!==k||null!==this._password){var x=a(k);null!==this._password?this._password+=x:this._username+=x}else this._password="";else f("Invalid whitespace in authority.")}v=""}else{if(b===l||"/"===b||"\\"===b||"?"===b||"#"===b){g-=v.length,v="",p="host";continue}v+=b}break;case"file host":if(b===l||"/"===b||"\\"===b||"?"===b||"#"===b){2!==v.length||!c.test(v[0])||":"!==v[1]&&"|"!==v[1]?0===v.length?p="relative path start":(this._host=o.call(this,v),v="",p="relative path start"):p="relative path";continue}"\t"===b||"\n"===b||"\r"===b?f("Invalid whitespace in file host."):v+=b;break;case"host":case"hostname":if(":"!==b||m){if(b===l||"/"===b||"\\"===b||"?"===b||"#"===b){if(this._host=o.call(this,v),v="",p="relative path start",h)break t;continue}"\t"!==b&&"\n"!==b&&"\r"!==b?("["===b?m=!0:"]"===b&&(m=!1),v+=b):f("Invalid code point in host/hostname: "+b)}else if(this._host=o.call(this,v),v="",p="port","hostname"===h)break t;break;case"port":if(/[0-9]/.test(b))v+=b;else{if(b===l||"/"===b||"\\"===b||"?"===b||"#"===b||h){if(""!==v){var C=parseInt(v,10);C!==t[this._scheme]&&(this._port=C+""),v=""}if(h)break t;p="relative path start";continue}"\t"===b||"\n"===b||"\r"===b?f("Invalid code point in port: "+b):i.call(this)}break;case"relative path start":if("\\"===b&&f("'\\' not allowed in path."),p="relative path","/"!==b&&"\\"!==b)continue;break;case"relative path":var P;b!==l&&"/"!==b&&"\\"!==b&&(h||"?"!==b&&"#"!==b)?"\t"!==b&&"\n"!==b&&"\r"!==b&&(v+=a(b)):("\\"===b&&f("\\ not allowed in relative path."),(P=r[v.toLowerCase()])&&(v=P),".."===v?(this._path.pop(),"/"!==b&&"\\"!==b&&this._path.push("")):"."===v&&"/"!==b&&"\\"!==b?this._path.push(""):"."!==v&&("file"===this._scheme&&0===this._path.length&&2===v.length&&c.test(v[0])&&"|"===v[1]&&(v=v[0]+":"),this._path.push(v)),v="","?"===b?(this._query="?",p="query"):"#"===b&&(this._fragment="#",p="fragment"));break;case"query":h||"#"!==b?b!==l&&"\t"!==b&&"\n"!==b&&"\r"!==b&&(this._query+=s(b)):(this._fragment="#",p="fragment");break;case"fragment":b!==l&&"\t"!==b&&"\n"!==b&&"\r"!==b&&(this._fragment+=b)}g++}}function d(){this._scheme="",this._schemeData="",this._username="",this._password=null,this._host="",this._port="",this._path=[],this._query="",this._fragment="",this._isInvalid=!1,this._isRelative=!1}function f(t,e){void 0===e||e instanceof f||(e=new f(String(e))),this._url=t,d.call(this);var r=t.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,"");h.call(this,r,null,e)}f.prototype={toString:function(){return this.href},get href(){if(this._isInvalid)return this._url;var t="";return""===this._username&&null===this._password||(t=this._username+(null!==this._password?":"+this._password:"")+"@"),this.protocol+(this._isRelative?"//"+t+this.host:"")+this.pathname+this._query+this._fragment},set href(t){d.call(this),h.call(this,t)},get protocol(){return this._scheme+":"},set protocol(t){this._isInvalid||h.call(this,t+":","scheme start")},get host(){return this._isInvalid?"":this._port?this._host+":"+this._port:this._host},set host(t){!this._isInvalid&&this._isRelative&&h.call(this,t,"host")},get hostname(){return this._host},set hostname(t){!this._isInvalid&&this._isRelative&&h.call(this,t,"hostname")},get port(){return this._port},set port(t){!this._isInvalid&&this._isRelative&&h.call(this,t,"port")},get pathname(){return this._isInvalid?"":this._isRelative?"/"+this._path.join("/"):this._schemeData},set pathname(t){!this._isInvalid&&this._isRelative&&(this._path=[],h.call(this,t,"relative path start"))},get search(){return this._isInvalid||!this._query||"?"===this._query?"":this._query},set search(t){!this._isInvalid&&this._isRelative&&(this._query="?","?"===t[0]&&(t=t.slice(1)),h.call(this,t,"query"))},get hash(){return this._isInvalid||!this._fragment||"#"===this._fragment?"":this._fragment},set hash(t){this._isInvalid||(this._fragment="#","#"===t[0]&&(t=t.slice(1)),h.call(this,t,"fragment"))},get origin(){var t;if(this._isInvalid||!this._scheme)return"";switch(this._scheme){case"data":case"file":case"javascript":case"mailto":return"null";case"blob":try{return new f(this._schemeData).origin||"null"}catch(t){}return"null"}return(t=this.host)?this._scheme+"://"+t:""}},e.URL=f}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getDocument=function(t){var e,r=new F;if("string"==typeof t)e={url:t};else if((0,o.isArrayBuffer)(t))e={data:t};else if(t instanceof I)e={range:t};else{if("object"!==A(t))throw new Error("Invalid parameter in getDocument, need either Uint8Array, string or a parameter object");if(!t.url&&!t.data&&!t.range)throw new Error("Invalid parameter object: need either .data, .range or .url");e=t}var n=Object.create(null),i=null,s=null;for(var c in e)if("url"!==c||"undefined"==typeof window)if("range"!==c)if("worker"!==c)if("data"!==c||e[c]instanceof Uint8Array)n[c]=e[c];else{var u=e[c];if("string"==typeof u)n[c]=(0,o.stringToBytes)(u);else if("object"!==A(u)||null===u||isNaN(u.length)){if(!(0,o.isArrayBuffer)(u))throw new Error("Invalid PDF binary data: either typed array, string or array-like object is expected in the data property.");n[c]=new Uint8Array(u)}else n[c]=new Uint8Array(u)}else s=e[c];else i=e[c];else n[c]=new o.URL(e[c],window.location).href;n.rangeChunkSize=n.rangeChunkSize||65536,n.CMapReaderFactory=n.CMapReaderFactory||a.DOMCMapReaderFactory,n.ignoreErrors=!0!==n.stopAtErrors,n.pdfBug=!0===n.pdfBug;var f=Object.values(o.NativeImageDecoding);if(void 0!==n.nativeImageDecoderSupport&&f.includes(n.nativeImageDecoderSupport)||(n.nativeImageDecoderSupport=l.apiCompatibilityParams.nativeImageDecoderSupport||o.NativeImageDecoding.DECODE),Number.isInteger(n.maxImageSize)||(n.maxImageSize=-1),"boolean"!=typeof n.isEvalSupported&&(n.isEvalSupported=!0),"boolean"!=typeof n.disableFontFace&&(n.disableFontFace=l.apiCompatibilityParams.disableFontFace||!1),"boolean"!=typeof n.disableRange&&(n.disableRange=!1),"boolean"!=typeof n.disableStream&&(n.disableStream=!1),"boolean"!=typeof n.disableAutoFetch&&(n.disableAutoFetch=!1),"boolean"!=typeof n.disableCreateObjectURL&&(n.disableCreateObjectURL=l.apiCompatibilityParams.disableCreateObjectURL||!1),(0,o.setVerbosityLevel)(n.verbosity),!s){var g={postMessageTransfers:n.postMessageTransfers,verbosity:n.verbosity,port:h.GlobalWorkerOptions.workerPort};s=g.port?N.fromPort(g):new N(g),r._worker=s}var v=r.docId;return s.promise.then((function(){if(r.destroyed)throw new Error("Loading aborted");return function(t,e,r,n){return t.destroyed?Promise.reject(new Error("Worker was destroyed")):(r&&(e.length=r.length,e.initialData=r.initialData,e.progressiveDone=r.progressiveDone),t.messageHandler.sendWithPromise("GetDocRequest",{docId:n,apiVersion:"2.2.228",source:{data:e.data,url:e.url,password:e.password,disableAutoFetch:e.disableAutoFetch,rangeChunkSize:e.rangeChunkSize,length:e.length},maxImageSize:e.maxImageSize,disableFontFace:e.disableFontFace,disableCreateObjectURL:e.disableCreateObjectURL,postMessageTransfers:t.postMessageTransfers,docBaseUrl:e.docBaseUrl,nativeImageDecoderSupport:e.nativeImageDecoderSupport,ignoreErrors:e.ignoreErrors,isEvalSupported:e.isEvalSupported}).then((function(e){if(t.destroyed)throw new Error("Worker was destroyed");return e})))}(s,n,i,v).then((function(t){if(r.destroyed)throw new Error("Loading aborted");var e;i?e=new p.PDFDataTransportStream({length:n.length,initialData:n.initialData,progressiveDone:n.progressiveDone,disableRange:n.disableRange,disableStream:n.disableStream},i):n.data||(e=R({url:n.url,length:n.length,httpHeaders:n.httpHeaders,withCredentials:n.withCredentials,rangeChunkSize:n.rangeChunkSize,disableRange:n.disableRange,disableStream:n.disableStream}));var o=new d.MessageHandler(v,t,s.port);o.postMessageTransfers=s.postMessageTransfers;var a=new U(o,r,e,n);r._transport=a,o.send("Ready",null)}))})).catch(r._capability.reject),r},e.setPDFNetworkStreamFactory=function(t){R=t},e.build=e.version=e.PDFPageProxy=e.PDFDocumentProxy=e.PDFWorker=e.PDFDataRangeTransport=e.LoopbackPort=void 0;var i=v(n(148)),o=n(1),a=n(151),s=n(152),l=n(153),c=n(154),u=v(n(3)),h=n(156),d=n(157),f=n(158),p=n(160),g=n(161);function v(t){return t&&t.__esModule?t:{default:t}}function y(t,e,r,n,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,i)}function m(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function S(t,e,r){return e&&w(t.prototype,e),r&&w(t,r),t}function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var k,x,C=!1,P=!1;"undefined"==typeof window?(C=!0,P=!0):P=!0,"undefined"!=typeof requirejs&&requirejs.toUrl&&(k=requirejs.toUrl("pdfjs-dist/build/pdf.worker.js"));var R,T="undefined"!=typeof requirejs&&requirejs.load;if(x=P?function(){return new Promise((function(t,e){r.e(2).then(function(){try{var n;n=r(123),t(n.WorkerMessageHandler)}catch(t){e(t)}}.bind(null,r)).catch(e)}))}:T?function(){return new Promise((function(t,e){requirejs(["pdfjs-dist/build/pdf.worker"],(function(r){try{t(r.WorkerMessageHandler)}catch(t){e(t)}}),e)}))}:null,!k&&"object"===("undefined"==typeof document?"undefined":A(document))&&"currentScript"in document){var E=document.currentScript&&document.currentScript.src;E&&(k=E.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}var O,F=(O=0,function(){function t(){b(this,t),this._capability=(0,o.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+O++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}return S(t,[{key:"destroy",value:function(){var t=this;return this.destroyed=!0,(this._transport?this._transport.destroy():Promise.resolve()).then((function(){t._transport=null,t._worker&&(t._worker.destroy(),t._worker=null)}))}},{key:"then",value:function(t,e){return(0,a.deprecated)("PDFDocumentLoadingTask.then method, use the `promise` getter instead."),this.promise.then.apply(this.promise,arguments)}},{key:"promise",get:function(){return this._capability.promise}}]),t}()),I=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];b(this,t),this.length=e,this.initialData=r,this.progressiveDone=n,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,o.createPromiseCapability)()}return S(t,[{key:"addRangeListener",value:function(t){this._rangeListeners.push(t)}},{key:"addProgressListener",value:function(t){this._progressListeners.push(t)}},{key:"addProgressiveReadListener",value:function(t){this._progressiveReadListeners.push(t)}},{key:"addProgressiveDoneListener",value:function(t){this._progressiveDoneListeners.push(t)}},{key:"onDataRange",value:function(t,e){var r=!0,n=!1,i=void 0;try{for(var o,a=this._rangeListeners[Symbol.iterator]();!(r=(o=a.next()).done);r=!0)(0,o.value)(t,e)}catch(t){n=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}}},{key:"onDataProgress",value:function(t,e){var r=this;this._readyCapability.promise.then((function(){var n=!0,i=!1,o=void 0;try{for(var a,s=r._progressListeners[Symbol.iterator]();!(n=(a=s.next()).done);n=!0)(0,a.value)(t,e)}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}}))}},{key:"onDataProgressiveRead",value:function(t){var e=this;this._readyCapability.promise.then((function(){var r=!0,n=!1,i=void 0;try{for(var o,a=e._progressiveReadListeners[Symbol.iterator]();!(r=(o=a.next()).done);r=!0)(0,o.value)(t)}catch(t){n=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}}))}},{key:"onDataProgressiveDone",value:function(){var t=this;this._readyCapability.promise.then((function(){var e=!0,r=!1,n=void 0;try{for(var i,o=t._progressiveDoneListeners[Symbol.iterator]();!(e=(i=o.next()).done);e=!0)(0,i.value)()}catch(t){r=!0,n=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw n}}}))}},{key:"transportReady",value:function(){this._readyCapability.resolve()}},{key:"requestDataRange",value:function(t,e){(0,o.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}},{key:"abort",value:function(){}}]),t}();e.PDFDataRangeTransport=I;var M=function(){function t(e,r){b(this,t),this._pdfInfo=e,this._transport=r}return S(t,[{key:"getPage",value:function(t){return this._transport.getPage(t)}},{key:"getPageIndex",value:function(t){return this._transport.getPageIndex(t)}},{key:"getDestinations",value:function(){return this._transport.getDestinations()}},{key:"getDestination",value:function(t){return this._transport.getDestination(t)}},{key:"getPageLabels",value:function(){return this._transport.getPageLabels()}},{key:"getPageLayout",value:function(){return this._transport.getPageLayout()}},{key:"getPageMode",value:function(){return this._transport.getPageMode()}},{key:"getViewerPreferences",value:function(){return this._transport.getViewerPreferences()}},{key:"getOpenActionDestination",value:function(){return this._transport.getOpenActionDestination()}},{key:"getAttachments",value:function(){return this._transport.getAttachments()}},{key:"getJavaScript",value:function(){return this._transport.getJavaScript()}},{key:"getOutline",value:function(){return this._transport.getOutline()}},{key:"getPermissions",value:function(){return this._transport.getPermissions()}},{key:"getMetadata",value:function(){return this._transport.getMetadata()}},{key:"getData",value:function(){return this._transport.getData()}},{key:"getDownloadInfo",value:function(){return this._transport.downloadInfoCapability.promise}},{key:"getStats",value:function(){return this._transport.getStats()}},{key:"cleanup",value:function(){this._transport.startCleanup()}},{key:"destroy",value:function(){return this.loadingTask.destroy()}},{key:"numPages",get:function(){return this._pdfInfo.numPages}},{key:"fingerprint",get:function(){return this._pdfInfo.fingerprint}},{key:"loadingParams",get:function(){return this._transport.loadingParams}},{key:"loadingTask",get:function(){return this._transport.loadingTask}}]),t}();e.PDFDocumentProxy=M;var L=function(){function t(e,r,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];b(this,t),this.pageIndex=e,this._pageInfo=r,this._transport=n,this._stats=i?new a.StatTimer:a.DummyStatTimer,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new G,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this.intentStates=Object.create(null),this.destroyed=!1}return S(t,[{key:"getViewport",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.scale,r=t.rotation,n=void 0===r?this.rotate:r,i=t.dontFlip,o=void 0!==i&&i;return(arguments.length>1||"number"==typeof arguments[0])&&((0,a.deprecated)("getViewport is called with obsolete arguments."),e=arguments[0],n="number"==typeof arguments[1]?arguments[1]:this.rotate,o="boolean"==typeof arguments[2]&&arguments[2]),new a.PageViewport({viewBox:this.view,scale:e,rotation:n,dontFlip:o})}},{key:"getAnnotations",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.intent,r=void 0===e?null:e;return this.annotationsPromise&&this.annotationsIntent===r||(this.annotationsPromise=this._transport.getAnnotations(this.pageIndex,r),this.annotationsIntent=r),this.annotationsPromise}},{key:"render",value:function(t){var e=this,r=t.canvasContext,n=t.viewport,i=t.intent,s=void 0===i?"display":i,l=t.enableWebGL,c=void 0!==l&&l,u=t.renderInteractiveForms,h=void 0!==u&&u,d=t.transform,f=void 0===d?null:d,p=t.imageLayer,v=void 0===p?null:p,y=t.canvasFactory,m=void 0===y?null:y,_=t.background,b=void 0===_?null:_,w=this._stats;w.time("Overall"),this.pendingCleanup=!1;var S="print"===s?"print":"display",A=m||new a.DOMCanvasFactory,k=new g.WebGLContext({enable:c});this.intentStates[S]||(this.intentStates[S]=Object.create(null));var x=this.intentStates[S];x.displayReadyCapability||(x.receivingOperatorList=!0,x.displayReadyCapability=(0,o.createPromiseCapability)(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1},w.time("Page Request"),this._transport.messageHandler.send("RenderPageRequest",{pageIndex:this.pageNumber-1,intent:S,renderInteractiveForms:!0===h}));var C=function(t){var r=x.renderTasks.indexOf(P);r>=0&&x.renderTasks.splice(r,1),(e.cleanupAfterRender||"print"===S)&&(e.pendingCleanup=!0),e._tryCleanup(),t?P.capability.reject(t):P.capability.resolve(),w.timeEnd("Rendering"),w.timeEnd("Overall")},P=new B({callback:C,params:{canvasContext:r,viewport:n,transform:f,imageLayer:v,background:b},objs:this.objs,commonObjs:this.commonObjs,operatorList:x.operatorList,pageNumber:this.pageNumber,canvasFactory:A,webGLContext:k,useRequestAnimationFrame:"print"!==S,pdfBug:this._pdfBug});x.renderTasks||(x.renderTasks=[]),x.renderTasks.push(P);var R=P.task;return x.displayReadyCapability.promise.then((function(t){e.pendingCleanup?C():(w.time("Rendering"),P.initializeGraphics(t),P.operatorListChanged())})).catch(C),R}},{key:"getOperatorList",value:function(){this.intentStates.oplist||(this.intentStates.oplist=Object.create(null));var t,e=this.intentStates.oplist;return e.opListReadCapability||((t={}).operatorListChanged=function(){if(e.operatorList.lastChunk){e.opListReadCapability.resolve(e.operatorList);var r=e.renderTasks.indexOf(t);r>=0&&e.renderTasks.splice(r,1)}},e.receivingOperatorList=!0,e.opListReadCapability=(0,o.createPromiseCapability)(),e.renderTasks=[],e.renderTasks.push(t),e.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats.time("Page Request"),this._transport.messageHandler.send("RenderPageRequest",{pageIndex:this.pageIndex,intent:"oplist"})),e.opListReadCapability.promise}},{key:"streamTextContent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.normalizeWhitespace,r=void 0!==e&&e,n=t.disableCombineTextItems,i=void 0!==n&&n,o=100;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this.pageNumber-1,normalizeWhitespace:!0===r,combineTextItems:!0!==i},{highWaterMark:o,size:function(t){return t.items.length}})}},{key:"getTextContent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.streamTextContent(t);return new Promise((function(t,r){var n=e.getReader(),i={items:[],styles:Object.create(null)};!function e(){n.read().then((function(r){var n,o=r.value;r.done?t(i):(Object.assign(i.styles,o.styles),(n=i.items).push.apply(n,_(o.items)),e())}),r)}()}))}},{key:"_destroy",value:function(){this.destroyed=!0,this._transport.pageCache[this.pageIndex]=null;var t=[];return Object.keys(this.intentStates).forEach((function(e){"oplist"!==e&&this.intentStates[e].renderTasks.forEach((function(e){var r=e.capability.promise.catch((function(){}));t.push(r),e.cancel()}))}),this),this.objs.clear(),this.annotationsPromise=null,this.pendingCleanup=!1,Promise.all(t)}},{key:"cleanup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.pendingCleanup=!0,this._tryCleanup(t)}},{key:"_tryCleanup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.pendingCleanup&&!Object.keys(this.intentStates).some((function(t){var e=this.intentStates[t];return 0!==e.renderTasks.length||e.receivingOperatorList}),this)&&(Object.keys(this.intentStates).forEach((function(t){delete this.intentStates[t]}),this),this.objs.clear(),this.annotationsPromise=null,t&&this._stats instanceof a.StatTimer&&(this._stats=new a.StatTimer),this.pendingCleanup=!1)}},{key:"_startRenderPage",value:function(t,e){var r=this.intentStates[e];r.displayReadyCapability&&r.displayReadyCapability.resolve(t)}},{key:"_renderPageChunk",value:function(t,e){for(var r=this.intentStates[e],n=0,i=t.length;n<i;n++)r.operatorList.fnArray.push(t.fnArray[n]),r.operatorList.argsArray.push(t.argsArray[n]);r.operatorList.lastChunk=t.lastChunk;for(var o=0;o<r.renderTasks.length;o++)r.renderTasks[o].operatorListChanged();t.lastChunk&&(r.receivingOperatorList=!1,this._tryCleanup())}},{key:"pageNumber",get:function(){return this.pageIndex+1}},{key:"rotate",get:function(){return this._pageInfo.rotate}},{key:"ref",get:function(){return this._pageInfo.ref}},{key:"userUnit",get:function(){return this._pageInfo.userUnit}},{key:"view",get:function(){return this._pageInfo.view}},{key:"stats",get:function(){return this._stats instanceof a.StatTimer?this._stats:null}}]),t}();e.PDFPageProxy=L;var D=function(){function t(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];b(this,t),this._listeners=[],this._defer=e,this._deferred=Promise.resolve(void 0)}return S(t,[{key:"postMessage",value:function(t,e){var r=this;if(this._defer){var n=new WeakMap,i={data:function t(r){if("object"!==A(r)||null===r)return r;if(n.has(r))return n.get(r);var i,a;if((i=r.buffer)&&(0,o.isArrayBuffer)(i)){var s=e&&e.includes(i);return a=r===i?r:s?new r.constructor(i,r.byteOffset,r.byteLength):new r.constructor(r),n.set(r,a),a}for(var l in a=Array.isArray(r)?[]:{},n.set(r,a),r){for(var c=void 0,u=r;!(c=Object.getOwnPropertyDescriptor(u,l));)u=Object.getPrototypeOf(u);void 0!==c.value&&"function"!=typeof c.value&&(a[l]=t(c.value))}return a}(t)};this._deferred.then((function(){r._listeners.forEach((function(t){t.call(this,i)}),r)}))}else this._listeners.forEach((function(e){e.call(this,{data:t})}),this)}},{key:"addEventListener",value:function(t,e){this._listeners.push(e)}},{key:"removeEventListener",value:function(t,e){var r=this._listeners.indexOf(e);this._listeners.splice(r,1)}},{key:"terminate",value:function(){this._listeners.length=0}}]),t}();e.LoopbackPort=D;var N=function(){var t,e=new WeakMap,r=0;function n(){if(h.GlobalWorkerOptions.workerSrc)return h.GlobalWorkerOptions.workerSrc;if(void 0!==k)return k;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}function i(){try{if("undefined"!=typeof window)return window.pdfjsWorker&&window.pdfjsWorker.WorkerMessageHandler}catch(t){}return null}return function(){function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.name,n=void 0===r?null:r,i=t.port,a=void 0===i?null:i,l=t.postMessageTransfers,c=void 0===l||l,u=t.verbosity,h=void 0===u?(0,o.getVerbosityLevel)():u;if(b(this,s),a&&e.has(a))throw new Error("Cannot use more than one PDFWorker per port");if(this.name=n,this.destroyed=!1,this.postMessageTransfers=!1!==c,this.verbosity=h,this._readyCapability=(0,o.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,a)return e.set(a,this),void this._initializeFromPort(a);this._initialize()}return S(s,[{key:"_initializeFromPort",value:function(t){this._port=t,this._messageHandler=new d.MessageHandler("main","worker",t),this._messageHandler.on("ready",(function(){})),this._readyCapability.resolve()}},{key:"_initialize",value:function(){var t,e,r=this;if("undefined"!=typeof Worker&&!C&&!i()){var a=n();try{(0,o.isSameOrigin)(window.location.href,a)||(t=new o.URL(a,window.location).href,e="importScripts('"+t+"');",a=o.URL.createObjectURL(new Blob([e])));var s=new Worker(a),l=new d.MessageHandler("main","worker",s),c=function(){s.removeEventListener("error",u),l.destroy(),s.terminate(),r.destroyed?r._readyCapability.reject(new Error("Worker was destroyed")):r._setupFakeWorker()},u=function(){r._webWorker||c()};s.addEventListener("error",u),l.on("test",(function(t){s.removeEventListener("error",u),r.destroyed?c():t&&t.supportTypedArray?(r._messageHandler=l,r._port=s,r._webWorker=s,t.supportTransfers||(r.postMessageTransfers=!1),r._readyCapability.resolve(),l.send("configure",{verbosity:r.verbosity})):(r._setupFakeWorker(),l.destroy(),s.terminate())})),l.on("ready",(function(t){if(s.removeEventListener("error",u),r.destroyed)c();else try{h()}catch(t){r._setupFakeWorker()}}));var h=function(){var t=new Uint8Array([r.postMessageTransfers?255:0]);try{l.send("test",t,[t.buffer])}catch(e){(0,o.info)("Cannot use postMessage transfers"),t[0]=0,l.send("test",t)}};return void h()}catch(t){(0,o.info)("The worker has been disabled.")}}this._setupFakeWorker()}},{key:"_setupFakeWorker",value:function(){var e=this;C||((0,o.warn)("Setting up fake worker."),C=!0),function(){if(t)return t.promise;t=(0,o.createPromiseCapability)();var e=i();return e?(t.resolve(e),t.promise):((x||function(){return(0,a.loadScript)(n()).then((function(){return window.pdfjsWorker.WorkerMessageHandler}))})().then(t.resolve,t.reject),t.promise)}().then((function(t){if(e.destroyed)e._readyCapability.reject(new Error("Worker was destroyed"));else{var n=new D;e._port=n;var i="fake"+r++,o=new d.MessageHandler(i+"_worker",i,n);t.setup(o,n);var a=new d.MessageHandler(i,i+"_worker",n);e._messageHandler=a,e._readyCapability.resolve()}})).catch((function(t){e._readyCapability.reject(new Error('Setting up fake worker failed: "'.concat(t.message,'".')))}))}},{key:"destroy",value:function(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}},{key:"promise",get:function(){return this._readyCapability.promise}},{key:"port",get:function(){return this._port}},{key:"messageHandler",get:function(){return this._messageHandler}}],[{key:"fromPort",value:function(t){if(!t||!t.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return e.has(t.port)?e.get(t.port):new s(t)}},{key:"getWorkerSrc",value:function(){return n()}}]),s}()}();e.PDFWorker=N;var j,U=function(){function t(e,r,n,i){b(this,t),this.messageHandler=e,this.loadingTask=r,this.commonObjs=new G,this.fontLoader=new s.FontLoader({docId:r.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this)}),this._params=i,this.CMapReaderFactory=new i.CMapReaderFactory({baseUrl:i.cMapUrl,isCompressed:i.cMapPacked}),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.pageCache=[],this.pagePromises=[],this.downloadInfoCapability=(0,o.createPromiseCapability)(),this.setupMessageHandler()}return S(t,[{key:"destroy",value:function(){var t=this;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,o.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));var e=[];this.pageCache.forEach((function(t){t&&e.push(t._destroy())})),this.pageCache.length=0,this.pagePromises.length=0;var r=this.messageHandler.sendWithPromise("Terminate",null);return e.push(r),Promise.all(e).then((function(){t.fontLoader.clear(),t._networkStream&&t._networkStream.cancelAllRequests(),t.messageHandler&&(t.messageHandler.destroy(),t.messageHandler=null),t.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise}},{key:"setupMessageHandler",value:function(){var t=this.messageHandler,e=this.loadingTask;t.on("GetReader",(function(t,e){var r=this;(0,o.assert)(this._networkStream),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=function(t){r._lastProgress={loaded:t.loaded,total:t.total}},e.onPull=function(){r._fullReader.read().then((function(t){var r=t.value;t.done?e.close():((0,o.assert)((0,o.isArrayBuffer)(r)),e.enqueue(new Uint8Array(r),1,[r]))})).catch((function(t){e.error(t)}))},e.onCancel=function(t){r._fullReader.cancel(t)}}),this),t.on("ReaderHeadersReady",(function(t){var r=this,n=(0,o.createPromiseCapability)(),i=this._fullReader;return i.headersReady.then((function(){i.isStreamingSupported&&i.isRangeSupported||(r._lastProgress&&e.onProgress&&e.onProgress(r._lastProgress),i.onProgress=function(t){e.onProgress&&e.onProgress({loaded:t.loaded,total:t.total})}),n.resolve({isStreamingSupported:i.isStreamingSupported,isRangeSupported:i.isRangeSupported,contentLength:i.contentLength})}),n.reject),n.promise}),this),t.on("GetRangeReader",(function(t,e){(0,o.assert)(this._networkStream);var r=this._networkStream.getRangeReader(t.begin,t.end);r?(e.onPull=function(){r.read().then((function(t){var r=t.value;t.done?e.close():((0,o.assert)((0,o.isArrayBuffer)(r)),e.enqueue(new Uint8Array(r),1,[r]))})).catch((function(t){e.error(t)}))},e.onCancel=function(t){r.cancel(t)}):e.close()}),this),t.on("GetDoc",(function(t){var r=t.pdfInfo;this._numPages=r.numPages,e._capability.resolve(new M(r,this))}),this),t.on("PasswordRequest",(function(t){var r=this;if(this._passwordCapability=(0,o.createPromiseCapability)(),e.onPassword)try{e.onPassword((function(t){r._passwordCapability.resolve({password:t})}),t.code)}catch(t){this._passwordCapability.reject(t)}else this._passwordCapability.reject(new o.PasswordException(t.message,t.code));return this._passwordCapability.promise}),this),t.on("PasswordException",(function(t){e._capability.reject(new o.PasswordException(t.message,t.code))}),this),t.on("InvalidPDF",(function(t){e._capability.reject(new o.InvalidPDFException(t.message))}),this),t.on("MissingPDF",(function(t){e._capability.reject(new o.MissingPDFException(t.message))}),this),t.on("UnexpectedResponse",(function(t){e._capability.reject(new o.UnexpectedResponseException(t.message,t.status))}),this),t.on("UnknownError",(function(t){e._capability.reject(new o.UnknownErrorException(t.message,t.details))}),this),t.on("DataLoaded",(function(t){e.onProgress&&e.onProgress({loaded:t.length,total:t.length}),this.downloadInfoCapability.resolve(t)}),this),t.on("StartRenderPage",(function(t){if(!this.destroyed){var e=this.pageCache[t.pageIndex];e._stats.timeEnd("Page Request"),e._startRenderPage(t.transparency,t.intent)}}),this),t.on("RenderPageChunk",(function(t){this.destroyed||this.pageCache[t.pageIndex]._renderPageChunk(t.operatorList,t.intent)}),this),t.on("commonobj",(function(e){var r=this;if(!this.destroyed){var n=m(e,3),i=n[0],a=n[1],l=n[2];if(!this.commonObjs.has(i))switch(a){case"Font":var c=this._params;if("error"in l){var h=l.error;(0,o.warn)("Error during font loading: ".concat(h)),this.commonObjs.resolve(i,h);break}var d=null;c.pdfBug&&u.default.FontInspector&&u.default.FontInspector.enabled&&(d={registerFont:function(t,e){u.default.FontInspector.fontAdded(t,e)}});var f=new s.FontFaceObject(l,{isEvalSupported:c.isEvalSupported,disableFontFace:c.disableFontFace,ignoreErrors:c.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:d});this.fontLoader.bind(f).then((function(){r.commonObjs.resolve(i,f)}),(function(e){t.sendWithPromise("FontFallback",{id:i}).finally((function(){r.commonObjs.resolve(i,f)}))}));break;case"FontPath":case"FontType3Res":this.commonObjs.resolve(i,l);break;default:throw new Error("Got unknown common object type ".concat(a))}}}),this),t.on("obj",(function(t){if(!this.destroyed){var e=m(t,4),r=e[0],n=e[1],i=e[2],o=e[3],s=this.pageCache[n];if(!s.objs.has(r))switch(i){case"JpegStream":return new Promise((function(t,e){var r=new Image;r.onload=function(){t(r)},r.onerror=function(){e(new Error("Error during JPEG image loading")),(0,a.releaseImageResources)(r)},r.src=o})).then((function(t){s.objs.resolve(r,t)}));case"Image":s.objs.resolve(r,o),o&&"data"in o&&o.data.length>8e6&&(s.cleanupAfterRender=!0);break;default:throw new Error("Got unknown object type ".concat(i))}}}),this),t.on("DocProgress",(function(t){this.destroyed||e.onProgress&&e.onProgress({loaded:t.loaded,total:t.total})}),this),t.on("PageError",(function(t){if(!this.destroyed){var e=this.pageCache[t.pageIndex].intentStates[t.intent];if(!e.displayReadyCapability)throw new Error(t.error);if(e.displayReadyCapability.reject(new Error(t.error)),e.operatorList){e.operatorList.lastChunk=!0;for(var r=0;r<e.renderTasks.length;r++)e.renderTasks[r].operatorListChanged()}}}),this),t.on("UnsupportedFeature",this._onUnsupportedFeature,this),t.on("JpegDecode",(function(t){if(this.destroyed)return Promise.reject(new Error("Worker was destroyed"));if("undefined"==typeof document)return Promise.reject(new Error('"document" is not defined.'));var e=m(t,2),r=e[0],n=e[1];return 3!==n&&1!==n?Promise.reject(new Error("Only 3 components or 1 component can be returned")):new Promise((function(t,e){var i=new Image;i.onload=function(){var e=i.width,r=i.height,o=e*r,s=4*o,l=new Uint8ClampedArray(o*n),c=document.createElement("canvas");c.width=e,c.height=r;var u=c.getContext("2d");u.drawImage(i,0,0);var h=u.getImageData(0,0,e,r).data;if(3===n)for(var d=0,f=0;d<s;d+=4,f+=3)l[f]=h[d],l[f+1]=h[d+1],l[f+2]=h[d+2];else if(1===n)for(var p=0,g=0;p<s;p+=4,g++)l[g]=h[p];t({data:l,width:e,height:r}),(0,a.releaseImageResources)(i),c.width=0,c.height=0,c=null,u=null},i.onerror=function(){e(new Error("JpegDecode failed to load image")),(0,a.releaseImageResources)(i)},i.src=r}))}),this),t.on("FetchBuiltInCMap",(function(t){return this.destroyed?Promise.reject(new Error("Worker was destroyed")):this.CMapReaderFactory.fetch({name:t.name})}),this)}},{key:"_onUnsupportedFeature",value:function(t){var e=t.featureId;this.destroyed||this.loadingTask.onUnsupportedFeature&&this.loadingTask.onUnsupportedFeature(e)}},{key:"getData",value:function(){return this.messageHandler.sendWithPromise("GetData",null)}},{key:"getPage",value:function(t){var e=this;if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request"));var r=t-1;if(r in this.pagePromises)return this.pagePromises[r];var n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:r}).then((function(t){if(e.destroyed)throw new Error("Transport destroyed");var n=new L(r,t,e,e._params.pdfBug);return e.pageCache[r]=n,n}));return this.pagePromises[r]=n,n}},{key:"getPageIndex",value:function(t){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:t}).catch((function(t){return Promise.reject(new Error(t))}))}},{key:"getAnnotations",value:function(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}},{key:"getDestinations",value:function(){return this.messageHandler.sendWithPromise("GetDestinations",null)}},{key:"getDestination",value:function(t){return"string"!=typeof t?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}},{key:"getPageLabels",value:function(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}},{key:"getPageLayout",value:function(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}},{key:"getPageMode",value:function(){return this.messageHandler.sendWithPromise("GetPageMode",null)}},{key:"getViewerPreferences",value:function(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}},{key:"getOpenActionDestination",value:function(){return this.messageHandler.sendWithPromise("GetOpenActionDestination",null)}},{key:"getAttachments",value:function(){return this.messageHandler.sendWithPromise("GetAttachments",null)}},{key:"getJavaScript",value:function(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}},{key:"getOutline",value:function(){return this.messageHandler.sendWithPromise("GetOutline",null)}},{key:"getPermissions",value:function(){return this.messageHandler.sendWithPromise("GetPermissions",null)}},{key:"getMetadata",value:function(){var t=this;return this.messageHandler.sendWithPromise("GetMetadata",null).then((function(e){return{info:e[0],metadata:e[1]?new f.Metadata(e[1]):null,contentDispositionFilename:t._fullReader?t._fullReader.filename:null}}))}},{key:"getStats",value:function(){return this.messageHandler.sendWithPromise("GetStats",null)}},{key:"startCleanup",value:function(){var t=this;this.messageHandler.sendWithPromise("Cleanup",null).then((function(){for(var e=0,r=t.pageCache.length;e<r;e++){var n=t.pageCache[e];n&&n.cleanup()}t.commonObjs.clear(),t.fontLoader.clear()}))}},{key:"loadingParams",get:function(){var t=this._params;return(0,o.shadow)(this,"loadingParams",{disableAutoFetch:t.disableAutoFetch,disableCreateObjectURL:t.disableCreateObjectURL,disableFontFace:t.disableFontFace,nativeImageDecoderSupport:t.nativeImageDecoderSupport})}}]),t}(),G=function(){function t(){b(this,t),this._objs=Object.create(null)}return S(t,[{key:"_ensureObj",value:function(t){return this._objs[t]?this._objs[t]:this._objs[t]={capability:(0,o.createPromiseCapability)(),data:null,resolved:!1}}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e)return this._ensureObj(t).capability.promise.then(e),null;var r=this._objs[t];if(!r||!r.resolved)throw new Error("Requesting object that isn't resolved yet ".concat(t,"."));return r.data}},{key:"has",value:function(t){var e=this._objs[t];return!!e&&e.resolved}},{key:"resolve",value:function(t,e){var r=this._ensureObj(t);r.resolved=!0,r.data=e,r.capability.resolve(e)}},{key:"clear",value:function(){for(var t in this._objs){var e=this._objs[t].data;"undefined"!=typeof Image&&e instanceof Image&&(0,a.releaseImageResources)(e)}this._objs=Object.create(null)}}]),t}(),q=function(){function t(e){b(this,t),this._internalRenderTask=e,this.onContinue=null}return S(t,[{key:"cancel",value:function(){this._internalRenderTask.cancel()}},{key:"then",value:function(t,e){return(0,a.deprecated)("RenderTask.then method, use the `promise` getter instead."),this.promise.then.apply(this.promise,arguments)}},{key:"promise",get:function(){return this._internalRenderTask.capability.promise}}]),t}(),B=(j=new WeakSet,function(){function t(e){var r=e.callback,n=e.params,i=e.objs,a=e.commonObjs,s=e.operatorList,l=e.pageNumber,c=e.canvasFactory,u=e.webGLContext,h=e.useRequestAnimationFrame,d=void 0!==h&&h,f=e.pdfBug,p=void 0!==f&&f;b(this,t),this.callback=r,this.params=n,this.objs=i,this.commonObjs=a,this.operatorListIdx=null,this.operatorList=s,this.pageNumber=l,this.canvasFactory=c,this.webGLContext=u,this._pdfBug=p,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===d&&"undefined"!=typeof window,this.cancelled=!1,this.capability=(0,o.createPromiseCapability)(),this.task=new q(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}var e,r;return S(t,[{key:"initializeGraphics",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.cancelled){if(this._canvas){if(j.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");j.add(this._canvas)}this._pdfBug&&u.default.StepperManager&&u.default.StepperManager.enabled&&(this.stepper=u.default.StepperManager.create(this.pageNumber-1),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());var e=this.params,r=e.canvasContext,n=e.viewport,i=e.transform,o=e.imageLayer,a=e.background;this.gfx=new c.CanvasGraphics(r,this.commonObjs,this.objs,this.canvasFactory,this.webGLContext,o),this.gfx.beginDrawing({transform:i,viewport:n,transparency:t,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}}},{key:"cancel",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&j.delete(this._canvas),this.callback(t||new a.RenderingCancelledException("Rendering cancelled, page ".concat(this.pageNumber),"canvas"))}},{key:"operatorListChanged",value:function(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}},{key:"_continue",value:function(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}},{key:"_scheduleNext",value:function(){var t=this;this._useRequestAnimationFrame?window.requestAnimationFrame((function(){t._nextBound().catch(t.cancel.bind(t))})):Promise.resolve().then(this._nextBound).catch(this.cancel.bind(this))}},{key:"_next",value:(e=i.default.mark((function t(){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.cancelled){t.next=2;break}return t.abrupt("return");case 2:this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&j.delete(this._canvas),this.callback()));case 4:case"end":return t.stop()}}),t,this)})),r=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(t){y(o,n,i,a,s,"next",t)}function s(t){y(o,n,i,a,s,"throw",t)}a(void 0)}))},function(){return r.apply(this,arguments)})}]),t}());e.version="2.2.228",e.build="d7afb74a"},function(t,e,r){"use strict";t.exports=r(149)},function(t,e,r){"use strict";(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=function(t){var r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,r,n){var i=e&&e.prototype instanceof h?e:h,o=Object.create(i.prototype),a=new A(n||[]);return o._invoke=function(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return{value:void 0,done:!0}}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=b(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=c(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,a),o}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var u={};function h(){}function d(){}function f(){}var p={};p[o]=function(){return this};var g=Object.getPrototypeOf,v=g&&g(g(k([])));v&&v!==r&&n.call(v,o)&&(p=v);var y=f.prototype=h.prototype=Object.create(p);function m(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function _(t){var r;this._invoke=function(i,o){function a(){return new Promise((function(r,a){!function r(i,o,a,s){var l=c(t[i],t,o);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"===e(h)&&n.call(h,"__await")?Promise.resolve(h.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):Promise.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(l.arg)}(i,o,r,a)}))}return r=r?r.then(a,a):a()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=c(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var i=n.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:x}}function x(){return{value:void 0,done:!0}}return d.prototype=y.constructor=f,f.constructor=d,f[s]=d.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},m(_.prototype),_.prototype[a]=function(){return this},t.AsyncIterator=_,t.async=function(e,r,n,i){var o=new _(l(e,r,n,i));return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},m(y),y[s]="Generator",y[o]=function(){return this},y.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=k,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;S(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}("object"===e(t)?t.exports:{});try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}}).call(this,r(150)(t))},function(t,e,r){"use strict";t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.addLinkAttributes=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.url,n=e.target,i=e.rel;if(t.href=t.title=r?(0,o.removeNullCharacters)(r):"",r){var a=Object.values(y),s=a.includes(n)?n:y.NONE;t.target=m[s],t.rel="string"==typeof i?i:"noopener noreferrer nofollow"}},e.getFilenameFromUrl=function(t){var e=t.indexOf("#"),r=t.indexOf("?"),n=Math.min(e>0?e:t.length,r>0?r:t.length);return t.substring(t.lastIndexOf("/",n)+1,n)},e.isFetchSupported=S,e.isValidFetchUrl=A,e.loadScript=function(t){return new Promise((function(e,r){var n=document.createElement("script");n.src=t,n.onload=e,n.onerror=function(){r(new Error("Cannot load script at: ".concat(n.src)))},(document.head||document.documentElement).appendChild(n)}))},e.deprecated=function(t){console.log("Deprecated API usage: "+t)},e.releaseImageResources=function(t){(0,o.assert)(t instanceof Image,"Invalid `img` parameter.");var e=t.src;"string"==typeof e&&e.startsWith("blob:")&&o.URL.revokeObjectURL&&o.URL.revokeObjectURL(e),t.removeAttribute("src")},e.PDFDateString=e.DummyStatTimer=e.StatTimer=e.DOMSVGFactory=e.DOMCMapReaderFactory=e.DOMCanvasFactory=e.DEFAULT_LINK_REL=e.LinkTarget=e.RenderingCancelledException=e.PageViewport=void 0;var n,i=(n=r(148))&&n.__esModule?n:{default:n},o=r(1);function a(t,e,r,n,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,i)}function s(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function s(t){a(o,n,i,s,l,"next",t)}function l(t){a(o,n,i,s,l,"throw",t)}s(void 0)}))}}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,r){return e&&c(t.prototype,e),r&&c(t,r),t}e.DEFAULT_LINK_REL="noopener noreferrer nofollow";var h="http://www.w3.org/2000/svg",d=function(){function t(){l(this,t)}return u(t,[{key:"create",value:function(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");var r=document.createElement("canvas"),n=r.getContext("2d");return r.width=t,r.height=e,{canvas:r,context:n}}},{key:"reset",value:function(t,e,r){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||r<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=r}},{key:"destroy",value:function(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}}]),t}();e.DOMCanvasFactory=d;var f=function(){function t(e){var r=e.baseUrl,n=void 0===r?null:r,i=e.isCompressed,o=void 0!==i&&i;l(this,t),this.baseUrl=n,this.isCompressed=o}return u(t,[{key:"fetch",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){var t=s(i.default.mark((function t(e){var r,n,a,l=this;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.name,this.baseUrl){t.next=3;break}throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');case 3:if(r){t.next=5;break}throw new Error("CMap name must be specified.");case 5:if(n=this.baseUrl+r+(this.isCompressed?".bcmap":""),a=this.isCompressed?o.CMapCompressionType.BINARY:o.CMapCompressionType.NONE,!S()||!A(n,document.baseURI)){t.next=9;break}return t.abrupt("return",fetch(n).then(function(){var t=s(i.default.mark((function t(e){var r;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.ok){t.next=2;break}throw new Error(e.statusText);case 2:if(!l.isCompressed){t.next=10;break}return t.t0=Uint8Array,t.next=6,e.arrayBuffer();case 6:t.t1=t.sent,r=new t.t0(t.t1),t.next=15;break;case 10:return t.t2=o.stringToBytes,t.next=13,e.text();case 13:t.t3=t.sent,r=(0,t.t2)(t.t3);case 15:return t.abrupt("return",{cMapData:r,compressionType:a});case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){throw new Error("Unable to load ".concat(l.isCompressed?"binary ":"")+"CMap at: ".concat(n))})));case 9:return t.abrupt("return",new Promise((function(t,e){var r=new XMLHttpRequest;r.open("GET",n,!0),l.isCompressed&&(r.responseType="arraybuffer"),r.onreadystatechange=function(){if(r.readyState===XMLHttpRequest.DONE){var n;if((200===r.status||0===r.status)&&(l.isCompressed&&r.response?n=new Uint8Array(r.response):!l.isCompressed&&r.responseText&&(n=(0,o.stringToBytes)(r.responseText)),n))return void t({cMapData:n,compressionType:a});e(new Error(r.statusText))}},r.send(null)})).catch((function(t){throw new Error("Unable to load ".concat(l.isCompressed?"binary ":"")+"CMap at: ".concat(n))})));case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}())}]),t}();e.DOMCMapReaderFactory=f;var p=function(){function t(){l(this,t)}return u(t,[{key:"create",value:function(t,e){(0,o.assert)(t>0&&e>0,"Invalid SVG dimensions");var r=document.createElementNS(h,"svg:svg");return r.setAttribute("version","1.1"),r.setAttribute("width",t+"px"),r.setAttribute("height",e+"px"),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox","0 0 "+t+" "+e),r}},{key:"createElement",value:function(t){return(0,o.assert)("string"==typeof t,"Invalid SVG element type"),document.createElementNS(h,t)}}]),t}();e.DOMSVGFactory=p;var g=function(){function t(e){var r=e.viewBox,n=e.scale,i=e.rotation,o=e.offsetX,a=void 0===o?0:o,s=e.offsetY,c=void 0===s?0:s,u=e.dontFlip,h=void 0!==u&&u;l(this,t),this.viewBox=r,this.scale=n,this.rotation=i,this.offsetX=a,this.offsetY=c;var d,f,p,g,v,y,m,_,b=(r[2]+r[0])/2,w=(r[3]+r[1])/2;switch(i=(i%=360)<0?i+360:i){case 180:d=-1,f=0,p=0,g=1;break;case 90:d=0,f=1,p=1,g=0;break;case 270:d=0,f=-1,p=-1,g=0;break;default:d=1,f=0,p=0,g=-1}h&&(p=-p,g=-g),0===d?(v=Math.abs(w-r[1])*n+a,y=Math.abs(b-r[0])*n+c,m=Math.abs(r[3]-r[1])*n,_=Math.abs(r[2]-r[0])*n):(v=Math.abs(b-r[0])*n+a,y=Math.abs(w-r[1])*n+c,m=Math.abs(r[2]-r[0])*n,_=Math.abs(r[3]-r[1])*n),this.transform=[d*n,f*n,p*n,g*n,v-d*n*b-p*n*w,y-f*n*b-g*n*w],this.width=m,this.height=_}return u(t,[{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.scale,n=void 0===r?this.scale:r,i=e.rotation,o=void 0===i?this.rotation:i,a=e.dontFlip,s=void 0!==a&&a;return new t({viewBox:this.viewBox.slice(),scale:n,rotation:o,offsetX:this.offsetX,offsetY:this.offsetY,dontFlip:s})}},{key:"convertToViewportPoint",value:function(t,e){return o.Util.applyTransform([t,e],this.transform)}},{key:"convertToViewportRectangle",value:function(t){var e=o.Util.applyTransform([t[0],t[1]],this.transform),r=o.Util.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],r[0],r[1]]}},{key:"convertToPdfPoint",value:function(t,e){return o.Util.applyInverseTransform([t,e],this.transform)}}]),t}();e.PageViewport=g;var v=function(){function t(t,e){this.message=t,this.type=e}return t.prototype=new Error,t.prototype.name="RenderingCancelledException",t.constructor=t,t}();e.RenderingCancelledException=v;var y={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};e.LinkTarget=y;var m=["","_self","_blank","_parent","_top"],_=function(){function t(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];l(this,t),this.enabled=!!e,this.started=Object.create(null),this.times=[]}return u(t,[{key:"time",value:function(t){this.enabled&&(t in this.started&&(0,o.warn)("Timer is already running for "+t),this.started[t]=Date.now())}},{key:"timeEnd",value:function(t){this.enabled&&(t in this.started||(0,o.warn)("Timer has not been started for "+t),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t])}},{key:"toString",value:function(){var t="",e=0,r=!0,n=!1,i=void 0;try{for(var o,a=this.times[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value.name;s.length>e&&(e=s.length)}}catch(t){n=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}var l=!0,c=!1,u=void 0;try{for(var h,d=this.times[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var f=h.value,p=f.end-f.start;t+="".concat(f.name.padEnd(e)," ").concat(p,"ms\n")}}catch(t){c=!0,u=t}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}return t}}]),t}();e.StatTimer=_;var b,w=function(){function t(){l(this,t),(0,o.unreachable)("Cannot initialize DummyStatTimer.")}return u(t,null,[{key:"time",value:function(t){}},{key:"timeEnd",value:function(t){}},{key:"toString",value:function(){return""}}]),t}();function S(){return"undefined"!=typeof fetch&&"undefined"!=typeof Response&&"body"in Response.prototype&&"undefined"!=typeof ReadableStream}function A(t,e){try{var r=(e?new o.URL(t,e):new o.URL(t)).protocol;return"http:"===r||"https:"===r}catch(t){return!1}}e.DummyStatTimer=w;var k=function(){function t(){l(this,t)}return u(t,null,[{key:"toDateObject",value:function(t){if(!t||!(0,o.isString)(t))return null;b||(b=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));var e=b.exec(t);if(!e)return null;var r=parseInt(e[1],10),n=parseInt(e[2],10);n=n>=1&&n<=12?n-1:0;var i=parseInt(e[3],10);i=i>=1&&i<=31?i:1;var a=parseInt(e[4],10);a=a>=0&&a<=23?a:0;var s=parseInt(e[5],10);s=s>=0&&s<=59?s:0;var l=parseInt(e[6],10);l=l>=0&&l<=59?l:0;var c=e[7]||"Z",u=parseInt(e[8],10);u=u>=0&&u<=23?u:0;var h=parseInt(e[9],10)||0;return h=h>=0&&h<=59?h:0,"-"===c?(a+=u,s+=h):"+"===c&&(a-=u,s-=h),new Date(Date.UTC(r,n,i,a,s,l))}}]),t}();e.PDFDateString=k},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var n,i=(n=r(148))&&n.__esModule?n:{default:n},o=r(1);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e,r,n,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,i)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e,r){return e&&d(t.prototype,e),r&&d(t,r),t}var p,g=function(){function t(e){var r=e.docId,n=e.onUnsupportedFeature;h(this,t),this.constructor===t&&(0,o.unreachable)("Cannot initialize BaseFontLoader."),this.docId=r,this._onUnsupportedFeature=n,this.nativeFontFaces=[],this.styleElement=null}var e,r;return f(t,[{key:"addNativeFontFace",value:function(t){this.nativeFontFaces.push(t),document.fonts.add(t)}},{key:"insertRule",value:function(t){var e=this.styleElement;e||((e=this.styleElement=document.createElement("style")).id="PDFJS_FONT_STYLE_TAG_".concat(this.docId),document.documentElement.getElementsByTagName("head")[0].appendChild(e));var r=e.sheet;r.insertRule(t,r.cssRules.length)}},{key:"clear",value:function(){this.nativeFontFaces.forEach((function(t){document.fonts.delete(t)})),this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}},{key:"bind",value:(e=i.default.mark((function t(e){var r,n,a=this;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.attached&&!e.missingFile){t.next=2;break}return t.abrupt("return",void 0);case 2:if(e.attached=!0,!this.isFontLoadingAPISupported){t.next=19;break}if(!(r=e.createNativeFontFace())){t.next=18;break}return this.addNativeFontFace(r),t.prev=7,t.next=10,r.loaded;case 10:t.next=18;break;case 12:throw t.prev=12,t.t0=t.catch(7),this._onUnsupportedFeature({featureId:o.UNSUPPORTED_FEATURES.font}),(0,o.warn)("Failed to load font '".concat(r.family,"': '").concat(t.t0,"'.")),e.disableFontFace=!0,t.t0;case 18:return t.abrupt("return",void 0);case 19:if(!(n=e.createFontFaceRule())){t.next=25;break}if(this.insertRule(n),!this.isSyncFontLoadingSupported){t.next=24;break}return t.abrupt("return",void 0);case 24:return t.abrupt("return",new Promise((function(t){var r=a._queueLoadingCallback(t);a._prepareFontLoadEvent([n],[e],r)})));case 25:return t.abrupt("return",void 0);case 26:case"end":return t.stop()}}),t,this,[[7,12]])})),r=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(t){u(o,n,i,a,s,"next",t)}function s(t){u(o,n,i,a,s,"throw",t)}a(void 0)}))},function(t){return r.apply(this,arguments)})},{key:"_queueLoadingCallback",value:function(t){(0,o.unreachable)("Abstract method `_queueLoadingCallback`.")}},{key:"_prepareFontLoadEvent",value:function(t,e,r){(0,o.unreachable)("Abstract method `_prepareFontLoadEvent`.")}},{key:"isFontLoadingAPISupported",get:function(){(0,o.unreachable)("Abstract method `isFontLoadingAPISupported`.")}},{key:"isSyncFontLoadingSupported",get:function(){(0,o.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}},{key:"_loadTestFont",get:function(){(0,o.unreachable)("Abstract method `_loadTestFont`.")}}]),t}();e.FontLoader=p,e.FontLoader=p=function(t){function e(t){var r;return h(this,e),(r=s(this,l(e).call(this,t))).loadingContext={requests:[],nextRequestId:0},r.loadTestFontId=0,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,t),f(e,[{key:"_queueLoadingCallback",value:function(t){var e=this.loadingContext,r={id:"pdfjs-font-loading-".concat(e.nextRequestId++),done:!1,complete:function(){for((0,o.assert)(!r.done,"completeRequest() cannot be called twice."),r.done=!0;e.requests.length>0&&e.requests[0].done;){var t=e.requests.shift();setTimeout(t.callback,0)}},callback:t};return e.requests.push(r),r}},{key:"_prepareFontLoadEvent",value:function(t,e,r){function n(t,e){return t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|255&t.charCodeAt(e+3)}function i(t,e,r,n){return t.substring(0,e)+n+t.substring(e+r)}var a,s,l=document.createElement("canvas");l.width=1,l.height=1;var c=l.getContext("2d"),u=0,h="lt".concat(Date.now()).concat(this.loadTestFontId++),d=this._loadTestFont,f=n(d=i(d,976,h.length,h),16);for(a=0,s=h.length-3;a<s;a+=4)f=f-1482184792+n(h,a)|0;a<h.length&&(f=f-1482184792+n(h+"XXX",a)|0),d=i(d,16,4,(0,o.string32)(f));var p="url(data:font/opentype;base64,".concat(btoa(d),");"),g='@font-face {font-family:"'.concat(h,'";src:').concat(p,"}");this.insertRule(g);var v=[];for(a=0,s=e.length;a<s;a++)v.push(e[a].loadedName);v.push(h);var y=document.createElement("div");for(y.setAttribute("style","visibility: hidden;width: 10px; height: 10px;position: absolute; top: 0px; left: 0px;"),a=0,s=v.length;a<s;++a){var m=document.createElement("span");m.textContent="Hi",m.style.fontFamily=v[a],y.appendChild(m)}document.body.appendChild(y),function t(e,r){if(++u>30)return(0,o.warn)("Load test font never loaded."),void r();c.font="30px "+e,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0?r():setTimeout(t.bind(null,e,r))}(h,(function(){document.body.removeChild(y),r.complete()}))}},{key:"isFontLoadingAPISupported",get:function(){var t="undefined"!=typeof document&&!!document.fonts;if(t&&"undefined"!=typeof navigator){var e=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);e&&e[1]<63&&(t=!1)}return(0,o.shadow)(this,"isFontLoadingAPISupported",t)}},{key:"isSyncFontLoadingSupported",get:function(){var t=!1;if("undefined"==typeof navigator)t=!0;else{var e=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);e&&e[1]>=14&&(t=!0)}return(0,o.shadow)(this,"isSyncFontLoadingSupported",t)}},{key:"_loadTestFont",get:function(){return(0,o.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}}]),e}(g);var v={get value(){return(0,o.shadow)(this,"value",(0,o.isEvalSupported)())}},y=function(){function t(e,r){var n=r.isEvalSupported,i=void 0===n||n,o=r.disableFontFace,a=void 0!==o&&o,s=r.ignoreErrors,l=void 0!==s&&s,c=r.onUnsupportedFeature,u=void 0===c?null:c,d=r.fontRegistry,f=void 0===d?null:d;for(var p in h(this,t),this.compiledGlyphs=Object.create(null),e)this[p]=e[p];this.isEvalSupported=!1!==i,this.disableFontFace=!0===a,this.ignoreErrors=!0===l,this._onUnsupportedFeature=u,this.fontRegistry=f}return f(t,[{key:"createNativeFontFace",value:function(){if(!this.data||this.disableFontFace)return null;var t=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),t}},{key:"createFontFaceRule",value:function(){if(!this.data||this.disableFontFace)return null;var t=(0,o.bytesToString)(new Uint8Array(this.data)),e="url(data:".concat(this.mimetype,";base64,").concat(btoa(t),");"),r='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(e,"}");return this.fontRegistry&&this.fontRegistry.registerFont(this,e),r}},{key:"getPathGenerator",value:function(t,e){if(void 0!==this.compiledGlyphs[e])return this.compiledGlyphs[e];var r,n;try{r=t.get(this.loadedName+"_path_"+e)}catch(t){if(!this.ignoreErrors)throw t;return this._onUnsupportedFeature&&this._onUnsupportedFeature({featureId:o.UNSUPPORTED_FEATURES.font}),(0,o.warn)('getPathGenerator - ignoring character: "'.concat(t,'".')),this.compiledGlyphs[e]=function(t,e){}}if(this.isEvalSupported&&v.value){for(var i,a="",s=0,l=r.length;s<l;s++)i=void 0!==(n=r[s]).args?n.args.join(","):"",a+="c."+n.cmd+"("+i+");\n";return this.compiledGlyphs[e]=new Function("c","size",a)}return this.compiledGlyphs[e]=function(t,e){for(var i=0,o=r.length;i<o;i++)"scale"===(n=r[i]).cmd&&(n.args=[e,-e]),t[n.cmd].apply(t,n.args)}}}]),t}();e.FontFaceObject=y},function(t,e,r){"use strict";var n=Object.create(null),i=r(4),o="undefined"!=typeof navigator&&navigator.userAgent||"",a=/Trident/.test(o),s=/CriOS/.test(o);(a||s)&&(n.disableCreateObjectURL=!0),i()&&(n.disableFontFace=!0,n.nativeImageDecoderSupport="none"),e.apiCompatibilityParams=Object.freeze(n)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var n=r(1),i=r(155),o={get value(){return(0,n.shadow)(o,"value",(0,n.isLittleEndian)())}};function a(t){t.mozCurrentTransform||(t._originalSave=t.save,t._originalRestore=t.restore,t._originalRotate=t.rotate,t._originalScale=t.scale,t._originalTranslate=t.translate,t._originalTransform=t.transform,t._originalSetTransform=t.setTransform,t._transformMatrix=t._transformMatrix||[1,0,0,1,0,0],t._transformStack=[],Object.defineProperty(t,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(t,"mozCurrentTransformInverse",{get:function(){var t=this._transformMatrix,e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],a=t[5],s=e*i-r*n,l=r*n-e*i;return[i/s,r/l,n/l,e/s,(i*o-n*a)/l,(r*o-e*a)/s]}}),t.save=function(){var t=this._transformMatrix;this._transformStack.push(t),this._transformMatrix=t.slice(0,6),this._originalSave()},t.restore=function(){var t=this._transformStack.pop();t&&(this._transformMatrix=t,this._originalRestore())},t.translate=function(t,e){var r=this._transformMatrix;r[4]=r[0]*t+r[2]*e+r[4],r[5]=r[1]*t+r[3]*e+r[5],this._originalTranslate(t,e)},t.scale=function(t,e){var r=this._transformMatrix;r[0]=r[0]*t,r[1]=r[1]*t,r[2]=r[2]*e,r[3]=r[3]*e,this._originalScale(t,e)},t.transform=function(e,r,n,i,o,a){var s=this._transformMatrix;this._transformMatrix=[s[0]*e+s[2]*r,s[1]*e+s[3]*r,s[0]*n+s[2]*i,s[1]*n+s[3]*i,s[0]*o+s[2]*a+s[4],s[1]*o+s[3]*a+s[5]],t._originalTransform(e,r,n,i,o,a)},t.setTransform=function(e,r,n,i,o,a){this._transformMatrix=[e,r,n,i,o,a],t._originalSetTransform(e,r,n,i,o,a)},t.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),n=this._transformMatrix;this._transformMatrix=[n[0]*e+n[2]*r,n[1]*e+n[3]*r,n[0]*-r+n[2]*e,n[1]*-r+n[3]*e,n[4],n[5]],this._originalRotate(t)})}var s=function(){function t(t){this.canvasFactory=t,this.cache=Object.create(null)}return t.prototype={getCanvas:function(t,e,r,n){var i;return void 0!==this.cache[t]?(i=this.cache[t],this.canvasFactory.reset(i,e,r),i.context.setTransform(1,0,0,1,0,0)):(i=this.canvasFactory.create(e,r),this.cache[t]=i),n&&a(i.context),i},clear:function(){for(var t in this.cache){var e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}},t}(),l=function(){function t(){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=n.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=n.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.resumeSMaskCtx=null}return t.prototype={clone:function(){return Object.create(this)},setCurrentPoint:function(t,e){this.x=t,this.y=e}},t}(),c=function(){function t(t,e,r,n,i,o){this.ctx=t,this.current=new l,this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=r,this.canvasFactory=n,this.webGLContext=i,this.imageLayer=o,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.cachedCanvases=new s(this.canvasFactory),t&&a(t),this._cachedGetSinglePixelWidth=null}function e(t,e){if("undefined"!=typeof ImageData&&e instanceof ImageData)t.putImageData(e,0,0);else{var r,i,a,s,l,c=e.height,u=e.width,h=c%16,d=(c-h)/16,f=0===h?d:d+1,p=t.createImageData(u,16),g=0,v=e.data,y=p.data;if(e.kind===n.ImageKind.GRAYSCALE_1BPP){var m=v.byteLength,_=new Uint32Array(y.buffer,0,y.byteLength>>2),b=_.length,w=u+7>>3,S=4294967295,A=o.value?4278190080:255;for(i=0;i<f;i++){for(s=i<d?16:h,r=0,a=0;a<s;a++){for(var k=m-g,x=0,C=k>w?u:8*k-7,P=-8&C,R=0,T=0;x<P;x+=8)T=v[g++],_[r++]=128&T?S:A,_[r++]=64&T?S:A,_[r++]=32&T?S:A,_[r++]=16&T?S:A,_[r++]=8&T?S:A,_[r++]=4&T?S:A,_[r++]=2&T?S:A,_[r++]=1&T?S:A;for(;x<C;x++)0===R&&(T=v[g++],R=128),_[r++]=T&R?S:A,R>>=1}for(;r<b;)_[r++]=0;t.putImageData(p,0,16*i)}}else if(e.kind===n.ImageKind.RGBA_32BPP){for(a=0,l=16*u*4,i=0;i<d;i++)y.set(v.subarray(g,g+l)),g+=l,t.putImageData(p,0,a),a+=16;i<f&&(l=u*h*4,y.set(v.subarray(g,g+l)),t.putImageData(p,0,a))}else{if(e.kind!==n.ImageKind.RGB_24BPP)throw new Error("bad image kind: ".concat(e.kind));for(l=u*(s=16),i=0;i<f;i++){for(i>=d&&(l=u*(s=h)),r=0,a=l;a--;)y[r++]=v[g++],y[r++]=v[g++],y[r++]=v[g++],y[r++]=255;t.putImageData(p,0,16*i)}}}}function r(t,e){for(var r=e.height,n=e.width,i=r%16,o=(r-i)/16,a=0===i?o:o+1,s=t.createImageData(n,16),l=0,c=e.data,u=s.data,h=0;h<a;h++){for(var d=h<o?16:i,f=3,p=0;p<d;p++)for(var g=0,v=0;v<n;v++){if(!g){var y=c[l++];g=128}u[f]=y&g?0:255,f+=4,g>>=1}t.putImageData(s,0,16*h)}}function c(t,e){for(var r=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"],n=0,i=r.length;n<i;n++){var o=r[n];void 0!==t[o]&&(e[o]=t[o])}void 0!==t.setLineDash&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function u(t){t.strokeStyle="#000000",t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",void 0!==t.setLineDash&&(t.setLineDash([]),t.lineDashOffset=0)}function h(t,e,r,n){for(var i=t.length,o=3;o<i;o+=4){var a=t[o];if(0===a)t[o-3]=e,t[o-2]=r,t[o-1]=n;else if(a<255){var s=255-a;t[o-3]=t[o-3]*a+e*s>>8,t[o-2]=t[o-2]*a+r*s>>8,t[o-1]=t[o-1]*a+n*s>>8}}}function d(t,e,r){for(var n=t.length,i=3;i<n;i+=4){var o=r?r[t[i]]:t[i];e[i]=e[i]*o*(1/255)|0}}function f(t,e,r){for(var n=t.length,i=3;i<n;i+=4){var o=77*t[i-3]+152*t[i-2]+28*t[i-1];e[i]=r?e[i]*r[o>>8]>>8:e[i]*o>>16}}function p(t,e,r,n){var i=e.canvas,o=e.context;t.setTransform(e.scaleX,0,0,e.scaleY,e.offsetX,e.offsetY);var a=e.backdrop||null;if(!e.transferMap&&n.isEnabled){var s=n.composeSMask({layer:r.canvas,mask:i,properties:{subtype:e.subtype,backdrop:a}});return t.setTransform(1,0,0,1,0,0),void t.drawImage(s,e.offsetX,e.offsetY)}!function(t,e,r,n,i,o,a){var s,l=!!o,c=l?o[0]:0,u=l?o[1]:0,p=l?o[2]:0;s="Luminosity"===i?f:d;for(var g=Math.min(n,Math.ceil(1048576/r)),v=0;v<n;v+=g){var y=Math.min(g,n-v),m=t.getImageData(0,v,r,y),_=e.getImageData(0,v,r,y);l&&h(m.data,c,u,p),s(m.data,_.data,a),t.putImageData(_,0,v)}}(o,r,i.width,i.height,e.subtype,a,e.transferMap),t.drawImage(i,0,0)}var g=["butt","round","square"],v=["miter","round","bevel"],y={},m={};for(var _ in t.prototype={beginDrawing:function(t){var e=t.transform,r=t.viewport,n=t.transparency,i=void 0!==n&&n,o=t.background,a=void 0===o?null:o,s=this.ctx.canvas.width,l=this.ctx.canvas.height;if(this.ctx.save(),this.ctx.fillStyle=a||"rgb(255, 255, 255)",this.ctx.fillRect(0,0,s,l),this.ctx.restore(),i){var c=this.cachedCanvases.getCanvas("transparent",s,l,!0);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),u(this.ctx),e&&this.ctx.transform.apply(this.ctx,e),this.ctx.transform.apply(this.ctx,r.transform),this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()},executeOperatorList:function(t,e,r,i){var o=t.argsArray,a=t.fnArray,s=e||0,l=o.length;if(l===s)return s;for(var c,u=l-s>10&&"function"==typeof r,h=u?Date.now()+15:0,d=0,f=this.commonObjs,p=this.objs;;){if(void 0!==i&&s===i.nextBreakPoint)return i.breakIt(s,r),s;if((c=a[s])!==n.OPS.dependency)this[c].apply(this,o[s]);else{var g=!0,v=!1,y=void 0;try{for(var m,_=o[s][Symbol.iterator]();!(g=(m=_.next()).done);g=!0){var b=m.value,w=b.startsWith("g_")?f:p;if(!w.has(b))return w.get(b,r),s}}catch(t){v=!0,y=t}finally{try{g||null==_.return||_.return()}finally{if(v)throw y}}}if(++s===l)return s;if(u&&++d>10){if(Date.now()>h)return r(),s;d=0}}},endDrawing:function(){null!==this.current.activeSMask&&this.endSMaskGroup(),this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.webGLContext.clear(),this.imageLayer&&this.imageLayer.endLayout()},setLineWidth:function(t){this.current.lineWidth=t,this.ctx.lineWidth=t},setLineCap:function(t){this.ctx.lineCap=g[t]},setLineJoin:function(t){this.ctx.lineJoin=v[t]},setMiterLimit:function(t){this.ctx.miterLimit=t},setDash:function(t,e){var r=this.ctx;void 0!==r.setLineDash&&(r.setLineDash(t),r.lineDashOffset=e)},setRenderingIntent:function(t){},setFlatness:function(t){},setGState:function(t){for(var e=0,r=t.length;e<r;e++){var n=t[e],i=n[0],o=n[1];switch(i){case"LW":this.setLineWidth(o);break;case"LC":this.setLineCap(o);break;case"LJ":this.setLineJoin(o);break;case"ML":this.setMiterLimit(o);break;case"D":this.setDash(o[0],o[1]);break;case"RI":this.setRenderingIntent(o);break;case"FL":this.setFlatness(o);break;case"Font":this.setFont(o[0],o[1]);break;case"CA":this.current.strokeAlpha=n[1];break;case"ca":this.current.fillAlpha=n[1],this.ctx.globalAlpha=n[1];break;case"BM":this.ctx.globalCompositeOperation=o;break;case"SMask":this.current.activeSMask&&(this.stateStack.length>0&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask?this.suspendSMaskGroup():this.endSMaskGroup()),this.current.activeSMask=o?this.tempSMask:null,this.current.activeSMask&&this.beginSMaskGroup(),this.tempSMask=null}}},beginSMaskGroup:function(){var t=this.current.activeSMask,e=t.canvas.width,r=t.canvas.height,n="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(n,e,r,!0),o=this.ctx,a=o.mozCurrentTransform;this.ctx.save();var s=i.context;s.scale(1/t.scaleX,1/t.scaleY),s.translate(-t.offsetX,-t.offsetY),s.transform.apply(s,a),t.startTransformInverse=s.mozCurrentTransformInverse,c(o,s),this.ctx=s,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(o),this.groupLevel++},suspendSMaskGroup:function(){var t=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),p(this.ctx,this.current.activeSMask,t,this.webGLContext),this.ctx.restore(),this.ctx.save(),c(t,this.ctx),this.current.resumeSMaskCtx=t;var e=n.Util.transform(this.current.activeSMask.startTransformInverse,t.mozCurrentTransform);this.ctx.transform.apply(this.ctx,e),t.save(),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,t.canvas.width,t.canvas.height),t.restore()},resumeSMaskGroup:function(){var t=this.current.resumeSMaskCtx,e=this.ctx;this.ctx=t,this.groupStack.push(e),this.groupLevel++},endSMaskGroup:function(){var t=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),p(this.ctx,this.current.activeSMask,t,this.webGLContext),this.ctx.restore(),c(t,this.ctx);var e=n.Util.transform(this.current.activeSMask.startTransformInverse,t.mozCurrentTransform);this.ctx.transform.apply(this.ctx,e)},save:function(){this.ctx.save();var t=this.current;this.stateStack.push(t),this.current=t.clone(),this.current.resumeSMaskCtx=null},restore:function(){this.current.resumeSMaskCtx&&this.resumeSMaskGroup(),null===this.current.activeSMask||0!==this.stateStack.length&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask||this.endSMaskGroup(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.ctx.restore(),this.pendingClip=null,this._cachedGetSinglePixelWidth=null)},transform:function(t,e,r,n,i,o){this.ctx.transform(t,e,r,n,i,o),this._cachedGetSinglePixelWidth=null},constructPath:function(t,e){for(var r=this.ctx,i=this.current,o=i.x,a=i.y,s=0,l=0,c=t.length;s<c;s++)switch(0|t[s]){case n.OPS.rectangle:o=e[l++],a=e[l++];var u=e[l++],h=e[l++];0===u&&(u=this.getSinglePixelWidth()),0===h&&(h=this.getSinglePixelWidth());var d=o+u,f=a+h;this.ctx.moveTo(o,a),this.ctx.lineTo(d,a),this.ctx.lineTo(d,f),this.ctx.lineTo(o,f),this.ctx.lineTo(o,a),this.ctx.closePath();break;case n.OPS.moveTo:o=e[l++],a=e[l++],r.moveTo(o,a);break;case n.OPS.lineTo:o=e[l++],a=e[l++],r.lineTo(o,a);break;case n.OPS.curveTo:o=e[l+4],a=e[l+5],r.bezierCurveTo(e[l],e[l+1],e[l+2],e[l+3],o,a),l+=6;break;case n.OPS.curveTo2:r.bezierCurveTo(o,a,e[l],e[l+1],e[l+2],e[l+3]),o=e[l+2],a=e[l+3],l+=4;break;case n.OPS.curveTo3:o=e[l+2],a=e[l+3],r.bezierCurveTo(e[l],e[l+1],o,a,o,a),l+=4;break;case n.OPS.closePath:r.closePath()}i.setCurrentPoint(o,a)},closePath:function(){this.ctx.closePath()},stroke:function(t){t=void 0===t||t;var e=this.ctx,r=this.current.strokeColor;e.lineWidth=Math.max(.65*this.getSinglePixelWidth(),this.current.lineWidth),e.globalAlpha=this.current.strokeAlpha,r&&r.hasOwnProperty("type")&&"Pattern"===r.type?(e.save(),e.strokeStyle=r.getPattern(e,this),e.stroke(),e.restore()):e.stroke(),t&&this.consumePath(),e.globalAlpha=this.current.fillAlpha},closeStroke:function(){this.closePath(),this.stroke()},fill:function(t){t=void 0===t||t;var e=this.ctx,r=this.current.fillColor,n=!1;this.current.patternFill&&(e.save(),this.baseTransform&&e.setTransform.apply(e,this.baseTransform),e.fillStyle=r.getPattern(e,this),n=!0),this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill(),n&&e.restore(),t&&this.consumePath()},eoFill:function(){this.pendingEOFill=!0,this.fill()},fillStroke:function(){this.fill(!1),this.stroke(!1),this.consumePath()},eoFillStroke:function(){this.pendingEOFill=!0,this.fillStroke()},closeFillStroke:function(){this.closePath(),this.fillStroke()},closeEOFillStroke:function(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()},endPath:function(){this.consumePath()},clip:function(){this.pendingClip=y},eoClip:function(){this.pendingClip=m},beginText:function(){this.current.textMatrix=n.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},endText:function(){var t=this.pendingTextPaths,e=this.ctx;if(void 0!==t){e.save(),e.beginPath();for(var r=0;r<t.length;r++){var n=t[r];e.setTransform.apply(e,n.transform),e.translate(n.x,n.y),n.addToPath(e,n.fontSize)}e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}else e.beginPath()},setCharSpacing:function(t){this.current.charSpacing=t},setWordSpacing:function(t){this.current.wordSpacing=t},setHScale:function(t){this.current.textHScale=t/100},setLeading:function(t){this.current.leading=-t},setFont:function(t,e){var r=this.commonObjs.get(t),i=this.current;if(!r)throw new Error("Can't find font for ".concat(t));if(i.fontMatrix=r.fontMatrix?r.fontMatrix:n.FONT_IDENTITY_MATRIX,0!==i.fontMatrix[0]&&0!==i.fontMatrix[3]||(0,n.warn)("Invalid font matrix for font "+t),e<0?(e=-e,i.fontDirection=-1):i.fontDirection=1,this.current.font=r,this.current.fontSize=e,!r.isType3Font){var o=r.loadedName||"sans-serif",a=r.black?"900":r.bold?"bold":"normal",s=r.italic?"italic":"normal",l='"'.concat(o,'", ').concat(r.fallbackName),c=e<16?16:e>100?100:e;this.current.fontSizeScale=e/c,this.ctx.font="".concat(s," ").concat(a," ").concat(c,"px ").concat(l)}},setTextRenderingMode:function(t){this.current.textRenderingMode=t},setTextRise:function(t){this.current.textRise=t},moveText:function(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e},setLeadingMoveText:function(t,e){this.setLeading(-e),this.moveText(t,e)},setTextMatrix:function(t,e,r,n,i,o){this.current.textMatrix=[t,e,r,n,i,o],this.current.textMatrixScale=Math.sqrt(t*t+e*e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},nextLine:function(){this.moveText(0,this.current.leading)},paintChar:function(t,e,r,i){var o,a=this.ctx,s=this.current,l=s.font,c=s.textRenderingMode,u=s.fontSize/s.fontSizeScale,h=c&n.TextRenderingMode.FILL_STROKE_MASK,d=!!(c&n.TextRenderingMode.ADD_TO_PATH_FLAG),f=s.patternFill&&l.data;(l.disableFontFace||d||f)&&(o=l.getPathGenerator(this.commonObjs,t)),l.disableFontFace||f?(a.save(),a.translate(e,r),a.beginPath(),o(a,u),i&&a.setTransform.apply(a,i),h!==n.TextRenderingMode.FILL&&h!==n.TextRenderingMode.FILL_STROKE||a.fill(),h!==n.TextRenderingMode.STROKE&&h!==n.TextRenderingMode.FILL_STROKE||a.stroke(),a.restore()):(h!==n.TextRenderingMode.FILL&&h!==n.TextRenderingMode.FILL_STROKE||a.fillText(t,e,r),h!==n.TextRenderingMode.STROKE&&h!==n.TextRenderingMode.FILL_STROKE||a.strokeText(t,e,r)),d&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:a.mozCurrentTransform,x:e,y:r,fontSize:u,addToPath:o})},get isFontSubpixelAAEnabled(){var t=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10).context;t.scale(1.5,1),t.fillText("I",0,10);for(var e=t.getImageData(0,0,10,10).data,r=!1,i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){r=!0;break}return(0,n.shadow)(this,"isFontSubpixelAAEnabled",r)},showText:function(t){var e=this.current,r=e.font;if(r.isType3Font)return this.showType3Text(t);var i=e.fontSize;if(0!==i){var o,a=this.ctx,s=e.fontSizeScale,l=e.charSpacing,c=e.wordSpacing,u=e.fontDirection,h=e.textHScale*u,d=t.length,f=r.vertical,p=f?1:-1,g=r.defaultVMetrics,v=i*e.fontMatrix[0],y=e.textRenderingMode===n.TextRenderingMode.FILL&&!r.disableFontFace&&!e.patternFill;if(a.save(),e.patternFill){a.save();var m=e.fillColor.getPattern(a,this);o=a.mozCurrentTransform,a.restore(),a.fillStyle=m}a.transform.apply(a,e.textMatrix),a.translate(e.x,e.y+e.textRise),u>0?a.scale(h,-1):a.scale(h,1);var _=e.lineWidth,b=e.textMatrixScale;if(0===b||0===_){var w=e.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;w!==n.TextRenderingMode.STROKE&&w!==n.TextRenderingMode.FILL_STROKE||(this._cachedGetSinglePixelWidth=null,_=.65*this.getSinglePixelWidth())}else _/=b;1!==s&&(a.scale(s,s),_/=s),a.lineWidth=_;var S,A=0;for(S=0;S<d;++S){var k=t[S];if((0,n.isNum)(k))A+=p*k*i/1e3;else{var x,C,P,R,T,E,O,F=!1,I=(k.isSpace?c:0)+l,M=k.fontChar,L=k.accent,D=k.width;if(f?(T=k.vmetric||g,E=-(E=k.vmetric?T[1]:.5*D)*v,O=T[2]*v,D=T?-T[0]:D,x=E/s,C=(A+O)/s):(x=A/s,C=0),r.remeasure&&D>0){var N=1e3*a.measureText(M).width/i*s;if(D<N&&this.isFontSubpixelAAEnabled){var j=D/N;F=!0,a.save(),a.scale(j,1),x/=j}else D!==N&&(x+=(D-N)/2e3*i/s)}(k.isInFont||r.missingFile)&&(y&&!L?a.fillText(M,x,C):(this.paintChar(M,x,C,o),L&&(P=x+L.offset.x/s,R=C-L.offset.y/s,this.paintChar(L.fontChar,P,R,o)))),A+=D*v+I*u,F&&a.restore()}}f?e.y-=A*h:e.x+=A*h,a.restore()}},showType3Text:function(t){var e,r,i,o,a=this.ctx,s=this.current,l=s.font,c=s.fontSize,u=s.fontDirection,h=l.vertical?1:-1,d=s.charSpacing,f=s.wordSpacing,p=s.textHScale*u,g=s.fontMatrix||n.FONT_IDENTITY_MATRIX,v=t.length;if(s.textRenderingMode!==n.TextRenderingMode.INVISIBLE&&0!==c){for(this._cachedGetSinglePixelWidth=null,a.save(),a.transform.apply(a,s.textMatrix),a.translate(s.x,s.y),a.scale(p,u),e=0;e<v;++e)if(r=t[e],(0,n.isNum)(r))o=h*r*c/1e3,this.ctx.translate(o,0),s.x+=o*p;else{var y=(r.isSpace?f:0)+d,m=l.charProcOperatorList[r.operatorListId];m?(this.processingType3=r,this.save(),a.scale(c,c),a.transform.apply(a,g),this.executeOperatorList(m),this.restore(),i=n.Util.applyTransform([r.width,0],g)[0]*c+y,a.translate(i,0),s.x+=i*p):(0,n.warn)('Type3 character "'.concat(r.operatorListId,'" is not available.'))}a.restore(),this.processingType3=null}},setCharWidth:function(t,e){},setCharWidthAndBounds:function(t,e,r,n,i,o){this.ctx.rect(r,n,i-r,o-n),this.clip(),this.endPath()},getColorN_Pattern:function(e){var r,n=this;if("TilingPattern"===e[0]){var o=e[1],a=this.baseTransform||this.ctx.mozCurrentTransform.slice(),s={createCanvasGraphics:function(e){return new t(e,n.commonObjs,n.objs,n.canvasFactory,n.webGLContext)}};r=new i.TilingPattern(e,o,this.ctx,s,a)}else r=(0,i.getShadingPatternFromIR)(e);return r},setStrokeColorN:function(){this.current.strokeColor=this.getColorN_Pattern(arguments)},setFillColorN:function(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0},setStrokeRGBColor:function(t,e,r){var i=n.Util.makeCssRgb(t,e,r);this.ctx.strokeStyle=i,this.current.strokeColor=i},setFillRGBColor:function(t,e,r){var i=n.Util.makeCssRgb(t,e,r);this.ctx.fillStyle=i,this.current.fillColor=i,this.current.patternFill=!1},shadingFill:function(t){var e=this.ctx;this.save();var r=(0,i.getShadingPatternFromIR)(t);e.fillStyle=r.getPattern(e,this,!0);var o=e.mozCurrentTransformInverse;if(o){var a=e.canvas,s=a.width,l=a.height,c=n.Util.applyTransform([0,0],o),u=n.Util.applyTransform([0,l],o),h=n.Util.applyTransform([s,0],o),d=n.Util.applyTransform([s,l],o),f=Math.min(c[0],u[0],h[0],d[0]),p=Math.min(c[1],u[1],h[1],d[1]),g=Math.max(c[0],u[0],h[0],d[0]),v=Math.max(c[1],u[1],h[1],d[1]);this.ctx.fillRect(f,p,g-f,v-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.restore()},beginInlineImage:function(){(0,n.unreachable)("Should not call beginInlineImage")},beginImageData:function(){(0,n.unreachable)("Should not call beginImageData")},paintFormXObjectBegin:function(t,e){if(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(t)&&6===t.length&&this.transform.apply(this,t),this.baseTransform=this.ctx.mozCurrentTransform,e){var r=e[2]-e[0],n=e[3]-e[1];this.ctx.rect(e[0],e[1],r,n),this.clip(),this.endPath()}},paintFormXObjectEnd:function(){this.restore(),this.baseTransform=this.baseTransformStack.pop()},beginGroup:function(t){this.save();var e=this.ctx;t.isolated||(0,n.info)("TODO: Support non-isolated groups."),t.knockout&&(0,n.warn)("Knockout groups not supported.");var r=e.mozCurrentTransform;if(t.matrix&&e.transform.apply(e,t.matrix),!t.bbox)throw new Error("Bounding box is required.");var i=n.Util.getAxialAlignedBoundingBox(t.bbox,e.mozCurrentTransform),o=[0,0,e.canvas.width,e.canvas.height];i=n.Util.intersect(i,o)||[0,0,0,0];var a=Math.floor(i[0]),s=Math.floor(i[1]),l=Math.max(Math.ceil(i[2])-a,1),u=Math.max(Math.ceil(i[3])-s,1),h=1,d=1;l>4096&&(h=l/4096,l=4096),u>4096&&(d=u/4096,u=4096);var f="groupAt"+this.groupLevel;t.smask&&(f+="_smask_"+this.smaskCounter++%2);var p=this.cachedCanvases.getCanvas(f,l,u,!0),g=p.context;g.scale(1/h,1/d),g.translate(-a,-s),g.transform.apply(g,r),t.smask?this.smaskStack.push({canvas:p.canvas,context:g,offsetX:a,offsetY:s,scaleX:h,scaleY:d,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(a,s),e.scale(h,d)),c(e,g),this.ctx=g,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++,this.current.activeSMask=null},endGroup:function(t){this.groupLevel--;var e=this.ctx;this.ctx=this.groupStack.pop(),void 0!==this.ctx.imageSmoothingEnabled?this.ctx.imageSmoothingEnabled=!1:this.ctx.mozImageSmoothingEnabled=!1,t.smask?this.tempSMask=this.smaskStack.pop():this.ctx.drawImage(e.canvas,0,0),this.restore()},beginAnnotations:function(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)},endAnnotations:function(){this.restore()},beginAnnotation:function(t,e,r){if(this.save(),u(this.ctx),this.current=new l,Array.isArray(t)&&4===t.length){var n=t[2]-t[0],i=t[3]-t[1];this.ctx.rect(t[0],t[1],n,i),this.clip(),this.endPath()}this.transform.apply(this,e),this.transform.apply(this,r)},endAnnotation:function(){this.restore()},paintJpegXObject:function(t,e,r){var i=this.processingType3?this.commonObjs.get(t):this.objs.get(t);if(i){this.save();var o=this.ctx;if(o.scale(1/e,-1/r),o.drawImage(i,0,0,i.width,i.height,0,-r,e,r),this.imageLayer){var a=o.mozCurrentTransformInverse,s=this.getCanvasPosition(0,0);this.imageLayer.appendImage({objId:t,left:s[0],top:s[1],width:e/a[0],height:r/a[3]})}this.restore()}else(0,n.warn)("Dependent image isn't ready yet")},paintImageMaskXObject:function(t){var e=this.ctx,n=t.width,i=t.height,o=this.current.fillColor,a=this.current.patternFill,s=this.processingType3;if(s&&void 0===s.compiled&&(s.compiled=n<=1e3&&i<=1e3?function(t){var e,r,n,i,o=t.width,a=t.height,s=o+1,l=new Uint8Array(s*(a+1)),c=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),u=o+7&-8,h=t.data,d=new Uint8Array(u*a),f=0;for(e=0,i=h.length;e<i;e++)for(var p=128,g=h[e];p>0;)d[f++]=g&p?0:255,p>>=1;var v=0;for(0!==d[f=0]&&(l[0]=1,++v),r=1;r<o;r++)d[f]!==d[f+1]&&(l[r]=d[f]?2:1,++v),f++;for(0!==d[f]&&(l[r]=2,++v),e=1;e<a;e++){n=e*s,d[(f=e*u)-u]!==d[f]&&(l[n]=d[f]?1:8,++v);var y=(d[f]?4:0)+(d[f-u]?8:0);for(r=1;r<o;r++)c[y=(y>>2)+(d[f+1]?4:0)+(d[f-u+1]?8:0)]&&(l[n+r]=c[y],++v),f++;if(d[f-u]!==d[f]&&(l[n+r]=d[f]?2:4,++v),v>1e3)return null}for(n=e*s,0!==d[f=u*(a-1)]&&(l[n]=8,++v),r=1;r<o;r++)d[f]!==d[f+1]&&(l[n+r]=d[f]?4:8,++v),f++;if(0!==d[f]&&(l[n+r]=4,++v),v>1e3)return null;var m=new Int32Array([0,s,-1,0,-s,0,0,0,1]),_=[];for(e=0;v&&e<=a;e++){for(var b=e*s,w=b+o;b<w&&!l[b];)b++;if(b!==w){var S,A=[b%s,e],k=l[b],x=b;do{var C=m[k];do{b+=C}while(!l[b]);5!==(S=l[b])&&10!==S?(k=S,l[b]=0):(k=S&51*k>>4,l[b]&=k>>2|k<<2),A.push(b%s),A.push(b/s|0),l[b]||--v}while(x!==b);_.push(A),--e}}return function(t){t.save(),t.scale(1/o,-1/a),t.translate(0,-a),t.beginPath();for(var e=0,r=_.length;e<r;e++){var n=_[e];t.moveTo(n[0],n[1]);for(var i=2,s=n.length;i<s;i+=2)t.lineTo(n[i],n[i+1])}t.fill(),t.beginPath(),t.restore()}}({data:t.data,width:n,height:i}):null),s&&s.compiled)s.compiled(e);else{var l=this.cachedCanvases.getCanvas("maskCanvas",n,i),c=l.context;c.save(),r(c,t),c.globalCompositeOperation="source-in",c.fillStyle=a?o.getPattern(c,this):o,c.fillRect(0,0,n,i),c.restore(),this.paintInlineImageXObject(l.canvas)}},paintImageMaskXObjectRepeat:function(t,e,n,i){var o=t.width,a=t.height,s=this.current.fillColor,l=this.current.patternFill,c=this.cachedCanvases.getCanvas("maskCanvas",o,a),u=c.context;u.save(),r(u,t),u.globalCompositeOperation="source-in",u.fillStyle=l?s.getPattern(u,this):s,u.fillRect(0,0,o,a),u.restore();for(var h=this.ctx,d=0,f=i.length;d<f;d+=2)h.save(),h.transform(e,0,0,n,i[d],i[d+1]),h.scale(1,-1),h.drawImage(c.canvas,0,0,o,a,0,-1,1,1),h.restore()},paintImageMaskXObjectGroup:function(t){for(var e=this.ctx,n=this.current.fillColor,i=this.current.patternFill,o=0,a=t.length;o<a;o++){var s=t[o],l=s.width,c=s.height,u=this.cachedCanvases.getCanvas("maskCanvas",l,c),h=u.context;h.save(),r(h,s),h.globalCompositeOperation="source-in",h.fillStyle=i?n.getPattern(h,this):n,h.fillRect(0,0,l,c),h.restore(),e.save(),e.transform.apply(e,s.transform),e.scale(1,-1),e.drawImage(u.canvas,0,0,l,c,0,-1,1,1),e.restore()}},paintImageXObject:function(t){var e=this.processingType3?this.commonObjs.get(t):this.objs.get(t);e?this.paintInlineImageXObject(e):(0,n.warn)("Dependent image isn't ready yet")},paintImageXObjectRepeat:function(t,e,r,i){var o=this.processingType3?this.commonObjs.get(t):this.objs.get(t);if(o){for(var a=o.width,s=o.height,l=[],c=0,u=i.length;c<u;c+=2)l.push({transform:[e,0,0,r,i[c],i[c+1]],x:0,y:0,w:a,h:s});this.paintInlineImageXObjectGroup(o,l)}else(0,n.warn)("Dependent image isn't ready yet")},paintInlineImageXObject:function(t){var r=t.width,n=t.height,i=this.ctx;this.save(),i.scale(1/r,-1/n);var o,a,s=i.mozCurrentTransformInverse,l=s[0],c=s[1],u=Math.max(Math.sqrt(l*l+c*c),1),h=s[2],d=s[3],f=Math.max(Math.sqrt(h*h+d*d),1);if("function"==typeof HTMLElement&&t instanceof HTMLElement||!t.data)o=t;else{var p=(a=this.cachedCanvases.getCanvas("inlineImage",r,n)).context;e(p,t),o=a.canvas}for(var g=r,v=n,y="prescale1";u>2&&g>1||f>2&&v>1;){var m=g,_=v;u>2&&g>1&&(u/=g/(m=Math.ceil(g/2))),f>2&&v>1&&(f/=v/(_=Math.ceil(v/2))),(p=(a=this.cachedCanvases.getCanvas(y,m,_)).context).clearRect(0,0,m,_),p.drawImage(o,0,0,g,v,0,0,m,_),o=a.canvas,g=m,v=_,y="prescale1"===y?"prescale2":"prescale1"}if(i.drawImage(o,0,0,g,v,0,-n,r,n),this.imageLayer){var b=this.getCanvasPosition(0,-n);this.imageLayer.appendImage({imgData:t,left:b[0],top:b[1],width:r/s[0],height:n/s[3]})}this.restore()},paintInlineImageXObjectGroup:function(t,r){var n=this.ctx,i=t.width,o=t.height,a=this.cachedCanvases.getCanvas("inlineImage",i,o);e(a.context,t);for(var s=0,l=r.length;s<l;s++){var c=r[s];if(n.save(),n.transform.apply(n,c.transform),n.scale(1,-1),n.drawImage(a.canvas,c.x,c.y,c.w,c.h,0,-1,1,1),this.imageLayer){var u=this.getCanvasPosition(c.x,c.y);this.imageLayer.appendImage({imgData:t,left:u[0],top:u[1],width:i,height:o})}n.restore()}},paintSolidColorImageMask:function(){this.ctx.fillRect(0,0,1,1)},paintXObject:function(){(0,n.warn)("Unsupported 'paintXObject' command.")},markPoint:function(t){},markPointProps:function(t,e){},beginMarkedContent:function(t){},beginMarkedContentProps:function(t,e){},endMarkedContent:function(){},beginCompat:function(){},endCompat:function(){},consumePath:function(){var t=this.ctx;this.pendingClip&&(this.pendingClip===m?t.clip("evenodd"):t.clip(),this.pendingClip=null),t.beginPath()},getSinglePixelWidth:function(t){if(null===this._cachedGetSinglePixelWidth){var e=this.ctx.mozCurrentTransformInverse;this._cachedGetSinglePixelWidth=Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1],e[2]*e[2]+e[3]*e[3]))}return this._cachedGetSinglePixelWidth},getCanvasPosition:function(t,e){var r=this.ctx.mozCurrentTransform;return[r[0]*t+r[2]*e+r[4],r[1]*t+r[3]*e+r[5]]}},n.OPS)t.prototype[n.OPS[_]]=t.prototype[_];return t}();e.CanvasGraphics=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getShadingPatternFromIR=function(t){var e=i[t[0]];if(!e)throw new Error("Unknown IR type: ".concat(t[0]));return e.fromIR(t)},e.TilingPattern=void 0;var n=r(1),i={RadialAxial:{fromIR:function(t){var e=t[1],r=t[2],n=t[3],i=t[4],o=t[5],a=t[6];return{type:"Pattern",getPattern:function(t){var s;"axial"===e?s=t.createLinearGradient(n[0],n[1],i[0],i[1]):"radial"===e&&(s=t.createRadialGradient(n[0],n[1],o,i[0],i[1],a));for(var l=0,c=r.length;l<c;++l){var u=r[l];s.addColorStop(u[0],u[1])}return s}}}}},o=function(){function t(t,e,r,n,i,o,a,s){var l,c=e.coords,u=e.colors,h=t.data,d=4*t.width;c[r+1]>c[n+1]&&(l=r,r=n,n=l,l=o,o=a,a=l),c[n+1]>c[i+1]&&(l=n,n=i,i=l,l=a,a=s,s=l),c[r+1]>c[n+1]&&(l=r,r=n,n=l,l=o,o=a,a=l);var f=(c[r]+e.offsetX)*e.scaleX,p=(c[r+1]+e.offsetY)*e.scaleY,g=(c[n]+e.offsetX)*e.scaleX,v=(c[n+1]+e.offsetY)*e.scaleY,y=(c[i]+e.offsetX)*e.scaleX,m=(c[i+1]+e.offsetY)*e.scaleY;if(!(p>=m))for(var _,b,w,S,A,k,x,C,P,R=u[o],T=u[o+1],E=u[o+2],O=u[a],F=u[a+1],I=u[a+2],M=u[s],L=u[s+1],D=u[s+2],N=Math.round(p),j=Math.round(m),U=N;U<=j;U++){U<v?(_=f-(f-g)*(P=U<p?0:p===v?1:(p-U)/(p-v)),b=R-(R-O)*P,w=T-(T-F)*P,S=E-(E-I)*P):(_=g-(g-y)*(P=U>m?1:v===m?0:(v-U)/(v-m)),b=O-(O-M)*P,w=F-(F-L)*P,S=I-(I-D)*P),A=f-(f-y)*(P=U<p?0:U>m?1:(p-U)/(p-m)),k=R-(R-M)*P,x=T-(T-L)*P,C=E-(E-D)*P;for(var G=Math.round(Math.min(_,A)),q=Math.round(Math.max(_,A)),B=d*U+4*G,W=G;W<=q;W++)P=(P=(_-W)/(_-A))<0?0:P>1?1:P,h[B++]=b-(b-k)*P|0,h[B++]=w-(w-x)*P|0,h[B++]=S-(S-C)*P|0,h[B++]=255}}function e(e,r,n){var i,o,a=r.coords,s=r.colors;switch(r.type){case"lattice":var l=r.verticesPerRow,c=Math.floor(a.length/l)-1,u=l-1;for(i=0;i<c;i++)for(var h=i*l,d=0;d<u;d++,h++)t(e,n,a[h],a[h+1],a[h+l],s[h],s[h+1],s[h+l]),t(e,n,a[h+l+1],a[h+1],a[h+l],s[h+l+1],s[h+1],s[h+l]);break;case"triangles":for(i=0,o=a.length;i<o;i+=3)t(e,n,a[i],a[i+1],a[i+2],s[i],s[i+1],s[i+2]);break;default:throw new Error("illegal figure")}}return function(t,r,n,i,o,a,s,l){var c,u,h,d,f=Math.floor(t[0]),p=Math.floor(t[1]),g=Math.ceil(t[2])-f,v=Math.ceil(t[3])-p,y=Math.min(Math.ceil(Math.abs(g*r[0]*1.1)),3e3),m=Math.min(Math.ceil(Math.abs(v*r[1]*1.1)),3e3),_=g/y,b=v/m,w={coords:n,colors:i,offsetX:-f,offsetY:-p,scaleX:1/_,scaleY:1/b},S=y+4,A=m+4;if(l.isEnabled)c=l.drawFigures({width:y,height:m,backgroundColor:a,figures:o,context:w}),(u=s.getCanvas("mesh",S,A,!1)).context.drawImage(c,2,2),c=u.canvas;else{var k=(u=s.getCanvas("mesh",S,A,!1)).context,x=k.createImageData(y,m);if(a){var C=x.data;for(h=0,d=C.length;h<d;h+=4)C[h]=a[0],C[h+1]=a[1],C[h+2]=a[2],C[h+3]=255}for(h=0;h<o.length;h++)e(x,o[h],w);k.putImageData(x,2,2),c=u.canvas}return{canvas:c,offsetX:f-2*_,offsetY:p-2*b,scaleX:_,scaleY:b}}}();i.Mesh={fromIR:function(t){var e=t[2],r=t[3],i=t[4],a=t[5],s=t[6],l=t[8];return{type:"Pattern",getPattern:function(t,c,u){var h;if(u)h=n.Util.singularValueDecompose2dScale(t.mozCurrentTransform);else if(h=n.Util.singularValueDecompose2dScale(c.baseTransform),s){var d=n.Util.singularValueDecompose2dScale(s);h=[h[0]*d[0],h[1]*d[1]]}var f=o(a,h,e,r,i,u?null:l,c.cachedCanvases,c.webGLContext);return u||(t.setTransform.apply(t,c.baseTransform),s&&t.transform.apply(t,s)),t.translate(f.offsetX,f.offsetY),t.scale(f.scaleX,f.scaleY),t.createPattern(f.canvas,"no-repeat")}}}},i.Dummy={fromIR:function(){return{type:"Pattern",getPattern:function(){return"hotpink"}}}};var a=function(){var t=1,e=2;function r(t,e,r,n,i){this.operatorList=t[2],this.matrix=t[3]||[1,0,0,1,0,0],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.canvasGraphicsFactory=n,this.baseTransform=i,this.type="Pattern",this.ctx=r}return r.prototype={createPatternCanvas:function(t){var e=this.operatorList,r=this.bbox,i=this.xstep,o=this.ystep,a=this.paintType,s=this.tilingType,l=this.color,c=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+s);var u=r[0],h=r[1],d=r[2],f=r[3],p=n.Util.singularValueDecompose2dScale(this.matrix),g=n.Util.singularValueDecompose2dScale(this.baseTransform),v=[p[0]*g[0],p[1]*g[1]],y=this.getSizeAndScale(i,this.ctx.canvas.width,v[0]),m=this.getSizeAndScale(o,this.ctx.canvas.height,v[1]),_=t.cachedCanvases.getCanvas("pattern",y.size,m.size,!0),b=_.context,w=c.createCanvasGraphics(b);return w.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(w,a,l),w.transform(y.scale,0,0,m.scale,0,0),w.transform(1,0,0,1,-u,-h),this.clipBbox(w,r,u,h,d,f),w.executeOperatorList(e),this.ctx.transform(1,0,0,1,u,h),this.ctx.scale(1/y.scale,1/m.scale),_.canvas},getSizeAndScale:function(t,e,r){t=Math.abs(t);var n=Math.max(3e3,e),i=Math.ceil(t*r);return i>=n?i=n:r=i/t,{scale:r,size:i}},clipBbox:function(t,e,r,n,i,o){if(Array.isArray(e)&&4===e.length){var a=i-r,s=o-n;t.ctx.rect(r,n,a,s),t.clip(),t.endPath()}},setFillAndStrokeStyleToContext:function(r,i,o){var a=r.ctx,s=r.current;switch(i){case t:var l=this.ctx;a.fillStyle=l.fillStyle,a.strokeStyle=l.strokeStyle,s.fillColor=l.fillStyle,s.strokeColor=l.strokeStyle;break;case e:var c=n.Util.makeCssRgb(o[0],o[1],o[2]);a.fillStyle=c,a.strokeStyle=c,s.fillColor=c,s.strokeColor=c;break;default:throw new n.FormatError("Unsupported paint type: ".concat(i))}},getPattern:function(t,e){(t=this.ctx).setTransform.apply(t,this.baseTransform),t.transform.apply(t,this.matrix);var r=this.createPatternCanvas(e);return t.createPattern(r,"repeat")}},r}();e.TilingPattern=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;var n=Object.create(null);e.GlobalWorkerOptions=n,n.workerPort=void 0===n.workerPort?null:n.workerPort,n.workerSrc=void 0===n.workerSrc?"":n.workerSrc},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=p;var n,i=(n=r(148))&&n.__esModule?n:{default:n},o=r(1);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e,r,n,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,i)}function l(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){s(o,n,i,a,l,"next",t)}function l(t){s(o,n,i,a,l,"throw",t)}a(void 0)}))}}function c(t,e){return u.apply(this,arguments)}function u(){return(u=l(i.default.mark((function t(e,r){var n,o=arguments;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=o.length>2&&void 0!==o[2]?o[2]:null,e){t.next=3;break}return t.abrupt("return",void 0);case 3:return t.abrupt("return",e.apply(n,r));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function h(t){if("object"!==a(t))return t;switch(t.name){case"AbortException":return new o.AbortException(t.message);case"MissingPDFException":return new o.MissingPDFException(t.message);case"UnexpectedResponseException":return new o.UnexpectedResponseException(t.message,t.status);default:return new o.UnknownErrorException(t.message,t.details)}}function d(t){return!(t instanceof Error)||t instanceof o.AbortException||t instanceof o.MissingPDFException||t instanceof o.UnexpectedResponseException||t instanceof o.UnknownErrorException?t:new o.UnknownErrorException(t.message,t.toString())}function f(t,e,r){e?t.resolve():t.reject(r)}function p(t,e,r){var n=this;this.sourceName=t,this.targetName=e,this.comObj=r,this.callbackId=1,this.streamId=1,this.postMessageTransfers=!0,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null);var i=this.callbacksCapabilities=Object.create(null),o=this.actionHandler=Object.create(null);this._onComObjOnMessage=function(t){var e=t.data;if(e.targetName===n.sourceName)if(e.stream)n._processStreamMessage(e);else if(e.isReply){var a=e.callbackId;if(!(e.callbackId in i))throw new Error("Cannot resolve callback ".concat(a));var s=i[a];delete i[a],"error"in e?s.reject(h(e.error)):s.resolve(e.data)}else{if(!(e.action in o))throw new Error("Unknown action from worker: ".concat(e.action));var l=o[e.action];if(e.callbackId){var c=n.sourceName,u=e.sourceName;Promise.resolve().then((function(){return l[0].call(l[1],e.data)})).then((function(t){r.postMessage({sourceName:c,targetName:u,isReply:!0,callbackId:e.callbackId,data:t})}),(function(t){r.postMessage({sourceName:c,targetName:u,isReply:!0,callbackId:e.callbackId,error:d(t)})}))}else e.streamId?n._createStreamSink(e):l[0].call(l[1],e.data)}},r.addEventListener("message",this._onComObjOnMessage)}p.prototype={on:function(t,e,r){var n=this.actionHandler;if(n[t])throw new Error('There is already an actionName called "'.concat(t,'"'));n[t]=[e,r]},send:function(t,e,r){var n={sourceName:this.sourceName,targetName:this.targetName,action:t,data:e};this.postMessage(n,r)},sendWithPromise:function(t,e,r){var n=this.callbackId++,i={sourceName:this.sourceName,targetName:this.targetName,action:t,data:e,callbackId:n},a=(0,o.createPromiseCapability)();this.callbacksCapabilities[n]=a;try{this.postMessage(i,r)}catch(t){a.reject(t)}return a.promise},sendWithStream:function(t,e,r,n){var i=this,a=this.streamId++,s=this.sourceName,l=this.targetName;return new o.ReadableStream({start:function(r){var n=(0,o.createPromiseCapability)();return i.streamControllers[a]={controller:r,startCall:n,isClosed:!1},i.postMessage({sourceName:s,targetName:l,action:t,streamId:a,data:e,desiredSize:r.desiredSize}),n.promise},pull:function(t){var e=(0,o.createPromiseCapability)();return i.streamControllers[a].pullCall=e,i.postMessage({sourceName:s,targetName:l,stream:"pull",streamId:a,desiredSize:t.desiredSize}),e.promise},cancel:function(t){var e=(0,o.createPromiseCapability)();return i.streamControllers[a].cancelCall=e,i.streamControllers[a].isClosed=!0,i.postMessage({sourceName:s,targetName:l,stream:"cancel",reason:t,streamId:a}),e.promise}},r)},_createStreamSink:function(t){var e=this,r=this,n=this.actionHandler[t.action],i=t.streamId,a=t.desiredSize,s=this.sourceName,l=t.sourceName,u=(0,o.createPromiseCapability)(),h=function(t){var r=t.stream,n=t.chunk,o=t.transfers,a=t.success,c=t.reason;e.postMessage({sourceName:s,targetName:l,stream:r,streamId:i,chunk:n,success:a,reason:c},o)},d={enqueue:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2?arguments[2]:void 0;if(!this.isCancelled){var n=this.desiredSize;this.desiredSize-=e,n>0&&this.desiredSize<=0&&(this.sinkCapability=(0,o.createPromiseCapability)(),this.ready=this.sinkCapability.promise),h({stream:"enqueue",chunk:t,transfers:r})}},close:function(){this.isCancelled||(this.isCancelled=!0,h({stream:"close"}),delete r.streamSinks[i])},error:function(t){this.isCancelled||(this.isCancelled=!0,h({stream:"error",reason:t}))},sinkCapability:u,onPull:null,onCancel:null,isCancelled:!1,desiredSize:a,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[i]=d,c(n[0],[t.data,d],n[1]).then((function(){h({stream:"start_complete",success:!0})}),(function(t){h({stream:"start_complete",success:!1,reason:t})}))},_processStreamMessage:function(t){var e=this,r=this.sourceName,n=t.sourceName,i=t.streamId,a=function(t){var o=t.stream,a=t.success,s=t.reason;e.comObj.postMessage({sourceName:r,targetName:n,stream:o,success:a,streamId:i,reason:s})},s=function(){Promise.all([e.streamControllers[t.streamId].startCall,e.streamControllers[t.streamId].pullCall,e.streamControllers[t.streamId].cancelCall].map((function(t){return t&&(e=t.promise,Promise.resolve(e).catch((function(){})));var e}))).then((function(){delete e.streamControllers[t.streamId]}))};switch(t.stream){case"start_complete":f(this.streamControllers[t.streamId].startCall,t.success,h(t.reason));break;case"pull_complete":f(this.streamControllers[t.streamId].pullCall,t.success,h(t.reason));break;case"pull":if(!this.streamSinks[t.streamId]){a({stream:"pull_complete",success:!0});break}this.streamSinks[t.streamId].desiredSize<=0&&t.desiredSize>0&&this.streamSinks[t.streamId].sinkCapability.resolve(),this.streamSinks[t.streamId].desiredSize=t.desiredSize,c(this.streamSinks[t.streamId].onPull).then((function(){a({stream:"pull_complete",success:!0})}),(function(t){a({stream:"pull_complete",success:!1,reason:t})}));break;case"enqueue":(0,o.assert)(this.streamControllers[t.streamId],"enqueue should have stream controller"),this.streamControllers[t.streamId].isClosed||this.streamControllers[t.streamId].controller.enqueue(t.chunk);break;case"close":if((0,o.assert)(this.streamControllers[t.streamId],"close should have stream controller"),this.streamControllers[t.streamId].isClosed)break;this.streamControllers[t.streamId].isClosed=!0,this.streamControllers[t.streamId].controller.close(),s();break;case"error":(0,o.assert)(this.streamControllers[t.streamId],"error should have stream controller"),this.streamControllers[t.streamId].controller.error(h(t.reason)),s();break;case"cancel_complete":f(this.streamControllers[t.streamId].cancelCall,t.success,h(t.reason)),s();break;case"cancel":if(!this.streamSinks[t.streamId])break;c(this.streamSinks[t.streamId].onCancel,[h(t.reason)]).then((function(){a({stream:"cancel_complete",success:!0})}),(function(t){a({stream:"cancel_complete",success:!1,reason:t})})),this.streamSinks[t.streamId].sinkCapability.reject(h(t.reason)),this.streamSinks[t.streamId].isCancelled=!0,delete this.streamSinks[t.streamId];break;default:throw new Error("Unexpected stream case")}},postMessage:function(t,e){e&&this.postMessageTransfers?this.comObj.postMessage(t,e):this.comObj.postMessage(t)},destroy:function(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var n=r(1),i=r(159);function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),(0,n.assert)("string"==typeof e,"Metadata: input is not a string"),e=this._repair(e);var r=(new i.SimpleXMLParser).parseFromString(e);this._metadata=Object.create(null),r&&this._parse(r)}var e,r,a;return e=t,(r=[{key:"_repair",value:function(t){return t.replace(/^([^<]+)/,"").replace(/>\\376\\377([^<]+)/g,(function(t,e){for(var r=e.replace(/\\([0-3])([0-7])([0-7])/g,(function(t,e,r,n){return String.fromCharCode(64*e+8*r+1*n)})).replace(/&(amp|apos|gt|lt|quot);/g,(function(t,e){switch(e){case"amp":return"&";case"apos":return"'";case"gt":return">";case"lt":return"<";case"quot":return'"'}throw new Error("_repair: ".concat(e," isn't defined."))})),n="",i=0,o=r.length;i<o;i+=2){var a=256*r.charCodeAt(i)+r.charCodeAt(i+1);n+=a>=32&&a<127&&60!==a&&62!==a&&38!==a?String.fromCharCode(a):"&#x"+(65536+a).toString(16).substring(1)+";"}return">"+n}))}},{key:"_parse",value:function(t){var e=t.documentElement;if("rdf:rdf"!==e.nodeName.toLowerCase())for(e=e.firstChild;e&&"rdf:rdf"!==e.nodeName.toLowerCase();)e=e.nextSibling;var r=e?e.nodeName.toLowerCase():null;if(e&&"rdf:rdf"===r&&e.hasChildNodes())for(var n=e.childNodes,i=0,o=n.length;i<o;i++){var a=n[i];if("rdf:description"===a.nodeName.toLowerCase())for(var s=0,l=a.childNodes.length;s<l;s++)if("#text"!==a.childNodes[s].nodeName.toLowerCase()){var c=a.childNodes[s],u=c.nodeName.toLowerCase();this._metadata[u]=c.textContent.trim()}}}},{key:"get",value:function(t){var e=this._metadata[t];return void 0!==e?e:null}},{key:"getAll",value:function(){return this._metadata}},{key:"has",value:function(t){return void 0!==this._metadata[t]}}])&&o(e.prototype,r),a&&o(e,a),t}();e.Metadata=a},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t,e,r){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),t}Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleXMLParser=void 0;var d=0,f=-2,p=-3,g=-4,v=-5,y=-6,m=-9;function _(t,e){var r=t[e];return" "===r||"\n"===r||"\r"===r||"\t"===r}var b=function(){function t(){c(this,t)}return h(t,[{key:"_resolveEntities",value:function(t){var e=this;return t.replace(/&([^;]+);/g,(function(t,r){if("#x"===r.substring(0,2))return String.fromCharCode(parseInt(r.substring(2),16));if("#"===r.substring(0,1))return String.fromCharCode(parseInt(r.substring(1),10));switch(r){case"lt":return"<";case"gt":return">";case"amp":return"&";case"quot":return'"'}return e.onResolveEntity(r)}))}},{key:"_parseContent",value:function(t,e){var r,n=e,i=[];function o(){for(;n<t.length&&_(t,n);)++n}for(;n<t.length&&!_(t,n)&&">"!==t[n]&&"/"!==t[n];)++n;for(r=t.substring(e,n),o();n<t.length&&">"!==t[n]&&"/"!==t[n]&&"?"!==t[n];){o();for(var a,s="";n<t.length&&!_(t,n)&&"="!==t[n];)s+=t[n],++n;if(o(),"="!==t[n])return null;++n,o();var l=t[n];if('"'!==l&&"'"!==l)return null;var c=t.indexOf(l,++n);if(c<0)return null;a=t.substring(n,c),i.push({name:s,value:this._resolveEntities(a)}),n=c+1,o()}return{name:r,attributes:i,parsed:n-e}}},{key:"_parseProcessingInstruction",value:function(t,e){for(var r,n=e;n<t.length&&!_(t,n)&&">"!==t[n]&&"/"!==t[n];)++n;r=t.substring(e,n),function(){for(;n<t.length&&_(t,n);)++n}();for(var i=n;n<t.length&&("?"!==t[n]||">"!==t[n+1]);)++n;return{name:r,value:t.substring(i,n),parsed:n-e}}},{key:"parseXml",value:function(t){for(var e=0;e<t.length;){var r=e;if("<"===t[e]){var n=void 0;switch(t[++r]){case"/":if(++r,(n=t.indexOf(">",r))<0)return void this.onError(m);this.onEndElement(t.substring(r,n)),r=n+1;break;case"?":++r;var i=this._parseProcessingInstruction(t,r);if("?>"!==t.substring(r+i.parsed,r+i.parsed+2))return void this.onError(p);this.onPi(i.name,i.value),r+=i.parsed+2;break;case"!":if("--"===t.substring(r+1,r+3)){if((n=t.indexOf("--\x3e",r+3))<0)return void this.onError(v);this.onComment(t.substring(r+3,n)),r=n+3}else if("[CDATA["===t.substring(r+1,r+8)){if((n=t.indexOf("]]>",r+8))<0)return void this.onError(f);this.onCdata(t.substring(r+8,n)),r=n+3}else{if("DOCTYPE"!==t.substring(r+1,r+8))return void this.onError(y);var o=t.indexOf("[",r+8),a=!1;if((n=t.indexOf(">",r+8))<0)return void this.onError(g);if(o>0&&n>o){if((n=t.indexOf("]>",r+8))<0)return void this.onError(g);a=!0}var s=t.substring(r+8,n+(a?1:0));this.onDoctype(s),r=n+(a?2:1)}break;default:var l=this._parseContent(t,r);if(null===l)return void this.onError(y);var c=!1;if("/>"===t.substring(r+l.parsed,r+l.parsed+2))c=!0;else if(">"!==t.substring(r+l.parsed,r+l.parsed+1))return void this.onError(m);this.onBeginElement(l.name,l.attributes,c),r+=l.parsed+(c?2:1)}}else{for(;r<t.length&&"<"!==t[r];)r++;var u=t.substring(e,r);this.onText(this._resolveEntities(u))}e=r}}},{key:"onResolveEntity",value:function(t){return"&".concat(t,";")}},{key:"onPi",value:function(t,e){}},{key:"onComment",value:function(t){}},{key:"onCdata",value:function(t){}},{key:"onDoctype",value:function(t){}},{key:"onText",value:function(t){}},{key:"onBeginElement",value:function(t,e,r){}},{key:"onEndElement",value:function(t){}},{key:"onError",value:function(t){}}]),t}(),w=function(){function t(e,r){c(this,t),this.nodeName=e,this.nodeValue=r,Object.defineProperty(this,"parentNode",{value:null,writable:!0})}return h(t,[{key:"hasChildNodes",value:function(){return this.childNodes&&this.childNodes.length>0}},{key:"firstChild",get:function(){return this.childNodes&&this.childNodes[0]}},{key:"nextSibling",get:function(){var t=this.parentNode.childNodes;if(t){var e=t.indexOf(this);if(-1!==e)return t[e+1]}}},{key:"textContent",get:function(){return this.childNodes?this.childNodes.map((function(t){return t.textContent})).join(""):this.nodeValue||""}}]),t}(),S=function(t){function e(){var t;return c(this,e),(t=o(this,s(e).call(this)))._currentFragment=null,t._stack=null,t._errorCode=d,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,t),h(e,[{key:"parseFromString",value:function(t){if(this._currentFragment=[],this._stack=[],this._errorCode=d,this.parseXml(t),this._errorCode===d){var e=i(this._currentFragment,1)[0];if(e)return{documentElement:e}}}},{key:"onResolveEntity",value:function(t){switch(t){case"apos":return"'"}return a(s(e.prototype),"onResolveEntity",this).call(this,t)}},{key:"onText",value:function(t){if(!function(t){for(var e=0,r=t.length;e<r;e++)if(!_(t,e))return!1;return!0}(t)){var e=new w("#text",t);this._currentFragment.push(e)}}},{key:"onCdata",value:function(t){var e=new w("#text",t);this._currentFragment.push(e)}},{key:"onBeginElement",value:function(t,e,r){var n=new w(t);n.childNodes=[],this._currentFragment.push(n),r||(this._stack.push(this._currentFragment),this._currentFragment=n.childNodes)}},{key:"onEndElement",value:function(t){this._currentFragment=this._stack.pop()||[];var e=this._currentFragment[this._currentFragment.length-1];if(e)for(var r=0,n=e.childNodes.length;r<n;r++)e.childNodes[r].parentNode=e}},{key:"onError",value:function(t){this._errorCode=t}}]),e}(b);e.SimpleXMLParser=S},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var n,i=(n=r(148))&&n.__esModule?n:{default:n},o=r(1);function a(t,e,r,n,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,i)}function s(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function s(t){a(o,n,i,s,l,"next",t)}function l(t){a(o,n,i,s,l,"throw",t)}s(void 0)}))}}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,r){return e&&c(t.prototype,e),r&&c(t,r),t}var h=function(){function t(e,r){var n=this;l(this,t),(0,o.assert)(r),this._queuedChunks=[],this._progressiveDone=e.progressiveDone||!1;var i=e.initialData;if(i&&i.length>0){var a=new Uint8Array(i).buffer;this._queuedChunks.push(a)}this._pdfDataRangeTransport=r,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._contentLength=e.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((function(t,e){n._onReceiveData({begin:t,chunk:e})})),this._pdfDataRangeTransport.addProgressListener((function(t,e){n._onProgress({loaded:t,total:e})})),this._pdfDataRangeTransport.addProgressiveReadListener((function(t){n._onReceiveData({chunk:t})})),this._pdfDataRangeTransport.addProgressiveDoneListener((function(){n._onProgressiveDone()})),this._pdfDataRangeTransport.transportReady()}return u(t,[{key:"_onReceiveData",value:function(t){var e=new Uint8Array(t.chunk).buffer;if(void 0===t.begin)this._fullRequestReader?this._fullRequestReader._enqueue(e):this._queuedChunks.push(e);else{var r=this._rangeReaders.some((function(r){return r._begin===t.begin&&(r._enqueue(e),!0)}));(0,o.assert)(r)}}},{key:"_onProgress",value:function(t){if(void 0===t.total){var e=this._rangeReaders[0];e&&e.onProgress&&e.onProgress({loaded:t.loaded})}else{var r=this._fullRequestReader;r&&r.onProgress&&r.onProgress({loaded:t.loaded,total:t.total})}}},{key:"_onProgressiveDone",value:function(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}},{key:"_removeRangeReader",value:function(t){var e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}},{key:"getFullReader",value:function(){(0,o.assert)(!this._fullRequestReader);var t=this._queuedChunks;return this._queuedChunks=null,new d(this,t,this._progressiveDone)}},{key:"getRangeReader",value:function(t,e){if(e<=this._progressiveDataLength)return null;var r=new f(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(r),r}},{key:"cancelAllRequests",value:function(t){this._fullRequestReader&&this._fullRequestReader.cancel(t),this._rangeReaders.slice(0).forEach((function(e){e.cancel(t)})),this._pdfDataRangeTransport.abort()}},{key:"_progressiveDataLength",get:function(){return this._fullRequestReader?this._fullRequestReader._loaded:0}}]),t}();e.PDFDataTransportStream=h;var d=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];l(this,t),this._stream=e,this._done=n||!1,this._filename=null,this._queuedChunks=r||[],this._loaded=0;var i=!0,o=!1,a=void 0;try{for(var s,c=this._queuedChunks[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=s.value;this._loaded+=u.byteLength}}catch(t){o=!0,a=t}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}var e;return u(t,[{key:"_enqueue",value:function(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}},{key:"read",value:(e=s(i.default.mark((function t(){var e,r;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this._queuedChunks.length>0)){t.next=3;break}return e=this._queuedChunks.shift(),t.abrupt("return",{value:e,done:!1});case 3:if(!this._done){t.next=5;break}return t.abrupt("return",{value:void 0,done:!0});case 5:return r=(0,o.createPromiseCapability)(),this._requests.push(r),t.abrupt("return",r.promise);case 8:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"cancel",value:function(t){this._done=!0,this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})})),this._requests=[]}},{key:"progressiveDone",value:function(){this._done||(this._done=!0)}},{key:"headersReady",get:function(){return this._headersReady}},{key:"filename",get:function(){return this._filename}},{key:"isRangeSupported",get:function(){return this._stream._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._stream._isStreamingSupported}},{key:"contentLength",get:function(){return this._stream._contentLength}}]),t}(),f=function(){function t(e,r,n){l(this,t),this._stream=e,this._begin=r,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}var e;return u(t,[{key:"_enqueue",value:function(t){this._done||(0===this._requests.length?this._queuedChunk=t:(this._requests.shift().resolve({value:t,done:!1}),this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})})),this._requests=[]),this._done=!0,this._stream._removeRangeReader(this))}},{key:"read",value:(e=s(i.default.mark((function t(){var e,r;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._queuedChunk){t.next=4;break}return e=this._queuedChunk,this._queuedChunk=null,t.abrupt("return",{value:e,done:!1});case 4:if(!this._done){t.next=6;break}return t.abrupt("return",{value:void 0,done:!0});case 6:return r=(0,o.createPromiseCapability)(),this._requests.push(r),t.abrupt("return",r.promise);case 9:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"cancel",value:function(t){this._done=!0,this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})})),this._requests=[],this._stream._removeRangeReader(this)}},{key:"isStreamingSupported",get:function(){return!1}}]),t}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLContext=void 0;var n=r(1);function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o=function(){function t(e){var r=e.enable,n=void 0!==r&&r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._enabled=!0===n}var e,r,o;return e=t,(r=[{key:"composeSMask",value:function(t){var e=t.layer,r=t.mask,n=t.properties;return a.composeSMask(e,r,n)}},{key:"drawFigures",value:function(t){var e=t.width,r=t.height,n=t.backgroundColor,i=t.figures,o=t.context;return a.drawFigures(e,r,n,i,o)}},{key:"clear",value:function(){a.cleanup()}},{key:"isEnabled",get:function(){var t=this._enabled;return t&&(t=a.tryInitGL()),(0,n.shadow)(this,"isEnabled",t)}}])&&i(e.prototype,r),o&&i(e,o),t}();e.WebGLContext=o;var a=function(){function t(t,e,r){var n=t.createShader(r);if(t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS)){var i=t.getShaderInfoLog(n);throw new Error("Error during shader compilation: "+i)}return n}function e(e,r){return t(e,r,e.VERTEX_SHADER)}function r(e,r){return t(e,r,e.FRAGMENT_SHADER)}function n(t,e){for(var r=t.createProgram(),n=0,i=e.length;n<i;++n)t.attachShader(r,e[n]);if(t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS)){var o=t.getProgramInfoLog(r);throw new Error("Error during program linking: "+o)}return r}function i(t,e,r){t.activeTexture(r);var n=t.createTexture();return t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),n}var o,a;function s(){o||(a=document.createElement("canvas"),o=a.getContext("webgl",{premultipliedalpha:!1}))}var l=null,c=null;return{tryInitGL:function(){try{return s(),!!o}catch(t){}return!1},composeSMask:function(t,c,u){var h=t.width,d=t.height;l||function(){var t,i;s(),t=a,a=null,i=o,o=null;var c=n(i,[e(i,"  attribute vec2 a_position;                                      attribute vec2 a_texCoord;                                                                                                      uniform vec2 u_resolution;                                                                                                      varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_texCoord = a_texCoord;                                      }                                                             "),r(i,"  precision mediump float;                                                                                                        uniform vec4 u_backdrop;                                        uniform int u_subtype;                                          uniform sampler2D u_image;                                      uniform sampler2D u_mask;                                                                                                       varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec4 imageColor = texture2D(u_image, v_texCoord);               vec4 maskColor = texture2D(u_mask, v_texCoord);                 if (u_backdrop.a > 0.0) {                                         maskColor.rgb = maskColor.rgb * maskColor.a +                                   u_backdrop.rgb * (1.0 - maskColor.a);         }                                                               float lum;                                                      if (u_subtype == 0) {                                             lum = maskColor.a;                                            } else {                                                          lum = maskColor.r * 0.3 + maskColor.g * 0.59 +                        maskColor.b * 0.11;                                     }                                                               imageColor.a *= lum;                                            imageColor.rgb *= imageColor.a;                                 gl_FragColor = imageColor;                                    }                                                             ")]);i.useProgram(c);var u={};u.gl=i,u.canvas=t,u.resolutionLocation=i.getUniformLocation(c,"u_resolution"),u.positionLocation=i.getAttribLocation(c,"a_position"),u.backdropLocation=i.getUniformLocation(c,"u_backdrop"),u.subtypeLocation=i.getUniformLocation(c,"u_subtype");var h=i.getAttribLocation(c,"a_texCoord"),d=i.getUniformLocation(c,"u_image"),f=i.getUniformLocation(c,"u_mask"),p=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,p),i.bufferData(i.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),i.STATIC_DRAW),i.enableVertexAttribArray(h),i.vertexAttribPointer(h,2,i.FLOAT,!1,0,0),i.uniform1i(d,0),i.uniform1i(f,1),l=u}();var f=l,p=f.canvas,g=f.gl;p.width=h,p.height=d,g.viewport(0,0,g.drawingBufferWidth,g.drawingBufferHeight),g.uniform2f(f.resolutionLocation,h,d),u.backdrop?g.uniform4f(f.resolutionLocation,u.backdrop[0],u.backdrop[1],u.backdrop[2],1):g.uniform4f(f.resolutionLocation,0,0,0,0),g.uniform1i(f.subtypeLocation,"Luminosity"===u.subtype?1:0);var v=i(g,t,g.TEXTURE0),y=i(g,c,g.TEXTURE1),m=g.createBuffer();return g.bindBuffer(g.ARRAY_BUFFER,m),g.bufferData(g.ARRAY_BUFFER,new Float32Array([0,0,h,0,0,d,0,d,h,0,h,d]),g.STATIC_DRAW),g.enableVertexAttribArray(f.positionLocation),g.vertexAttribPointer(f.positionLocation,2,g.FLOAT,!1,0,0),g.clearColor(0,0,0,0),g.enable(g.BLEND),g.blendFunc(g.ONE,g.ONE_MINUS_SRC_ALPHA),g.clear(g.COLOR_BUFFER_BIT),g.drawArrays(g.TRIANGLES,0,6),g.flush(),g.deleteTexture(v),g.deleteTexture(y),g.deleteBuffer(m),p},drawFigures:function(t,i,l,u,h){c||function(){var t,i;s(),t=a,a=null,i=o,o=null;var l=n(i,[e(i,"  attribute vec2 a_position;                                      attribute vec3 a_color;                                                                                                         uniform vec2 u_resolution;                                      uniform vec2 u_scale;                                           uniform vec2 u_offset;                                                                                                          varying vec4 v_color;                                                                                                           void main() {                                                     vec2 position = (a_position + u_offset) * u_scale;              vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;         gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_color = vec4(a_color / 255.0, 1.0);                         }                                                             "),r(i,"  precision mediump float;                                                                                                        varying vec4 v_color;                                                                                                           void main() {                                                     gl_FragColor = v_color;                                       }                                                             ")]);i.useProgram(l);var u={};u.gl=i,u.canvas=t,u.resolutionLocation=i.getUniformLocation(l,"u_resolution"),u.scaleLocation=i.getUniformLocation(l,"u_scale"),u.offsetLocation=i.getUniformLocation(l,"u_offset"),u.positionLocation=i.getAttribLocation(l,"a_position"),u.colorLocation=i.getAttribLocation(l,"a_color"),c=u}();var d=c,f=d.canvas,p=d.gl;f.width=t,f.height=i,p.viewport(0,0,p.drawingBufferWidth,p.drawingBufferHeight),p.uniform2f(d.resolutionLocation,t,i);var g,v,y,m=0;for(g=0,v=u.length;g<v;g++)switch(u[g].type){case"lattice":m+=((y=u[g].coords.length/u[g].verticesPerRow|0)-1)*(u[g].verticesPerRow-1)*6;break;case"triangles":m+=u[g].coords.length}var _=new Float32Array(2*m),b=new Uint8Array(3*m),w=h.coords,S=h.colors,A=0,k=0;for(g=0,v=u.length;g<v;g++){var x=u[g],C=x.coords,P=x.colors;switch(x.type){case"lattice":var R=x.verticesPerRow;y=C.length/R|0;for(var T=1;T<y;T++)for(var E=T*R+1,O=1;O<R;O++,E++)_[A]=w[C[E-R-1]],_[A+1]=w[C[E-R-1]+1],_[A+2]=w[C[E-R]],_[A+3]=w[C[E-R]+1],_[A+4]=w[C[E-1]],_[A+5]=w[C[E-1]+1],b[k]=S[P[E-R-1]],b[k+1]=S[P[E-R-1]+1],b[k+2]=S[P[E-R-1]+2],b[k+3]=S[P[E-R]],b[k+4]=S[P[E-R]+1],b[k+5]=S[P[E-R]+2],b[k+6]=S[P[E-1]],b[k+7]=S[P[E-1]+1],b[k+8]=S[P[E-1]+2],_[A+6]=_[A+2],_[A+7]=_[A+3],_[A+8]=_[A+4],_[A+9]=_[A+5],_[A+10]=w[C[E]],_[A+11]=w[C[E]+1],b[k+9]=b[k+3],b[k+10]=b[k+4],b[k+11]=b[k+5],b[k+12]=b[k+6],b[k+13]=b[k+7],b[k+14]=b[k+8],b[k+15]=S[P[E]],b[k+16]=S[P[E]+1],b[k+17]=S[P[E]+2],A+=12,k+=18;break;case"triangles":for(var F=0,I=C.length;F<I;F++)_[A]=w[C[F]],_[A+1]=w[C[F]+1],b[k]=S[P[F]],b[k+1]=S[P[F]+1],b[k+2]=S[P[F]+2],A+=2,k+=3}}l?p.clearColor(l[0]/255,l[1]/255,l[2]/255,1):p.clearColor(0,0,0,0),p.clear(p.COLOR_BUFFER_BIT);var M=p.createBuffer();p.bindBuffer(p.ARRAY_BUFFER,M),p.bufferData(p.ARRAY_BUFFER,_,p.STATIC_DRAW),p.enableVertexAttribArray(d.positionLocation),p.vertexAttribPointer(d.positionLocation,2,p.FLOAT,!1,0,0);var L=p.createBuffer();return p.bindBuffer(p.ARRAY_BUFFER,L),p.bufferData(p.ARRAY_BUFFER,b,p.STATIC_DRAW),p.enableVertexAttribArray(d.colorLocation),p.vertexAttribPointer(d.colorLocation,3,p.UNSIGNED_BYTE,!1,0,0),p.uniform2f(d.scaleLocation,h.scaleX,h.scaleY),p.uniform2f(d.offsetLocation,h.offsetX,h.offsetY),p.drawArrays(p.TRIANGLES,0,m),p.flush(),p.deleteBuffer(M),p.deleteBuffer(L),f},cleanup:function(){l&&l.canvas&&(l.canvas.width=0,l.canvas.height=0),c&&c.canvas&&(c.canvas.width=0,c.canvas.height=0),l=null,c=null}}}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.renderTextLayer=void 0;var n,i=r(1),o=(n=r(3))&&n.__esModule?n:{default:n},a=function(){var t=/\S/,e=["left: ",0,"px; top: ",0,"px; font-size: ",0,"px; font-family: ","",";"];function r(r,n,o){var a,s=document.createElement("span"),l={style:null,angle:0,canvasWidth:0,isWhitespace:!1,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1};if(r._textDivs.push(s),a=n.str,!t.test(a))return l.isWhitespace=!0,void r._textDivProperties.set(s,l);var c=i.Util.transform(r._viewport.transform,n.transform),u=Math.atan2(c[1],c[0]),h=o[n.fontName];h.vertical&&(u+=Math.PI/2);var d,f,p=Math.sqrt(c[2]*c[2]+c[3]*c[3]),g=p;if(h.ascent?g=h.ascent*g:h.descent&&(g=(1+h.descent)*g),0===u?(d=c[4],f=c[5]-g):(d=c[4]+g*Math.sin(u),f=c[5]-g*Math.cos(u)),e[1]=d,e[3]=f,e[5]=p,e[7]=h.fontFamily,l.style=e.join(""),s.setAttribute("style",l.style),s.textContent=n.str,r._fontInspectorEnabled&&(s.dataset.fontName=n.fontName),0!==u&&(l.angle=u*(180/Math.PI)),n.str.length>1&&(h.vertical?l.canvasWidth=n.height*r._viewport.scale:l.canvasWidth=n.width*r._viewport.scale),r._textDivProperties.set(s,l),r._textContentStream&&r._layoutText(s),r._enhanceTextSelection){var v=1,y=0;0!==u&&(v=Math.cos(u),y=Math.sin(u));var m,_,b=(h.vertical?n.height:n.width)*r._viewport.scale,w=p;0!==u?(m=[v,y,-y,v,d,f],_=i.Util.getAxialAlignedBoundingBox([0,0,b,w],m)):_=[d,f,d+b,f+w],r._bounds.push({left:_[0],top:_[1],right:_[2],bottom:_[3],div:s,size:[b,w],m:m})}}function n(t){if(!t._canceled){var e=t._textDivs,r=t._capability,n=e.length;if(n>1e5)return t._renderingDone=!0,void r.resolve();if(!t._textContentStream)for(var i=0;i<n;i++)t._layoutText(e[i]);t._renderingDone=!0,r.resolve()}}function a(t){for(var e=t._bounds,r=t._viewport,n=function(t,e,r){var n=r.map((function(t,e){return{x1:t.left,y1:t.top,x2:t.right,y2:t.bottom,index:e,x1New:void 0,x2New:void 0}}));s(t,n);var i=new Array(r.length);return n.forEach((function(t){var e=t.index;i[e]={left:t.x1New,top:0,right:t.x2New,bottom:0}})),r.map((function(e,r){var o=i[r],a=n[r];a.x1=e.top,a.y1=t-o.right,a.x2=e.bottom,a.y2=t-o.left,a.index=r,a.x1New=void 0,a.x2New=void 0})),s(e,n),n.forEach((function(t){var e=t.index;i[e].top=t.x1New,i[e].bottom=t.x2New})),i}(r.width,r.height,e),o=0;o<n.length;o++){var a=e[o].div,l=t._textDivProperties.get(a);if(0!==l.angle){var c=n[o],u=e[o],h=u.m,d=h[0],f=h[1],p=[[0,0],[0,u.size[1]],[u.size[0],0],u.size],g=new Float64Array(64);p.forEach((function(t,e){var r=i.Util.applyTransform(t,h);g[e+0]=d&&(c.left-r[0])/d,g[e+4]=f&&(c.top-r[1])/f,g[e+8]=d&&(c.right-r[0])/d,g[e+12]=f&&(c.bottom-r[1])/f,g[e+16]=f&&(c.left-r[0])/-f,g[e+20]=d&&(c.top-r[1])/d,g[e+24]=f&&(c.right-r[0])/-f,g[e+28]=d&&(c.bottom-r[1])/d,g[e+32]=d&&(c.left-r[0])/-d,g[e+36]=f&&(c.top-r[1])/-f,g[e+40]=d&&(c.right-r[0])/-d,g[e+44]=f&&(c.bottom-r[1])/-f,g[e+48]=f&&(c.left-r[0])/f,g[e+52]=d&&(c.top-r[1])/-d,g[e+56]=f&&(c.right-r[0])/f,g[e+60]=d&&(c.bottom-r[1])/-d}));var v=function(t,e,r){for(var n=0,i=0;i<r;i++){var o=t[e++];o>0&&(n=n?Math.min(o,n):o)}return n},y=1+Math.min(Math.abs(d),Math.abs(f));l.paddingLeft=v(g,32,16)/y,l.paddingTop=v(g,48,16)/y,l.paddingRight=v(g,0,16)/y,l.paddingBottom=v(g,16,16)/y,t._textDivProperties.set(a,l)}else l.paddingLeft=e[o].left-n[o].left,l.paddingTop=e[o].top-n[o].top,l.paddingRight=n[o].right-e[o].right,l.paddingBottom=n[o].bottom-e[o].bottom,t._textDivProperties.set(a,l)}}function s(t,e){e.sort((function(t,e){return t.x1-e.x1||t.index-e.index}));var r=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];e.forEach((function(t){for(var e=0;e<r.length&&r[e].end<=t.y1;)e++;for(var n,i,o=r.length-1;o>=0&&r[o].start>=t.y2;)o--;var a,s,l=-1/0;for(a=e;a<=o;a++){var c;(c=(i=(n=r[a]).boundary).x2>t.x1?i.index>t.index?i.x1New:t.x1:void 0===i.x2New?(i.x2+t.x1)/2:i.x2New)>l&&(l=c)}for(t.x1New=l,a=e;a<=o;a++)void 0===(i=(n=r[a]).boundary).x2New?i.x2>t.x1?i.index>t.index&&(i.x2New=i.x2):i.x2New=l:i.x2New>l&&(i.x2New=Math.max(l,i.x2));var u=[],h=null;for(a=e;a<=o;a++){var d=(i=(n=r[a]).boundary).x2>t.x2?i:t;h===d?u[u.length-1].end=n.end:(u.push({start:n.start,end:n.end,boundary:d}),h=d)}for(r[e].start<t.y1&&(u[0].start=t.y1,u.unshift({start:r[e].start,end:t.y1,boundary:r[e].boundary})),t.y2<r[o].end&&(u[u.length-1].end=t.y2,u.push({start:t.y2,end:r[o].end,boundary:r[o].boundary})),a=e;a<=o;a++)if(void 0===(i=(n=r[a]).boundary).x2New){var f=!1;for(s=e-1;!f&&s>=0&&r[s].start>=i.y1;s--)f=r[s].boundary===i;for(s=o+1;!f&&s<r.length&&r[s].end<=i.y2;s++)f=r[s].boundary===i;for(s=0;!f&&s<u.length;s++)f=u[s].boundary===i;f||(i.x2New=l)}Array.prototype.splice.apply(r,[e,o-e+1].concat(u))})),r.forEach((function(e){var r=e.boundary;void 0===r.x2New&&(r.x2New=Math.max(t,r.x2))}))}function l(t){var e=this,r=t.textContent,n=t.textContentStream,a=t.container,s=t.viewport,l=t.textDivs,c=t.textContentItemsStr,u=t.enhanceTextSelection;this._textContent=r,this._textContentStream=n,this._container=a,this._viewport=s,this._textDivs=l||[],this._textContentItemsStr=c||[],this._enhanceTextSelection=!!u,this._fontInspectorEnabled=!(!o.default.FontInspector||!o.default.FontInspector.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,i.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally((function(){e._layoutTextCtx&&(e._layoutTextCtx.canvas.width=0,e._layoutTextCtx.canvas.height=0,e._layoutTextCtx=null)}))}return l.prototype={get promise(){return this._capability.promise},cancel:function(){this._canceled=!0,this._reader&&(this._reader.cancel(new i.AbortException("TextLayer task cancelled.")),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))},_processItems:function(t,e){for(var n=0,i=t.length;n<i;n++)this._textContentItemsStr.push(t[n].str),r(this,t[n],e)},_layoutText:function(t){var e=this._container,r=this._textDivProperties.get(t);if(!r.isWhitespace){var n=t.style.fontSize,i=t.style.fontFamily;n===this._layoutTextLastFontSize&&i===this._layoutTextLastFontFamily||(this._layoutTextCtx.font=n+" "+i,this._layoutTextLastFontSize=n,this._layoutTextLastFontFamily=i);var o=this._layoutTextCtx.measureText(t.textContent).width,a="";0!==r.canvasWidth&&o>0&&(r.scale=r.canvasWidth/o,a="scaleX(".concat(r.scale,")")),0!==r.angle&&(a="rotate(".concat(r.angle,"deg) ").concat(a)),a.length>0&&(r.originalTransform=a,t.style.transform=a),this._textDivProperties.set(t,r),e.appendChild(t)}},_render:function(t){var e=this,r=(0,i.createPromiseCapability)(),o=Object.create(null),a=document.createElement("canvas");if(a.mozOpaque=!0,this._layoutTextCtx=a.getContext("2d",{alpha:!1}),this._textContent){var s=this._textContent.items,l=this._textContent.styles;this._processItems(s,l),r.resolve()}else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');this._reader=this._textContentStream.getReader(),function t(){e._reader.read().then((function(n){var i=n.value;n.done?r.resolve():(Object.assign(o,i.styles),e._processItems(i.items,o),t())}),r.reject)}()}r.promise.then((function(){o=null,t?e._renderTimer=setTimeout((function(){n(e),e._renderTimer=null}),t):n(e)}),this._capability.reject)},expandTextDivs:function(t){if(this._enhanceTextSelection&&this._renderingDone){null!==this._bounds&&(a(this),this._bounds=null);for(var e=0,r=this._textDivs.length;e<r;e++){var n=this._textDivs[e],i=this._textDivProperties.get(n);if(!i.isWhitespace)if(t){var o="",s="";1!==i.scale&&(o="scaleX("+i.scale+")"),0!==i.angle&&(o="rotate("+i.angle+"deg) "+o),0!==i.paddingLeft&&(s+=" padding-left: "+i.paddingLeft/i.scale+"px;",o+=" translateX("+-i.paddingLeft/i.scale+"px)"),0!==i.paddingTop&&(s+=" padding-top: "+i.paddingTop+"px;",o+=" translateY("+-i.paddingTop+"px)"),0!==i.paddingRight&&(s+=" padding-right: "+i.paddingRight/i.scale+"px;"),0!==i.paddingBottom&&(s+=" padding-bottom: "+i.paddingBottom+"px;"),""!==s&&n.setAttribute("style",i.style+s),""!==o&&(n.style.transform=o)}else n.style.padding=0,n.style.transform=i.originalTransform||""}}}},function(t){var e=new l({textContent:t.textContent,textContentStream:t.textContentStream,container:t.container,viewport:t.viewport,textDivs:t.textDivs,textContentItemsStr:t.textContentItemsStr,enhanceTextSelection:t.enhanceTextSelection});return e._render(t.timeout),e}}();e.renderTextLayer=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationLayer=void 0;var n=r(151),i=r(1);function o(t,e,r){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function p(t,e,r){return e&&f(t.prototype,e),r&&f(t,r),t}var g=function(){function t(){d(this,t)}return p(t,null,[{key:"create",value:function(t){switch(t.data.annotationType){case i.AnnotationType.LINK:return new y(t);case i.AnnotationType.TEXT:return new m(t);case i.AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new b(t);case"Btn":return t.data.radioButton?new S(t):t.data.checkBox?new w(t):new A(t);case"Ch":return new k(t)}return new _(t);case i.AnnotationType.POPUP:return new x(t);case i.AnnotationType.FREETEXT:return new P(t);case i.AnnotationType.LINE:return new R(t);case i.AnnotationType.SQUARE:return new T(t);case i.AnnotationType.CIRCLE:return new E(t);case i.AnnotationType.POLYLINE:return new O(t);case i.AnnotationType.CARET:return new I(t);case i.AnnotationType.INK:return new M(t);case i.AnnotationType.POLYGON:return new F(t);case i.AnnotationType.HIGHLIGHT:return new L(t);case i.AnnotationType.UNDERLINE:return new D(t);case i.AnnotationType.SQUIGGLY:return new N(t);case i.AnnotationType.STRIKEOUT:return new j(t);case i.AnnotationType.STAMP:return new U(t);case i.AnnotationType.FILEATTACHMENT:return new G(t);default:return new v(t)}}}]),t}(),v=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];d(this,t),this.isRenderable=r,this.data=e.data,this.layer=e.layer,this.page=e.page,this.viewport=e.viewport,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderInteractiveForms=e.renderInteractiveForms,this.svgFactory=e.svgFactory,r&&(this.container=this._createContainer(n))}return p(t,[{key:"_createContainer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.data,r=this.page,n=this.viewport,o=document.createElement("section"),a=e.rect[2]-e.rect[0],s=e.rect[3]-e.rect[1];o.setAttribute("data-annotation-id",e.id);var l=i.Util.normalizeRect([e.rect[0],r.view[3]-e.rect[1]+r.view[1],e.rect[2],r.view[3]-e.rect[3]+r.view[1]]);if(o.style.transform="matrix("+n.transform.join(",")+")",o.style.transformOrigin=-l[0]+"px "+-l[1]+"px",!t&&e.borderStyle.width>0){o.style.borderWidth=e.borderStyle.width+"px",e.borderStyle.style!==i.AnnotationBorderStyleType.UNDERLINE&&(a-=2*e.borderStyle.width,s-=2*e.borderStyle.width);var c=e.borderStyle.horizontalCornerRadius,u=e.borderStyle.verticalCornerRadius;if(c>0||u>0){var h=c+"px / "+u+"px";o.style.borderRadius=h}switch(e.borderStyle.style){case i.AnnotationBorderStyleType.SOLID:o.style.borderStyle="solid";break;case i.AnnotationBorderStyleType.DASHED:o.style.borderStyle="dashed";break;case i.AnnotationBorderStyleType.BEVELED:(0,i.warn)("Unimplemented border style: beveled");break;case i.AnnotationBorderStyleType.INSET:(0,i.warn)("Unimplemented border style: inset");break;case i.AnnotationBorderStyleType.UNDERLINE:o.style.borderBottomStyle="solid"}e.color?o.style.borderColor=i.Util.makeCssRgb(0|e.color[0],0|e.color[1],0|e.color[2]):o.style.borderWidth=0}return o.style.left=l[0]+"px",o.style.top=l[1]+"px",o.style.width=a+"px",o.style.height=s+"px",o}},{key:"_createPopup",value:function(t,e,r){e||((e=document.createElement("div")).style.height=t.style.height,e.style.width=t.style.width,t.appendChild(e));var n=new C({container:t,trigger:e,color:r.color,title:r.title,modificationDate:r.modificationDate,contents:r.contents,hideWrapper:!0}).render();n.style.left=t.style.width,t.appendChild(n)}},{key:"render",value:function(){(0,i.unreachable)("Abstract method `AnnotationElement.render` called")}}]),t}(),y=function(t){function e(t){d(this,e);var r=!!(t.data.url||t.data.dest||t.data.action);return s(this,c(e).call(this,t,r))}return u(e,t),p(e,[{key:"render",value:function(){this.container.className="linkAnnotation";var t=this.data,e=this.linkService,r=document.createElement("a");return(0,n.addLinkAttributes)(r,{url:t.url,target:t.newWindow?n.LinkTarget.BLANK:e.externalLinkTarget,rel:e.externalLinkRel}),t.url||(t.action?this._bindNamedAction(r,t.action):this._bindLink(r,t.dest)),this.container.appendChild(r),this.container}},{key:"_bindLink",value:function(t,e){var r=this;t.href=this.linkService.getDestinationHash(e),t.onclick=function(){return e&&r.linkService.navigateTo(e),!1},e&&(t.className="internalLink")}},{key:"_bindNamedAction",value:function(t,e){var r=this;t.href=this.linkService.getAnchorUrl(""),t.onclick=function(){return r.linkService.executeNamedAction(e),!1},t.className="internalLink"}}]),e}(v),m=function(t){function e(t){d(this,e);var r=!!(t.data.hasPopup||t.data.title||t.data.contents);return s(this,c(e).call(this,t,r))}return u(e,t),p(e,[{key:"render",value:function(){this.container.className="textAnnotation";var t=document.createElement("img");return t.style.height=this.container.style.height,t.style.width=this.container.style.width,t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.alt="[{{type}} Annotation]",t.dataset.l10nId="text_annotation_type",t.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(this.container,t,this.data),this.container.appendChild(t),this.container}}]),e}(v),_=function(t){function e(){return d(this,e),s(this,c(e).apply(this,arguments))}return u(e,t),p(e,[{key:"render",value:function(){return this.container}}]),e}(v),b=function(t){function e(t){d(this,e);var r=t.renderInteractiveForms||!t.data.hasAppearance&&!!t.data.fieldValue;return s(this,c(e).call(this,t,r))}return u(e,t),p(e,[{key:"render",value:function(){this.container.className="textWidgetAnnotation";var t=null;if(this.renderInteractiveForms){if(this.data.multiLine?(t=document.createElement("textarea")).textContent=this.data.fieldValue:((t=document.createElement("input")).type="text",t.setAttribute("value",this.data.fieldValue)),t.disabled=this.data.readOnly,null!==this.data.maxLen&&(t.maxLength=this.data.maxLen),this.data.comb){var e=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;t.classList.add("comb"),t.style.letterSpacing="calc("+e+"px - 1ch)"}}else{(t=document.createElement("div")).textContent=this.data.fieldValue,t.style.verticalAlign="middle",t.style.display="table-cell";var r=null;this.data.fontRefName&&this.page.commonObjs.has(this.data.fontRefName)&&(r=this.page.commonObjs.get(this.data.fontRefName)),this._setTextStyle(t,r)}return null!==this.data.textAlignment&&(t.style.textAlign=["left","center","right"][this.data.textAlignment]),this.container.appendChild(t),this.container}},{key:"_setTextStyle",value:function(t,e){var r=t.style;if(r.fontSize=this.data.fontSize+"px",r.direction=this.data.fontDirection<0?"rtl":"ltr",e){r.fontWeight=e.black?e.bold?"900":"bold":e.bold?"bold":"normal",r.fontStyle=e.italic?"italic":"normal";var n=e.loadedName?'"'+e.loadedName+'", ':"",i=e.fallbackName||"Helvetica, sans-serif";r.fontFamily=n+i}}}]),e}(_),w=function(t){function e(t){return d(this,e),s(this,c(e).call(this,t,t.renderInteractiveForms))}return u(e,t),p(e,[{key:"render",value:function(){this.container.className="buttonWidgetAnnotation checkBox";var t=document.createElement("input");return t.disabled=this.data.readOnly,t.type="checkbox",this.data.fieldValue&&"Off"!==this.data.fieldValue&&t.setAttribute("checked",!0),this.container.appendChild(t),this.container}}]),e}(_),S=function(t){function e(t){return d(this,e),s(this,c(e).call(this,t,t.renderInteractiveForms))}return u(e,t),p(e,[{key:"render",value:function(){this.container.className="buttonWidgetAnnotation radioButton";var t=document.createElement("input");return t.disabled=this.data.readOnly,t.type="radio",t.name=this.data.fieldName,this.data.fieldValue===this.data.buttonValue&&t.setAttribute("checked",!0),this.container.appendChild(t),this.container}}]),e}(_),A=function(t){function e(){return d(this,e),s(this,c(e).apply(this,arguments))}return u(e,t),p(e,[{key:"render",value:function(){var t=o(c(e.prototype),"render",this).call(this);return t.className="buttonWidgetAnnotation pushButton",t}}]),e}(y),k=function(t){function e(t){return d(this,e),s(this,c(e).call(this,t,t.renderInteractiveForms))}return u(e,t),p(e,[{key:"render",value:function(){this.container.className="choiceWidgetAnnotation";var t=document.createElement("select");t.disabled=this.data.readOnly,this.data.combo||(t.size=this.data.options.length,this.data.multiSelect&&(t.multiple=!0));for(var e=0,r=this.data.options.length;e<r;e++){var n=this.data.options[e],i=document.createElement("option");i.textContent=n.displayValue,i.value=n.exportValue,this.data.fieldValue.includes(n.displayValue)&&i.setAttribute("selected",!0),t.appendChild(i)}return this.container.appendChild(t),this.container}}]),e}(_),x=function(t){function e(t){d(this,e);var r=!(!t.data.title&&!t.data.contents);return s(this,c(e).call(this,t,r))}return u(e,t),p(e,[{key:"render",value:function(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;var t='[data-annotation-id="'+this.data.parentId+'"]',e=this.layer.querySelector(t);if(!e)return this.container;var r=new C({container:this.container,trigger:e,color:this.data.color,title:this.data.title,modificationDate:this.data.modificationDate,contents:this.data.contents}),n=parseFloat(e.style.left),i=parseFloat(e.style.width);return this.container.style.transformOrigin=-(n+i)+"px -"+e.style.top,this.container.style.left=n+i+"px",this.container.appendChild(r.render()),this.container}}]),e}(v),C=function(){function t(e){d(this,t),this.container=e.container,this.trigger=e.trigger,this.color=e.color,this.title=e.title,this.modificationDate=e.modificationDate,this.contents=e.contents,this.hideWrapper=e.hideWrapper||!1,this.pinned=!1}return p(t,[{key:"render",value:function(){var t=document.createElement("div");t.className="popupWrapper",this.hideElement=this.hideWrapper?t:this.container,this.hideElement.setAttribute("hidden",!0);var e=document.createElement("div");e.className="popup";var r=this.color;if(r){var o=.7*(255-r[0])+r[0],a=.7*(255-r[1])+r[1],s=.7*(255-r[2])+r[2];e.style.backgroundColor=i.Util.makeCssRgb(0|o,0|a,0|s)}var l=document.createElement("h1");l.textContent=this.title,e.appendChild(l);var c=n.PDFDateString.toDateObject(this.modificationDate);if(c){var u=document.createElement("span");u.textContent="{{date}}, {{time}}",u.dataset.l10nId="annotation_date_string",u.dataset.l10nArgs=JSON.stringify({date:c.toLocaleDateString(),time:c.toLocaleTimeString()}),e.appendChild(u)}var h=this._formatContents(this.contents);return e.appendChild(h),this.trigger.addEventListener("click",this._toggle.bind(this)),this.trigger.addEventListener("mouseover",this._show.bind(this,!1)),this.trigger.addEventListener("mouseout",this._hide.bind(this,!1)),e.addEventListener("click",this._hide.bind(this,!0)),t.appendChild(e),t}},{key:"_formatContents",value:function(t){for(var e=document.createElement("p"),r=t.split(/(?:\r\n?|\n)/),n=0,i=r.length;n<i;++n){var o=r[n];e.appendChild(document.createTextNode(o)),n<i-1&&e.appendChild(document.createElement("br"))}return e}},{key:"_toggle",value:function(){this.pinned?this._hide(!0):this._show(!0)}},{key:"_show",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t&&(this.pinned=!0),this.hideElement.hasAttribute("hidden")&&(this.hideElement.removeAttribute("hidden"),this.container.style.zIndex+=1)}},{key:"_hide",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&(this.pinned=!1),this.hideElement.hasAttribute("hidden")||this.pinned||(this.hideElement.setAttribute("hidden",!0),this.container.style.zIndex-=1)}}]),t}(),P=function(t){function e(t){d(this,e);var r=!!(t.data.hasPopup||t.data.title||t.data.contents);return s(this,c(e).call(this,t,r,!0))}return u(e,t),p(e,[{key:"render",value:function(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),e}(v),R=function(t){function e(t){d(this,e);var r=!!(t.data.hasPopup||t.data.title||t.data.contents);return s(this,c(e).call(this,t,r,!0))}return u(e,t),p(e,[{key:"render",value:function(){this.container.className="lineAnnotation";var t=this.data,e=t.rect[2]-t.rect[0],r=t.rect[3]-t.rect[1],n=this.svgFactory.create(e,r),i=this.svgFactory.createElement("svg:line");return i.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),i.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),i.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),i.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),i.setAttribute("stroke-width",t.borderStyle.width),i.setAttribute("stroke","transparent"),n.appendChild(i),this.container.append(n),this._createPopup(this.container,i,t),this.container}}]),e}(v),T=function(t){function e(t){d(this,e);var r=!!(t.data.hasPopup||t.data.title||t.data.contents);return s(this,c(e).call(this,t,r,!0))}return u(e,t),p(e,[{key:"render",value:function(){this.container.className="squareAnnotation";var t=this.data,e=t.rect[2]-t.rect[0],r=t.rect[3]-t.rect[1],n=this.svgFactory.create(e,r),i=t.borderStyle.width,o=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",i/2),o.setAttribute("y",i/2),o.setAttribute("width",e-i),o.setAttribute("height",r-i),o.setAttribute("stroke-width",i),o.setAttribute("stroke","transparent"),o.setAttribute("fill","none"),n.appendChild(o),this.container.append(n),this._createPopup(this.container,o,t),this.container}}]),e}(v),E=function(t){function e(t){d(this,e);var r=!!(t.data.hasPopup||t.data.title||t.data.contents);return s(this,c(e).call(this,t,r,!0))}return u(e,t),p(e,[{key:"render",value:function(){this.container.className="circleAnnotation";var t=this.data,e=t.rect[2]-t.rect[0],r=t.rect[3]-t.rect[1],n=this.svgFactory.create(e,r),i=t.borderStyle.width,o=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",e/2),o.setAttribute("cy",r/2),o.setAttribute("rx",e/2-i/2),o.setAttribute("ry",r/2-i/2),o.setAttribute("stroke-width",i),o.setAttribute("stroke","transparent"),o.setAttribute("fill","none"),n.appendChild(o),this.container.append(n),this._createPopup(this.container,o,t),this.container}}]),e}(v),O=function(t){function e(t){var r;d(this,e);var n=!!(t.data.hasPopup||t.data.title||t.data.contents);return(r=s(this,c(e).call(this,t,n,!0))).containerClassName="polylineAnnotation",r.svgElementName="svg:polyline",r}return u(e,t),p(e,[{key:"render",value:function(){this.container.className=this.containerClassName;for(var t=this.data,e=t.rect[2]-t.rect[0],r=t.rect[3]-t.rect[1],n=this.svgFactory.create(e,r),i=t.vertices,o=[],a=0,s=i.length;a<s;a++){var l=i[a].x-t.rect[0],c=t.rect[3]-i[a].y;o.push(l+","+c)}o=o.join(" ");var u=t.borderStyle.width,h=this.svgFactory.createElement(this.svgElementName);return h.setAttribute("points",o),h.setAttribute("stroke-width",u),h.setAttribute("stroke","transparent"),h.setAttribute("fill","none"),n.appendChild(h),this.container.append(n),this._createPopup(this.container,h,t),this.container}}]),e}(v),F=function(t){function e(t){var r;return d(this,e),(r=s(this,c(e).call(this,t))).containerClassName="polygonAnnotation",r.svgElementName="svg:polygon",r}return u(e,t),e}(O),I=function(t){function e(t){d(this,e);var r=!!(t.data.hasPopup||t.data.title||t.data.contents);return s(this,c(e).call(this,t,r,!0))}return u(e,t),p(e,[{key:"render",value:function(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),e}(v),M=function(t){function e(t){var r;d(this,e);var n=!!(t.data.hasPopup||t.data.title||t.data.contents);return(r=s(this,c(e).call(this,t,n,!0))).containerClassName="inkAnnotation",r.svgElementName="svg:polyline",r}return u(e,t),p(e,[{key:"render",value:function(){this.container.className=this.containerClassName;for(var t=this.data,e=t.rect[2]-t.rect[0],r=t.rect[3]-t.rect[1],n=this.svgFactory.create(e,r),i=t.inkLists,o=0,a=i.length;o<a;o++){for(var s=i[o],l=[],c=0,u=s.length;c<u;c++){var h=s[c].x-t.rect[0],d=t.rect[3]-s[c].y;l.push(h+","+d)}l=l.join(" ");var f=t.borderStyle.width,p=this.svgFactory.createElement(this.svgElementName);p.setAttribute("points",l),p.setAttribute("stroke-width",f),p.setAttribute("stroke","transparent"),p.setAttribute("fill","none"),this._createPopup(this.container,p,t),n.appendChild(p)}return this.container.append(n),this.container}}]),e}(v),L=function(t){function e(t){d(this,e);var r=!!(t.data.hasPopup||t.data.title||t.data.contents);return s(this,c(e).call(this,t,r,!0))}return u(e,t),p(e,[{key:"render",value:function(){return this.container.className="highlightAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),e}(v),D=function(t){function e(t){d(this,e);var r=!!(t.data.hasPopup||t.data.title||t.data.contents);return s(this,c(e).call(this,t,r,!0))}return u(e,t),p(e,[{key:"render",value:function(){return this.container.className="underlineAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),e}(v),N=function(t){function e(t){d(this,e);var r=!!(t.data.hasPopup||t.data.title||t.data.contents);return s(this,c(e).call(this,t,r,!0))}return u(e,t),p(e,[{key:"render",value:function(){return this.container.className="squigglyAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),e}(v),j=function(t){function e(t){d(this,e);var r=!!(t.data.hasPopup||t.data.title||t.data.contents);return s(this,c(e).call(this,t,r,!0))}return u(e,t),p(e,[{key:"render",value:function(){return this.container.className="strikeoutAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),e}(v),U=function(t){function e(t){d(this,e);var r=!!(t.data.hasPopup||t.data.title||t.data.contents);return s(this,c(e).call(this,t,r,!0))}return u(e,t),p(e,[{key:"render",value:function(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}]),e}(v),G=function(t){function e(t){var r;d(this,e);var o=(r=s(this,c(e).call(this,t,!0))).data.file,a=o.filename,u=o.content;return r.filename=(0,n.getFilenameFromUrl)(a),r.content=u,r.linkService.eventBus&&r.linkService.eventBus.dispatch("fileattachmentannotation",{source:l(r),id:(0,i.stringToPDFString)(a),filename:a,content:u}),r}return u(e,t),p(e,[{key:"render",value:function(){this.container.className="fileAttachmentAnnotation";var t=document.createElement("div");return t.style.height=this.container.style.height,t.style.width=this.container.style.width,t.addEventListener("dblclick",this._download.bind(this)),this.data.hasPopup||!this.data.title&&!this.data.contents||this._createPopup(this.container,t,this.data),this.container.appendChild(t),this.container}},{key:"_download",value:function(){this.downloadManager?this.downloadManager.downloadData(this.content,this.filename,""):(0,i.warn)("Download cannot be started due to unavailable download manager")}}]),e}(v),q=function(){function t(){d(this,t)}return p(t,null,[{key:"render",value:function(t){for(var e=0,r=t.annotations.length;e<r;e++){var i=t.annotations[e];if(i){var o=g.create({data:i,layer:t.div,page:t.page,viewport:t.viewport,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderInteractiveForms:t.renderInteractiveForms||!1,svgFactory:new n.DOMSVGFactory});o.isRenderable&&t.div.appendChild(o.render())}}}},{key:"update",value:function(t){for(var e=0,r=t.annotations.length;e<r;e++){var n=t.annotations[e],i=t.div.querySelector('[data-annotation-id="'+n.id+'"]');i&&(i.style.transform="matrix("+t.viewport.transform.join(",")+")")}t.div.removeAttribute("hidden")}}]),t}();e.AnnotationLayer=q},function(t,n,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SVGGraphics=void 0;var a,s=o(1),l=o(151),c=(a=o(4))&&a.__esModule?a:{default:a};function u(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function p(t,e,r){return e&&f(t.prototype,e),r&&f(t,r),t}var g=function(){throw new Error("Not implemented: SVGGraphics")};n.SVGGraphics=g;var v=function(t){if(Number.isInteger(t))return t.toString();var e=t.toFixed(10),r=e.length-1;if("0"!==e[r])return e;do{r--}while("0"===e[r]);return e.substring(0,"."===e[r]?r:r+1)},y=function(t){if(0===t[4]&&0===t[5]){if(0===t[1]&&0===t[2])return 1===t[0]&&1===t[3]?"":"scale(".concat(v(t[0])," ").concat(v(t[3]),")");if(t[0]===t[3]&&t[1]===-t[2]){var e=180*Math.acos(t[0])/Math.PI;return"rotate(".concat(v(e),")")}}else if(1===t[0]&&0===t[1]&&0===t[2]&&1===t[3])return"translate(".concat(v(t[4])," ").concat(v(t[5]),")");return"matrix(".concat(v(t[0])," ").concat(v(t[1])," ").concat(v(t[2])," ").concat(v(t[3])," ").concat(v(t[4])," ")+"".concat(v(t[5]),")")},m={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},_="http://www.w3.org/1999/xlink",b=["butt","round","square"],w=["miter","round","bevel"],S=function(){for(var t=new Uint8Array([137,80,78,71,13,10,26,10]),n=new Int32Array(256),o=0;o<256;o++){for(var a=o,l=0;l<8;l++)a=1&a?3988292384^a>>1&2147483647:a>>1&2147483647;n[o]=a}function u(t,e,r,i){var o=i,a=e.length;r[o]=a>>24&255,r[o+1]=a>>16&255,r[o+2]=a>>8&255,r[o+3]=255&a,r[o+=4]=255&t.charCodeAt(0),r[o+1]=255&t.charCodeAt(1),r[o+2]=255&t.charCodeAt(2),r[o+3]=255&t.charCodeAt(3),o+=4,r.set(e,o);var s=function(t,e,r){for(var i=-1,o=e;o<r;o++){var a=255&(i^t[o]);i=i>>>8^n[a]}return-1^i}(r,i+4,o+=e.length);r[o]=s>>24&255,r[o+1]=s>>16&255,r[o+2]=s>>8&255,r[o+3]=255&s}function h(t){var e=t.length,r=Math.ceil(e/65535),n=new Uint8Array(2+e+5*r+4),i=0;n[i++]=120,n[i++]=156;for(var o=0;e>65535;)n[i++]=0,n[i++]=255,n[i++]=255,n[i++]=0,n[i++]=0,n.set(t.subarray(o,o+65535),i),i+=65535,o+=65535,e-=65535;n[i++]=1,n[i++]=255&e,n[i++]=e>>8&255,n[i++]=255&~e,n[i++]=(65535&~e)>>8&255,n.set(t.subarray(o),i),i+=t.length-o;var a=function(t,e,r){for(var n=1,i=0,o=e;o<r;++o)i=(i+(n=(n+(255&t[o]))%65521))%65521;return i<<16|n}(t,0,t.length);return n[i++]=a>>24&255,n[i++]=a>>16&255,n[i++]=a>>8&255,n[i++]=255&a,n}function d(n,o,a,l){var d,f,p,g=n.width,v=n.height,y=n.data;switch(o){case s.ImageKind.GRAYSCALE_1BPP:f=0,d=1,p=g+7>>3;break;case s.ImageKind.RGB_24BPP:f=2,d=8,p=3*g;break;case s.ImageKind.RGBA_32BPP:f=6,d=8,p=4*g;break;default:throw new Error("invalid format")}for(var m=new Uint8Array((1+p)*v),_=0,b=0,w=0;w<v;++w)m[_++]=0,m.set(y.subarray(b,b+p),_),b+=p,_+=p;if(o===s.ImageKind.GRAYSCALE_1BPP&&l){_=0;for(var S=0;S<v;S++){_++;for(var A=0;A<p;A++)m[_++]^=255}}var k=new Uint8Array([g>>24&255,g>>16&255,g>>8&255,255&g,v>>24&255,v>>16&255,v>>8&255,255&v,d,f,0,0,0]),x=function(t){if(!(0,c.default)())return h(t);try{var n;n=parseInt(i.versions.node)>=8?t:new e(t);var o=r(49).deflateSync(n,{level:9});return o instanceof Uint8Array?o:new Uint8Array(o)}catch(t){(0,s.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+t)}return h(t)}(m),C=t.length+36+k.length+x.length,P=new Uint8Array(C),R=0;return P.set(t,R),u("IHDR",k,P,R+=t.length),u("IDATA",x,P,R+=12+k.length),R+=12+x.length,u("IEND",new Uint8Array(0),P,R),(0,s.createObjectURL)(P,"image/png",a)}return function(t,e,r){return d(t,void 0===t.kind?s.ImageKind.GRAYSCALE_1BPP:t.kind,e,r)}}(),A=function(){function t(){d(this,t),this.fontSizeScale=1,this.fontWeight=m.fontWeight,this.fontSize=0,this.textMatrix=s.IDENTITY_MATRIX,this.fontMatrix=s.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=s.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=m.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}return p(t,[{key:"clone",value:function(){return Object.create(this)}},{key:"setCurrentPoint",value:function(t,e){this.x=t,this.y=e}}]),t}(),k=0,x=0,C=0;n.SVGGraphics=g=function(){function t(e,r,n){for(var i in d(this,t),this.svgFactory=new l.DOMSVGFactory,this.current=new A,this.transformMatrix=s.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=e,this.objs=r,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!n,this._operatorIdMapping=[],s.OPS)this._operatorIdMapping[s.OPS[i]]=i}return p(t,[{key:"save",value:function(){this.transformStack.push(this.transformMatrix);var t=this.current;this.extraStack.push(t),this.current=t.clone()}},{key:"restore",value:function(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}},{key:"group",value:function(t){this.save(),this.executeOpTree(t),this.restore()}},{key:"loadDependencies",value:function(t){for(var e=this,r=t.fnArray,n=t.argsArray,i=0,o=r.length;i<o;i++)if(r[i]===s.OPS.dependency){var a=!0,l=!1,c=void 0;try{for(var u,h=function(){var t=u.value,r=t.startsWith("g_")?e.commonObjs:e.objs,n=new Promise((function(e){r.get(t,e)}));e.current.dependencies.push(n)},d=n[i][Symbol.iterator]();!(a=(u=d.next()).done);a=!0)h()}catch(t){l=!0,c=t}finally{try{a||null==d.return||d.return()}finally{if(l)throw c}}}return Promise.all(this.current.dependencies)}},{key:"transform",value:function(t,e,r,n,i,o){var a=[t,e,r,n,i,o];this.transformMatrix=s.Util.transform(this.transformMatrix,a),this.tgrp=null}},{key:"getSVG",value:function(t,e){var r=this;this.viewport=e;var n=this._initialize(e);return this.loadDependencies(t).then((function(){return r.transformMatrix=s.IDENTITY_MATRIX,r.executeOpTree(r.convertOpList(t)),n}))}},{key:"convertOpList",value:function(t){for(var e=this._operatorIdMapping,r=t.argsArray,n=t.fnArray,i=[],o=0,a=n.length;o<a;o++){var s=n[o];i.push({fnId:s,fn:e[s],args:r[o]})}return function(t){var e=[],r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;"save"!==l.fn?"restore"===l.fn?e=r.pop():e.push(l):(e.push({fnId:92,fn:"group",items:[]}),r.push(e),e=e[e.length-1].items)}}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return e}(i)}},{key:"executeOpTree",value:function(t){var e=!0,r=!1,n=void 0;try{for(var i,o=t[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value,l=a.fn,c=a.fnId,u=a.args;switch(0|c){case s.OPS.beginText:this.beginText();break;case s.OPS.dependency:break;case s.OPS.setLeading:this.setLeading(u);break;case s.OPS.setLeadingMoveText:this.setLeadingMoveText(u[0],u[1]);break;case s.OPS.setFont:this.setFont(u);break;case s.OPS.showText:case s.OPS.showSpacedText:this.showText(u[0]);break;case s.OPS.endText:this.endText();break;case s.OPS.moveText:this.moveText(u[0],u[1]);break;case s.OPS.setCharSpacing:this.setCharSpacing(u[0]);break;case s.OPS.setWordSpacing:this.setWordSpacing(u[0]);break;case s.OPS.setHScale:this.setHScale(u[0]);break;case s.OPS.setTextMatrix:this.setTextMatrix(u[0],u[1],u[2],u[3],u[4],u[5]);break;case s.OPS.setTextRise:this.setTextRise(u[0]);break;case s.OPS.setTextRenderingMode:this.setTextRenderingMode(u[0]);break;case s.OPS.setLineWidth:this.setLineWidth(u[0]);break;case s.OPS.setLineJoin:this.setLineJoin(u[0]);break;case s.OPS.setLineCap:this.setLineCap(u[0]);break;case s.OPS.setMiterLimit:this.setMiterLimit(u[0]);break;case s.OPS.setFillRGBColor:this.setFillRGBColor(u[0],u[1],u[2]);break;case s.OPS.setStrokeRGBColor:this.setStrokeRGBColor(u[0],u[1],u[2]);break;case s.OPS.setStrokeColorN:this.setStrokeColorN(u);break;case s.OPS.setFillColorN:this.setFillColorN(u);break;case s.OPS.shadingFill:this.shadingFill(u[0]);break;case s.OPS.setDash:this.setDash(u[0],u[1]);break;case s.OPS.setRenderingIntent:this.setRenderingIntent(u[0]);break;case s.OPS.setFlatness:this.setFlatness(u[0]);break;case s.OPS.setGState:this.setGState(u[0]);break;case s.OPS.fill:this.fill();break;case s.OPS.eoFill:this.eoFill();break;case s.OPS.stroke:this.stroke();break;case s.OPS.fillStroke:this.fillStroke();break;case s.OPS.eoFillStroke:this.eoFillStroke();break;case s.OPS.clip:this.clip("nonzero");break;case s.OPS.eoClip:this.clip("evenodd");break;case s.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case s.OPS.paintJpegXObject:this.paintJpegXObject(u[0],u[1],u[2]);break;case s.OPS.paintImageXObject:this.paintImageXObject(u[0]);break;case s.OPS.paintInlineImageXObject:this.paintInlineImageXObject(u[0]);break;case s.OPS.paintImageMaskXObject:this.paintImageMaskXObject(u[0]);break;case s.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(u[0],u[1]);break;case s.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case s.OPS.closePath:this.closePath();break;case s.OPS.closeStroke:this.closeStroke();break;case s.OPS.closeFillStroke:this.closeFillStroke();break;case s.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case s.OPS.nextLine:this.nextLine();break;case s.OPS.transform:this.transform(u[0],u[1],u[2],u[3],u[4],u[5]);break;case s.OPS.constructPath:this.constructPath(u[0],u[1]);break;case s.OPS.endPath:this.endPath();break;case 92:this.group(a.items);break;default:(0,s.warn)("Unimplemented operator ".concat(l))}}}catch(t){r=!0,n=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw n}}}},{key:"setWordSpacing",value:function(t){this.current.wordSpacing=t}},{key:"setCharSpacing",value:function(t){this.current.charSpacing=t}},{key:"nextLine",value:function(){this.moveText(0,this.current.leading)}},{key:"setTextMatrix",value:function(t,e,r,n,i,o){var a=this.current;a.textMatrix=a.lineMatrix=[t,e,r,n,i,o],a.textMatrixScale=Math.sqrt(t*t+e*e),a.x=a.lineX=0,a.y=a.lineY=0,a.xcoords=[],a.tspan=this.svgFactory.createElement("svg:tspan"),a.tspan.setAttributeNS(null,"font-family",a.fontFamily),a.tspan.setAttributeNS(null,"font-size","".concat(v(a.fontSize),"px")),a.tspan.setAttributeNS(null,"y",v(-a.y)),a.txtElement=this.svgFactory.createElement("svg:text"),a.txtElement.appendChild(a.tspan)}},{key:"beginText",value:function(){var t=this.current;t.x=t.lineX=0,t.y=t.lineY=0,t.textMatrix=s.IDENTITY_MATRIX,t.lineMatrix=s.IDENTITY_MATRIX,t.textMatrixScale=1,t.tspan=this.svgFactory.createElement("svg:tspan"),t.txtElement=this.svgFactory.createElement("svg:text"),t.txtgrp=this.svgFactory.createElement("svg:g"),t.xcoords=[]}},{key:"moveText",value:function(t,e){var r=this.current;r.x=r.lineX+=t,r.y=r.lineY+=e,r.xcoords=[],r.tspan=this.svgFactory.createElement("svg:tspan"),r.tspan.setAttributeNS(null,"font-family",r.fontFamily),r.tspan.setAttributeNS(null,"font-size","".concat(v(r.fontSize),"px")),r.tspan.setAttributeNS(null,"y",v(-r.y))}},{key:"showText",value:function(t){var e=this.current,r=e.font,n=e.fontSize;if(0!==n){var i=e.charSpacing,o=e.wordSpacing,a=e.fontDirection,l=e.textHScale*a,c=r.vertical,u=n*e.fontMatrix[0],h=0,d=!0,f=!1,p=void 0;try{for(var g,_=t[Symbol.iterator]();!(d=(g=_.next()).done);d=!0){var b=g.value;if(null!==b)if((0,s.isNum)(b))h+=-b*n*.001;else{var w=b.width,S=b.fontChar,A=w*u+((b.isSpace?o:0)+i)*a;b.isInFont||r.missingFile?(e.xcoords.push(e.x+h*l),e.tspan.textContent+=S,h+=A):h+=A}else h+=a*o}}catch(t){f=!0,p=t}finally{try{d||null==_.return||_.return()}finally{if(f)throw p}}c?e.y-=h*l:e.x+=h*l,e.tspan.setAttributeNS(null,"x",e.xcoords.map(v).join(" ")),e.tspan.setAttributeNS(null,"y",v(-e.y)),e.tspan.setAttributeNS(null,"font-family",e.fontFamily),e.tspan.setAttributeNS(null,"font-size","".concat(v(e.fontSize),"px")),e.fontStyle!==m.fontStyle&&e.tspan.setAttributeNS(null,"font-style",e.fontStyle),e.fontWeight!==m.fontWeight&&e.tspan.setAttributeNS(null,"font-weight",e.fontWeight);var k=e.textRenderingMode&s.TextRenderingMode.FILL_STROKE_MASK;if(k===s.TextRenderingMode.FILL||k===s.TextRenderingMode.FILL_STROKE?(e.fillColor!==m.fillColor&&e.tspan.setAttributeNS(null,"fill",e.fillColor),e.fillAlpha<1&&e.tspan.setAttributeNS(null,"fill-opacity",e.fillAlpha)):e.textRenderingMode===s.TextRenderingMode.ADD_TO_PATH?e.tspan.setAttributeNS(null,"fill","transparent"):e.tspan.setAttributeNS(null,"fill","none"),k===s.TextRenderingMode.STROKE||k===s.TextRenderingMode.FILL_STROKE){var x=1/(e.textMatrixScale||1);this._setStrokeAttributes(e.tspan,x)}var C=e.textMatrix;0!==e.textRise&&((C=C.slice())[5]+=e.textRise),e.txtElement.setAttributeNS(null,"transform","".concat(y(C)," scale(1, -1)")),e.txtElement.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),e.txtElement.appendChild(e.tspan),e.txtgrp.appendChild(e.txtElement),this._ensureTransformGroup().appendChild(e.txtElement)}}},{key:"setLeadingMoveText",value:function(t,e){this.setLeading(-e),this.moveText(t,e)}},{key:"addFontStyle",value:function(t){this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));var e=(0,s.createObjectURL)(t.data,t.mimetype,this.forceDataSchema);this.cssStyle.textContent+='@font-face { font-family: "'.concat(t.loadedName,'";')+" src: url(".concat(e,"); }\n")}},{key:"setFont",value:function(t){var e=this.current,r=this.commonObjs.get(t[0]),n=t[1];e.font=r,this.embedFonts&&r.data&&!this.embeddedFonts[r.loadedName]&&(this.addFontStyle(r),this.embeddedFonts[r.loadedName]=r),e.fontMatrix=r.fontMatrix?r.fontMatrix:s.FONT_IDENTITY_MATRIX;var i=r.black?r.bold?"bolder":"bold":r.bold?"bold":"normal",o=r.italic?"italic":"normal";n<0?(n=-n,e.fontDirection=-1):e.fontDirection=1,e.fontSize=n,e.fontFamily=r.loadedName,e.fontWeight=i,e.fontStyle=o,e.tspan=this.svgFactory.createElement("svg:tspan"),e.tspan.setAttributeNS(null,"y",v(-e.y)),e.xcoords=[]}},{key:"endText",value:function(){var t=this.current;t.textRenderingMode&s.TextRenderingMode.ADD_TO_PATH_FLAG&&t.txtElement&&t.txtElement.hasChildNodes()&&(t.element=t.txtElement,this.clip("nonzero"),this.endPath())}},{key:"setLineWidth",value:function(t){t>0&&(this.current.lineWidth=t)}},{key:"setLineCap",value:function(t){this.current.lineCap=b[t]}},{key:"setLineJoin",value:function(t){this.current.lineJoin=w[t]}},{key:"setMiterLimit",value:function(t){this.current.miterLimit=t}},{key:"setStrokeAlpha",value:function(t){this.current.strokeAlpha=t}},{key:"setStrokeRGBColor",value:function(t,e,r){this.current.strokeColor=s.Util.makeCssRgb(t,e,r)}},{key:"setFillAlpha",value:function(t){this.current.fillAlpha=t}},{key:"setFillRGBColor",value:function(t,e,r){this.current.fillColor=s.Util.makeCssRgb(t,e,r),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[]}},{key:"setStrokeColorN",value:function(t){this.current.strokeColor=this._makeColorN_Pattern(t)}},{key:"setFillColorN",value:function(t){this.current.fillColor=this._makeColorN_Pattern(t)}},{key:"shadingFill",value:function(t){var e=this.viewport.width,r=this.viewport.height,n=s.Util.inverseTransform(this.transformMatrix),i=s.Util.applyTransform([0,0],n),o=s.Util.applyTransform([0,r],n),a=s.Util.applyTransform([e,0],n),l=s.Util.applyTransform([e,r],n),c=Math.min(i[0],o[0],a[0],l[0]),u=Math.min(i[1],o[1],a[1],l[1]),h=Math.max(i[0],o[0],a[0],l[0]),d=Math.max(i[1],o[1],a[1],l[1]),f=this.svgFactory.createElement("svg:rect");f.setAttributeNS(null,"x",c),f.setAttributeNS(null,"y",u),f.setAttributeNS(null,"width",h-c),f.setAttributeNS(null,"height",d-u),f.setAttributeNS(null,"fill",this._makeShadingPattern(t)),this._ensureTransformGroup().appendChild(f)}},{key:"_makeColorN_Pattern",value:function(t){return"TilingPattern"===t[0]?this._makeTilingPattern(t):this._makeShadingPattern(t)}},{key:"_makeTilingPattern",value:function(t){var e=t[1],r=t[2],n=t[3]||s.IDENTITY_MATRIX,i=h(t[4],4),o=i[0],a=i[1],l=i[2],c=i[3],d=t[5],f=t[6],p=t[7],g="shading".concat(C++),v=h(s.Util.applyTransform([o,a],n),2),y=v[0],m=v[1],_=h(s.Util.applyTransform([l,c],n),2),b=_[0],w=_[1],S=h(s.Util.singularValueDecompose2dScale(n),2),A=d*S[0],k=f*S[1],x=this.svgFactory.createElement("svg:pattern");x.setAttributeNS(null,"id",g),x.setAttributeNS(null,"patternUnits","userSpaceOnUse"),x.setAttributeNS(null,"width",A),x.setAttributeNS(null,"height",k),x.setAttributeNS(null,"x","".concat(y)),x.setAttributeNS(null,"y","".concat(m));var P=this.svg,R=this.transformMatrix,T=this.current.fillColor,E=this.current.strokeColor,O=this.svgFactory.create(b-y,w-m);if(this.svg=O,this.transformMatrix=n,2===p){var F=s.Util.makeCssRgb.apply(s.Util,u(e));this.current.fillColor=F,this.current.strokeColor=F}return this.executeOpTree(this.convertOpList(r)),this.svg=P,this.transformMatrix=R,this.current.fillColor=T,this.current.strokeColor=E,x.appendChild(O.childNodes[0]),this.defs.appendChild(x),"url(#".concat(g,")")}},{key:"_makeShadingPattern",value:function(t){switch(t[0]){case"RadialAxial":var e,r="shading".concat(C++),n=t[2];switch(t[1]){case"axial":var i=t[3],o=t[4];(e=this.svgFactory.createElement("svg:linearGradient")).setAttributeNS(null,"id",r),e.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),e.setAttributeNS(null,"x1",i[0]),e.setAttributeNS(null,"y1",i[1]),e.setAttributeNS(null,"x2",o[0]),e.setAttributeNS(null,"y2",o[1]);break;case"radial":var a=t[3],l=t[4],c=t[5],u=t[6];(e=this.svgFactory.createElement("svg:radialGradient")).setAttributeNS(null,"id",r),e.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),e.setAttributeNS(null,"cx",l[0]),e.setAttributeNS(null,"cy",l[1]),e.setAttributeNS(null,"r",u),e.setAttributeNS(null,"fx",a[0]),e.setAttributeNS(null,"fy",a[1]),e.setAttributeNS(null,"fr",c);break;default:throw new Error("Unknown RadialAxial type: ".concat(t[1]))}var h=!0,d=!1,f=void 0;try{for(var p,g=n[Symbol.iterator]();!(h=(p=g.next()).done);h=!0){var v=p.value,y=this.svgFactory.createElement("svg:stop");y.setAttributeNS(null,"offset",v[0]),y.setAttributeNS(null,"stop-color",v[1]),e.appendChild(y)}}catch(t){d=!0,f=t}finally{try{h||null==g.return||g.return()}finally{if(d)throw f}}return this.defs.appendChild(e),"url(#".concat(r,")");case"Mesh":return(0,s.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error("Unknown IR type: ".concat(t[0]))}}},{key:"setDash",value:function(t,e){this.current.dashArray=t,this.current.dashPhase=e}},{key:"constructPath",value:function(t,e){var r=this.current,n=r.x,i=r.y,o=[],a=0,l=!0,c=!1,u=void 0;try{for(var h,d=t[Symbol.iterator]();!(l=(h=d.next()).done);l=!0)switch(0|h.value){case s.OPS.rectangle:n=e[a++],i=e[a++];var f=e[a++],p=e[a++],g=n+f,y=i+p;o.push("M",v(n),v(i),"L",v(g),v(i),"L",v(g),v(y),"L",v(n),v(y),"Z");break;case s.OPS.moveTo:n=e[a++],i=e[a++],o.push("M",v(n),v(i));break;case s.OPS.lineTo:n=e[a++],i=e[a++],o.push("L",v(n),v(i));break;case s.OPS.curveTo:n=e[a+4],i=e[a+5],o.push("C",v(e[a]),v(e[a+1]),v(e[a+2]),v(e[a+3]),v(n),v(i)),a+=6;break;case s.OPS.curveTo2:n=e[a+2],i=e[a+3],o.push("C",v(n),v(i),v(e[a]),v(e[a+1]),v(e[a+2]),v(e[a+3])),a+=4;break;case s.OPS.curveTo3:n=e[a+2],i=e[a+3],o.push("C",v(e[a]),v(e[a+1]),v(n),v(i),v(n),v(i)),a+=4;break;case s.OPS.closePath:o.push("Z")}}catch(t){c=!0,u=t}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}o=o.join(" "),r.path&&t.length>0&&t[0]!==s.OPS.rectangle&&t[0]!==s.OPS.moveTo?o=r.path.getAttributeNS(null,"d")+o:(r.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(r.path)),r.path.setAttributeNS(null,"d",o),r.path.setAttributeNS(null,"fill","none"),r.element=r.path,r.setCurrentPoint(n,i)}},{key:"endPath",value:function(){var t=this.current;if(t.path=null,this.pendingClip)if(t.element){var e="clippath".concat(k++),r=this.svgFactory.createElement("svg:clipPath");r.setAttributeNS(null,"id",e),r.setAttributeNS(null,"transform",y(this.transformMatrix));var n=t.element.cloneNode(!0);"evenodd"===this.pendingClip?n.setAttributeNS(null,"clip-rule","evenodd"):n.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,r.appendChild(n),this.defs.appendChild(r),t.activeClipUrl&&(t.clipGroup=null,this.extraStack.forEach((function(t){t.clipGroup=null})),r.setAttributeNS(null,"clip-path",t.activeClipUrl)),t.activeClipUrl="url(#".concat(e,")"),this.tgrp=null}else this.pendingClip=null}},{key:"clip",value:function(t){this.pendingClip=t}},{key:"closePath",value:function(){var t=this.current;if(t.path){var e="".concat(t.path.getAttributeNS(null,"d"),"Z");t.path.setAttributeNS(null,"d",e)}}},{key:"setLeading",value:function(t){this.current.leading=-t}},{key:"setTextRise",value:function(t){this.current.textRise=t}},{key:"setTextRenderingMode",value:function(t){this.current.textRenderingMode=t}},{key:"setHScale",value:function(t){this.current.textHScale=t/100}},{key:"setRenderingIntent",value:function(t){}},{key:"setFlatness",value:function(t){}},{key:"setGState",value:function(t){var e=!0,r=!1,n=void 0;try{for(var i,o=t[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=h(i.value,2),l=a[0],c=a[1];switch(l){case"LW":this.setLineWidth(c);break;case"LC":this.setLineCap(c);break;case"LJ":this.setLineJoin(c);break;case"ML":this.setMiterLimit(c);break;case"D":this.setDash(c[0],c[1]);break;case"RI":this.setRenderingIntent(c);break;case"FL":this.setFlatness(c);break;case"Font":this.setFont(c);break;case"CA":this.setStrokeAlpha(c);break;case"ca":this.setFillAlpha(c);break;default:(0,s.warn)("Unimplemented graphic state operator ".concat(l))}}}catch(t){r=!0,n=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw n}}}},{key:"fill",value:function(){var t=this.current;t.element&&(t.element.setAttributeNS(null,"fill",t.fillColor),t.element.setAttributeNS(null,"fill-opacity",t.fillAlpha),this.endPath())}},{key:"stroke",value:function(){var t=this.current;t.element&&(this._setStrokeAttributes(t.element),t.element.setAttributeNS(null,"fill","none"),this.endPath())}},{key:"_setStrokeAttributes",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=this.current,n=r.dashArray;1!==e&&n.length>0&&(n=n.map((function(t){return e*t}))),t.setAttributeNS(null,"stroke",r.strokeColor),t.setAttributeNS(null,"stroke-opacity",r.strokeAlpha),t.setAttributeNS(null,"stroke-miterlimit",v(r.miterLimit)),t.setAttributeNS(null,"stroke-linecap",r.lineCap),t.setAttributeNS(null,"stroke-linejoin",r.lineJoin),t.setAttributeNS(null,"stroke-width",v(e*r.lineWidth)+"px"),t.setAttributeNS(null,"stroke-dasharray",n.map(v).join(" ")),t.setAttributeNS(null,"stroke-dashoffset",v(e*r.dashPhase)+"px")}},{key:"eoFill",value:function(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}},{key:"fillStroke",value:function(){this.stroke(),this.fill()}},{key:"eoFillStroke",value:function(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}},{key:"closeStroke",value:function(){this.closePath(),this.stroke()}},{key:"closeFillStroke",value:function(){this.closePath(),this.fillStroke()}},{key:"closeEOFillStroke",value:function(){this.closePath(),this.eoFillStroke()}},{key:"paintSolidColorImageMask",value:function(){var t=this.svgFactory.createElement("svg:rect");t.setAttributeNS(null,"x","0"),t.setAttributeNS(null,"y","0"),t.setAttributeNS(null,"width","1px"),t.setAttributeNS(null,"height","1px"),t.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(t)}},{key:"paintJpegXObject",value:function(t,e,r){var n=this.objs.get(t),i=this.svgFactory.createElement("svg:image");i.setAttributeNS(_,"xlink:href",n.src),i.setAttributeNS(null,"width",v(e)),i.setAttributeNS(null,"height",v(r)),i.setAttributeNS(null,"x","0"),i.setAttributeNS(null,"y",v(-r)),i.setAttributeNS(null,"transform","scale(".concat(v(1/e)," ").concat(v(-1/r),")")),this._ensureTransformGroup().appendChild(i)}},{key:"paintImageXObject",value:function(t){var e=this.objs.get(t);e?this.paintInlineImageXObject(e):(0,s.warn)("Dependent image with object ID ".concat(t," is not ready yet"))}},{key:"paintInlineImageXObject",value:function(t,e){var r=t.width,n=t.height,i=S(t,this.forceDataSchema,!!e),o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y","0"),o.setAttributeNS(null,"width",v(r)),o.setAttributeNS(null,"height",v(n)),this.current.element=o,this.clip("nonzero");var a=this.svgFactory.createElement("svg:image");a.setAttributeNS(_,"xlink:href",i),a.setAttributeNS(null,"x","0"),a.setAttributeNS(null,"y",v(-n)),a.setAttributeNS(null,"width",v(r)+"px"),a.setAttributeNS(null,"height",v(n)+"px"),a.setAttributeNS(null,"transform","scale(".concat(v(1/r)," ").concat(v(-1/n),")")),e?e.appendChild(a):this._ensureTransformGroup().appendChild(a)}},{key:"paintImageMaskXObject",value:function(t){var e=this.current,r=t.width,n=t.height,i=e.fillColor;e.maskId="mask".concat(x++);var o=this.svgFactory.createElement("svg:mask");o.setAttributeNS(null,"id",e.maskId);var a=this.svgFactory.createElement("svg:rect");a.setAttributeNS(null,"x","0"),a.setAttributeNS(null,"y","0"),a.setAttributeNS(null,"width",v(r)),a.setAttributeNS(null,"height",v(n)),a.setAttributeNS(null,"fill",i),a.setAttributeNS(null,"mask","url(#".concat(e.maskId,")")),this.defs.appendChild(o),this._ensureTransformGroup().appendChild(a),this.paintInlineImageXObject(t,o)}},{key:"paintFormXObjectBegin",value:function(t,e){if(Array.isArray(t)&&6===t.length&&this.transform(t[0],t[1],t[2],t[3],t[4],t[5]),e){var r=e[2]-e[0],n=e[3]-e[1],i=this.svgFactory.createElement("svg:rect");i.setAttributeNS(null,"x",e[0]),i.setAttributeNS(null,"y",e[1]),i.setAttributeNS(null,"width",v(r)),i.setAttributeNS(null,"height",v(n)),this.current.element=i,this.clip("nonzero"),this.endPath()}}},{key:"paintFormXObjectEnd",value:function(){}},{key:"_initialize",value:function(t){var e=this.svgFactory.create(t.width,t.height),r=this.svgFactory.createElement("svg:defs");e.appendChild(r),this.defs=r;var n=this.svgFactory.createElement("svg:g");return n.setAttributeNS(null,"transform",y(t.transform)),e.appendChild(n),this.svg=n,e}},{key:"_ensureClipGroup",value:function(){if(!this.current.clipGroup){var t=this.svgFactory.createElement("svg:g");t.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(t),this.current.clipGroup=t}return this.current.clipGroup}},{key:"_ensureTransformGroup",value:function(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",y(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var i,o=(i=n(148))&&i.__esModule?i:{default:i},a=n(1),s=n(166);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t,e,r,n,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,i)}function p(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){f(o,n,i,a,s,"next",t)}function s(t){f(o,n,i,a,s,"throw",t)}a(void 0)}))}}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function y(t,e,r){return e&&v(t.prototype,e),r&&v(t,r),t}var m=r(50),_=r(51),b=r(52),w=r(53),S=/^file:\/\/\/[a-zA-Z]:\//,A=function(){function t(e){var r,n;g(this,t),this.source=e,this.url=(r=e.url,"file:"===(n=w.parse(r)).protocol||n.host?n:/^[a-z]:[/\\]/i.test(r)?w.parse("file:///".concat(r)):(n.host||(n.protocol="file:"),n)),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}return y(t,[{key:"getFullReader",value:function(){return(0,a.assert)(!this._fullRequestReader),this._fullRequestReader=this.isFsUrl?new T(this):new P(this),this._fullRequestReader}},{key:"getRangeReader",value:function(t,e){if(e<=this._progressiveDataLength)return null;var r=this.isFsUrl?new E(this,t,e):new R(this,t,e);return this._rangeRequestReaders.push(r),r}},{key:"cancelAllRequests",value:function(t){this._fullRequestReader&&this._fullRequestReader.cancel(t),this._rangeRequestReaders.slice(0).forEach((function(e){e.cancel(t)}))}},{key:"_progressiveDataLength",get:function(){return this._fullRequestReader?this._fullRequestReader._loaded:0}}]),t}();e.PDFNodeStream=A;var k=function(){function t(e){g(this,t),this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;var r=e.source;this._contentLength=r.length,this._loaded=0,this._filename=null,this._disableRange=r.disableRange||!1,this._rangeChunkSize=r.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!r.disableStream,this._isRangeSupported=!r.disableRange,this._readableStream=null,this._readCapability=(0,a.createPromiseCapability)(),this._headersCapability=(0,a.createPromiseCapability)()}var e;return y(t,[{key:"read",value:(e=p(o.default.mark((function t(){var e,r;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._readCapability.promise;case 2:if(!this._done){t.next=4;break}return t.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){t.next=6;break}throw this._storedError;case 6:if(null!==(e=this._readableStream.read())){t.next=10;break}return this._readCapability=(0,a.createPromiseCapability)(),t.abrupt("return",this.read());case 10:return this._loaded+=e.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),r=new Uint8Array(e).buffer,t.abrupt("return",{value:r,done:!1});case 14:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"cancel",value:function(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}},{key:"_error",value:function(t){this._storedError=t,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(t){var e=this;this._readableStream=t,t.on("readable",(function(){e._readCapability.resolve()})),t.on("end",(function(){t.destroy(),e._done=!0,e._readCapability.resolve()})),t.on("error",(function(t){e._error(t)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new a.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}},{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}}]),t}(),x=function(){function t(e){g(this,t),this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,a.createPromiseCapability)();var r=e.source;this._isStreamingSupported=!r.disableStream}var e;return y(t,[{key:"read",value:(e=p(o.default.mark((function t(){var e,r;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._readCapability.promise;case 2:if(!this._done){t.next=4;break}return t.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){t.next=6;break}throw this._storedError;case 6:if(null!==(e=this._readableStream.read())){t.next=10;break}return this._readCapability=(0,a.createPromiseCapability)(),t.abrupt("return",this.read());case 10:return this._loaded+=e.length,this.onProgress&&this.onProgress({loaded:this._loaded}),r=new Uint8Array(e).buffer,t.abrupt("return",{value:r,done:!1});case 14:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"cancel",value:function(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}},{key:"_error",value:function(t){this._storedError=t,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(t){var e=this;this._readableStream=t,t.on("readable",(function(){e._readCapability.resolve()})),t.on("end",(function(){t.destroy(),e._done=!0,e._readCapability.resolve()})),t.on("error",(function(t){e._error(t)})),this._storedError&&this._readableStream.destroy(this._storedError)}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}}]),t}();function C(t,e){return{protocol:t.protocol,auth:t.auth,host:t.hostname,port:t.port,path:t.path,method:"GET",headers:e}}var P=function(t){function e(t){var r;g(this,e);var n=function(e){if(404===e.statusCode){var n=new a.MissingPDFException('Missing PDF "'.concat(r._url,'".'));return r._storedError=n,void r._headersCapability.reject(n)}r._headersCapability.resolve(),r._setReadableStream(e);var i=function(t){return r._readableStream.headers[t.toLowerCase()]},o=(0,s.validateRangeRequestCapabilities)({getResponseHeader:i,isHttp:t.isHttp,rangeChunkSize:r._rangeChunkSize,disableRange:r._disableRange}),l=o.allowRangeRequests,c=o.suggestedLength;r._isRangeSupported=l,r._contentLength=c||r._contentLength,r._filename=(0,s.extractFilenameFromHeader)(i)};return(r=c(this,u(e).call(this,t)))._request=null,"http:"===r._url.protocol?r._request=_.request(C(r._url,t.httpHeaders),n):r._request=b.request(C(r._url,t.httpHeaders),n),r._request.on("error",(function(t){r._storedError=t,r._headersCapability.reject(t)})),r._request.end(),r}return h(e,t),e}(k),R=function(t){function e(t,r,n){var i;for(var o in g(this,e),(i=c(this,u(e).call(this,t)))._httpHeaders={},t.httpHeaders){var s=t.httpHeaders[o];void 0!==s&&(i._httpHeaders[o]=s)}i._httpHeaders.Range="bytes=".concat(r,"-").concat(n-1);var l=function(t){if(404!==t.statusCode)i._setReadableStream(t);else{var e=new a.MissingPDFException('Missing PDF "'.concat(i._url,'".'));i._storedError=e}};return i._request=null,"http:"===i._url.protocol?i._request=_.request(C(i._url,i._httpHeaders),l):i._request=b.request(C(i._url,i._httpHeaders),l),i._request.on("error",(function(t){i._storedError=t})),i._request.end(),i}return h(e,t),e}(x),T=function(t){function e(t){var r;g(this,e),r=c(this,u(e).call(this,t));var n=decodeURIComponent(r._url.path);return S.test(r._url.href)&&(n=n.replace(/^\//,"")),m.lstat(n,(function(t,e){if(t)return"ENOENT"===t.code&&(t=new a.MissingPDFException('Missing PDF "'.concat(n,'".'))),r._storedError=t,void r._headersCapability.reject(t);r._contentLength=e.size,r._setReadableStream(m.createReadStream(n)),r._headersCapability.resolve()})),r}return h(e,t),e}(k),E=function(t){function e(t,r,n){var i;g(this,e),i=c(this,u(e).call(this,t));var o=decodeURIComponent(i._url.path);return S.test(i._url.href)&&(o=o.replace(/^\//,"")),i._setReadableStream(m.createReadStream(o,{start:r,end:n-1})),i}return h(e,t),e}(x)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=function(t,e){return 404===t||0===t&&/^file:/.test(e)?new n.MissingPDFException('Missing PDF "'+e+'".'):new n.UnexpectedResponseException("Unexpected server response ("+t+') while retrieving PDF "'+e+'".',t)},e.extractFilenameFromHeader=function(t){var e=t("Content-Disposition");if(e){var r=(0,i.getFilenameFromContentDispositionHeader)(e);if(/\.pdf$/i.test(r))return r}return null},e.validateRangeRequestCapabilities=function(t){var e=t.getResponseHeader,r=t.isHttp,i=t.rangeChunkSize,o=t.disableRange;(0,n.assert)(i>0,"Range chunk size must be larger than zero");var a={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(e("Content-Length"),10);return Number.isInteger(s)?(a.suggestedLength=s,s<=2*i?a:o||!r?a:"bytes"!==e("Accept-Ranges")?a:"identity"!==(e("Content-Encoding")||"identity")?a:(a.allowRangeRequests=!0,a)):a},e.validateResponseStatus=function(t){return 200===t||206===t};var n=r(1),i=r(167)},function(t,e,r){"use strict";function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=function(t){var e=!0,r=a("filename\\*","i").exec(t);if(r){var i=c(r=r[1]);return l(i=h(i=u(i=unescape(i))))}if(r=function(t){for(var e,r=[],i=a("filename\\*((?!0\\d)\\d+)(\\*?)","ig");null!==(e=i.exec(t));){var o=n(e,4),s=o[1],l=o[2],h=o[3];if((s=parseInt(s,10))in r){if(0===s)break}else r[s]=[l,h]}var d=[];for(s=0;s<r.length&&s in r;++s){var f=n(r[s],2);l=f[0],h=c(h=f[1]),l&&(h=unescape(h),0===s&&(h=u(h))),d.push(h)}return d.join("")}(t))return l(h(r));if(r=a("filename","i").exec(t)){var o=c(r=r[1]);return l(o=h(o))}function a(t,e){return new RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',e)}function s(t,r){if(t){if(!/^[\x00-\xFF]+$/.test(r))return r;try{var n=new TextDecoder(t,{fatal:!0}),i=Array.from(r,(function(t){return 255&t.charCodeAt(0)}));r=n.decode(new Uint8Array(i)),e=!1}catch(n){if(/^utf-?8$/i.test(t))try{r=decodeURIComponent(escape(r)),e=!1}catch(t){}}}return r}function l(t){return e&&/[\x80-\xff]/.test(t)&&(t=s("utf-8",t),e&&(t=s("iso-8859-1",t))),t}function c(t){if(t.startsWith('"')){for(var e=t.slice(1).split('\\"'),r=0;r<e.length;++r){var n=e[r].indexOf('"');-1!==n&&(e[r]=e[r].slice(0,n),e.length=r+1),e[r]=e[r].replace(/\\(.)/g,"$1")}t=e.join('"')}return t}function u(t){var e=t.indexOf("'");return-1===e?t:s(t.slice(0,e),t.slice(e+1).replace(/^[^']*'/,""))}function h(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(t,e,r,n){if("q"===r||"Q"===r)return s(e,n=(n=n.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,(function(t,e){return String.fromCharCode(parseInt(e,16))})));try{n=atob(n)}catch(t){}return s(e,n)}))}return""}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var n,i=(n=r(148))&&n.__esModule?n:{default:n},o=r(1),a=r(166);function s(t,e,r,n,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,i)}function l(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){s(o,n,i,a,l,"next",t)}function l(t){s(o,n,i,a,l,"throw",t)}a(void 0)}))}}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),t}var d=function(){function t(e,r){c(this,t),this.url=e,r=r||{},this.isHttp=/^https?:/i.test(e),this.httpHeaders=this.isHttp&&r.httpHeaders||{},this.withCredentials=r.withCredentials||!1,this.getXhr=r.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}return h(t,[{key:"requestRange",value:function(t,e,r){var n={begin:t,end:e};for(var i in r)n[i]=r[i];return this.request(n)}},{key:"requestFull",value:function(t){return this.request(t)}},{key:"request",value:function(t){var e=this.getXhr(),r=this.currXhrId++,n=this.pendingRequests[r]={xhr:e};for(var i in e.open("GET",this.url),e.withCredentials=this.withCredentials,this.httpHeaders){var o=this.httpHeaders[i];void 0!==o&&e.setRequestHeader(i,o)}return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range","bytes=".concat(t.begin,"-").concat(t.end-1)),n.expectedStatus=206):n.expectedStatus=200,e.responseType="arraybuffer",t.onError&&(e.onerror=function(r){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,r),e.onprogress=this.onProgress.bind(this,r),n.onHeadersReceived=t.onHeadersReceived,n.onDone=t.onDone,n.onError=t.onError,n.onProgress=t.onProgress,e.send(null),r}},{key:"onProgress",value:function(t,e){var r=this.pendingRequests[t];r&&r.onProgress&&r.onProgress(e)}},{key:"onStateChange",value:function(t,e){var r=this.pendingRequests[t];if(r){var n=r.xhr;if(n.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),4===n.readyState&&t in this.pendingRequests)if(delete this.pendingRequests[t],0===n.status&&this.isHttp)r.onError&&r.onError(n.status);else{var i=n.status||200;if(200===i&&206===r.expectedStatus||i===r.expectedStatus){var a=function(t){var e=t.response;return"string"!=typeof e?e:(0,o.stringToBytes)(e).buffer}(n);if(206===i){var s=n.getResponseHeader("Content-Range"),l=/bytes (\d+)-(\d+)\/(\d+)/.exec(s);r.onDone({begin:parseInt(l[1],10),chunk:a})}else a?r.onDone({begin:0,chunk:a}):r.onError&&r.onError(n.status)}else r.onError&&r.onError(n.status)}}}},{key:"hasPendingRequests",value:function(){for(var t in this.pendingRequests)return!0;return!1}},{key:"getRequestXhr",value:function(t){return this.pendingRequests[t].xhr}},{key:"isPendingRequest",value:function(t){return t in this.pendingRequests}},{key:"abortAllRequests",value:function(){for(var t in this.pendingRequests)this.abortRequest(0|t)}},{key:"abortRequest",value:function(t){var e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}]),t}(),f=function(){function t(e){c(this,t),this._source=e,this._manager=new d(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}return h(t,[{key:"_onRangeRequestReaderClosed",value:function(t){var e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}},{key:"getFullReader",value:function(){return(0,o.assert)(!this._fullRequestReader),this._fullRequestReader=new p(this._manager,this._source),this._fullRequestReader}},{key:"getRangeReader",value:function(t,e){var r=new g(this._manager,t,e);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}},{key:"cancelAllRequests",value:function(t){this._fullRequestReader&&this._fullRequestReader.cancel(t),this._rangeRequestReaders.slice(0).forEach((function(e){e.cancel(t)}))}}]),t}();e.PDFNetworkStream=f;var p=function(){function t(e,r){c(this,t),this._manager=e;var n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=r.url,this._fullRequestId=e.requestFull(n),this._headersReceivedCapability=(0,o.createPromiseCapability)(),this._disableRange=r.disableRange||!1,this._contentLength=r.length,this._rangeChunkSize=r.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}var e;return h(t,[{key:"_onHeadersReceived",value:function(){var t=this._fullRequestId,e=this._manager.getRequestXhr(t),r=function(t){return e.getResponseHeader(t)},n=(0,a.validateRangeRequestCapabilities)({getResponseHeader:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange}),i=n.allowRangeRequests,o=n.suggestedLength;i&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(r),this._isRangeSupported&&this._manager.abortRequest(t),this._headersReceivedCapability.resolve()}},{key:"_onDone",value:function(t){t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,this._cachedChunks.length>0||(this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})})),this._requests=[])}},{key:"_onError",value:function(t){var e=this._url,r=(0,a.createResponseStatusError)(t,e);this._storedError=r,this._headersReceivedCapability.reject(r),this._requests.forEach((function(t){t.reject(r)})),this._requests=[],this._cachedChunks=[]}},{key:"_onProgress",value:function(t){this.onProgress&&this.onProgress({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}},{key:"read",value:(e=l(i.default.mark((function t(){var e,r;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._storedError){t.next=2;break}throw this._storedError;case 2:if(!(this._cachedChunks.length>0)){t.next=5;break}return e=this._cachedChunks.shift(),t.abrupt("return",{value:e,done:!1});case 5:if(!this._done){t.next=7;break}return t.abrupt("return",{value:void 0,done:!0});case 7:return r=(0,o.createPromiseCapability)(),this._requests.push(r),t.abrupt("return",r.promise);case 10:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"cancel",value:function(t){this._done=!0,this._headersReceivedCapability.reject(t),this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})})),this._requests=[],this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}},{key:"filename",get:function(){return this._filename}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"contentLength",get:function(){return this._contentLength}},{key:"headersReady",get:function(){return this._headersReceivedCapability.promise}}]),t}(),g=function(){function t(e,r,n){c(this,t),this._manager=e;var i={onDone:this._onDone.bind(this),onProgress:this._onProgress.bind(this)};this._requestId=e.requestRange(r,n,i),this._requests=[],this._queuedChunk=null,this._done=!1,this.onProgress=null,this.onClosed=null}var e;return h(t,[{key:"_close",value:function(){this.onClosed&&this.onClosed(this)}},{key:"_onDone",value:function(t){var e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0,this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})})),this._requests=[],this._close()}},{key:"_onProgress",value:function(t){!this.isStreamingSupported&&this.onProgress&&this.onProgress({loaded:t.loaded})}},{key:"read",value:(e=l(i.default.mark((function t(){var e,r;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===this._queuedChunk){t.next=4;break}return e=this._queuedChunk,this._queuedChunk=null,t.abrupt("return",{value:e,done:!1});case 4:if(!this._done){t.next=6;break}return t.abrupt("return",{value:void 0,done:!0});case 6:return r=(0,o.createPromiseCapability)(),this._requests.push(r),t.abrupt("return",r.promise);case 9:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"cancel",value:function(t){this._done=!0,this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})})),this._requests=[],this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}},{key:"isStreamingSupported",get:function(){return!1}}]),t}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var n,i=(n=r(148))&&n.__esModule?n:{default:n},o=r(1),a=r(166);function s(t,e,r,n,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,i)}function l(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){s(o,n,i,a,l,"next",t)}function l(t){s(o,n,i,a,l,"throw",t)}a(void 0)}))}}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),t}function d(t,e,r){return{method:"GET",headers:t,signal:r&&r.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}var f=function(){function t(e){c(this,t),this.source=e,this.isHttp=/^https?:/i.test(e.url),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}return h(t,[{key:"getFullReader",value:function(){return(0,o.assert)(!this._fullRequestReader),this._fullRequestReader=new p(this),this._fullRequestReader}},{key:"getRangeReader",value:function(t,e){if(e<=this._progressiveDataLength)return null;var r=new g(this,t,e);return this._rangeRequestReaders.push(r),r}},{key:"cancelAllRequests",value:function(t){this._fullRequestReader&&this._fullRequestReader.cancel(t),this._rangeRequestReaders.slice(0).forEach((function(e){e.cancel(t)}))}},{key:"_progressiveDataLength",get:function(){return this._fullRequestReader?this._fullRequestReader._loaded:0}}]),t}();e.PDFFetchStream=f;var p=function(){function t(e){var r=this;c(this,t),this._stream=e,this._reader=null,this._loaded=0,this._filename=null;var n=e.source;for(var i in this._withCredentials=n.withCredentials||!1,this._contentLength=n.length,this._headersCapability=(0,o.createPromiseCapability)(),this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._headers=new Headers,this._stream.httpHeaders){var s=this._stream.httpHeaders[i];void 0!==s&&this._headers.append(i,s)}var l=n.url;fetch(l,d(this._headers,this._withCredentials,this._abortController)).then((function(t){if(!(0,a.validateResponseStatus)(t.status))throw(0,a.createResponseStatusError)(t.status,l);r._reader=t.body.getReader(),r._headersCapability.resolve();var e=function(e){return t.headers.get(e)},n=(0,a.validateRangeRequestCapabilities)({getResponseHeader:e,isHttp:r._stream.isHttp,rangeChunkSize:r._rangeChunkSize,disableRange:r._disableRange}),i=n.allowRangeRequests,s=n.suggestedLength;r._isRangeSupported=i,r._contentLength=s||r._contentLength,r._filename=(0,a.extractFilenameFromHeader)(e),!r._isStreamingSupported&&r._isRangeSupported&&r.cancel(new o.AbortException("Streaming is disabled."))})).catch(this._headersCapability.reject),this.onProgress=null}var e;return h(t,[{key:"read",value:(e=l(i.default.mark((function t(){var e,r,n,o;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._headersCapability.promise;case 2:return t.next=4,this._reader.read();case 4:if(e=t.sent,r=e.value,!(n=e.done)){t.next=9;break}return t.abrupt("return",{value:r,done:n});case 9:return this._loaded+=r.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),o=new Uint8Array(r).buffer,t.abrupt("return",{value:o,done:!1});case 13:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"cancel",value:function(t){this._reader&&this._reader.cancel(t),this._abortController&&this._abortController.abort()}},{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}}]),t}(),g=function(){function t(e,r,n){var i=this;c(this,t),this._stream=e,this._reader=null,this._loaded=0;var s=e.source;for(var l in this._withCredentials=s.withCredentials||!1,this._readCapability=(0,o.createPromiseCapability)(),this._isStreamingSupported=!s.disableStream,"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._headers=new Headers,this._stream.httpHeaders){var u=this._stream.httpHeaders[l];void 0!==u&&this._headers.append(l,u)}this._headers.append("Range","bytes=".concat(r,"-").concat(n-1));var h=s.url;fetch(h,d(this._headers,this._withCredentials,this._abortController)).then((function(t){if(!(0,a.validateResponseStatus)(t.status))throw(0,a.createResponseStatusError)(t.status,h);i._readCapability.resolve(),i._reader=t.body.getReader()})),this.onProgress=null}var e;return h(t,[{key:"read",value:(e=l(i.default.mark((function t(){var e,r,n,o;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._readCapability.promise;case 2:return t.next=4,this._reader.read();case 4:if(e=t.sent,r=e.value,!(n=e.done)){t.next=9;break}return t.abrupt("return",{value:r,done:n});case 9:return this._loaded+=r.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),o=new Uint8Array(r).buffer,t.abrupt("return",{value:o,done:!1});case 13:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"cancel",value:function(t){this._reader&&this._reader.cancel(t),this._abortController&&this._abortController.abort()}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}}]),t}()}])},t.exports=o()}).call(this,r(44).Buffer,r(19),r(48))},function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(12),i=r.n(n);class o{constructor(t){this.posStart,this.posNow,this.mode="",this.viewportInstance=t,this.width=t.viewport.offsetWidth,this.height=t.viewport.offsetHeight,this.stage=new i.a.Stage({container:"container",width:this.width,height:this.height}),this.layer=new i.a.Layer({draggable:!1}),this.group=new i.a.Group({draggable:!1}),this.stage.add(this.layer),this.layer.add(this.group),this.scalePdf=t.pdfViewport.scale,this.tmp_rect=this.createTmpRectForLayer(this.layer),this.layer.draw(),this.setEvent()}isTransformableNode(t){return t.hasName("node")}createTmpRectForLayer(t){let e=new i.a.Rect({x:0,y:0,width:0,height:0,stroke:"black",name:"not_rect",dash:[2,2]});return e.listening(!1),t.add(e),e}setEvent(){this.stage.on("click tap",t=>{if(t.target===this.stage)return this.mode="",this.destroyTransformer(),void this.layer.draw();this.isTransformableNode(t.target)?(this.mode="not_drawing",this.addTransformer(t),this.layer.draw()):this.mode=""}),this.stage.on("mousedown",t=>{this.isTransformableNode(t.target)||"not_drawing"==this.mode||(this.mode="drawing",this.startDrag({x:t.evt.layerX,y:t.evt.layerY}))}),this.stage.on("mousemove",t=>{"drawing"===this.mode&&this.updateDrag({x:t.evt.layerX,y:t.evt.layerY},this.tmp_rect)}),this.stage.on("mouseup",t=>{if("drawing"!==this.mode||this.tmp_rect.width()<5||this.tmp_rect.height()<5)return;this.mode="",this.tmp_rect.visible(!1);let e=this.createRectangle(this.tmp_rect.width(),this.tmp_rect.height(),this.tmp_rect.x(),this.tmp_rect.y());this.tmp_rect.width(0),this.tmp_rect.height(0),this.group.add(e),this.group.draw()})}startDrag(t){this.posStart={x:t.x,y:t.y},this.posNow={x:t.x,y:t.y}}reverseCoord(t,e){var r,n=t.x,i=t.y,o=e.x,a=e.y;return n>o&&(r=Math.abs(n-o),o=(n=o)+r),i>a&&(r=Math.abs(i-a),a=(i=a)+r),{x1:n,y1:i,x2:o,y2:a}}updateDrag(t,e){this.posNow={x:t.x,y:t.y};var r=this.reverseCoord(this.posStart,this.posNow);e.x(r.x1),e.y(r.y1),e.width(r.x2-r.x1),e.height(r.y2-r.y1),e.visible(!0),this.stage.draw()}addTransformer(t){this.destroyTransformer();let e=new i.a.Transformer({keepRatio:!1,rotateEnabled:!1,ignoreStroke:!0});return this.group.add(e),t.hasName("node")||t.hasName("node_image")?e.attachTo(t):e.attachTo(t.parent),e}destroyTransformer(){this.stage.find("Transformer").destroy(),this.stage.find("Rect.deleteRect").destroy()}defaultColorBorder(){return"turquoise"}createRectangle(t,e,r,n){return new i.a.Rect({x:r,y:n,width:t,height:e,stroke:this.defaultColorBorder(),draggable:!0,name:"node",strokeScaleEnabled:!1})}}},,,function(t,e,r){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=r(45),i=r(46),o=r(47);function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,r){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return c(this,t,e,r)}function c(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=d(t,e);return t}(t,e,r,n):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!l.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|p(e,r),i=(t=s(t,n)).write(e,r);i!==n&&(t=t.slice(0,i));return t}(t,e,r):function(t,e){if(l.isBuffer(e)){var r=0|f(e.length);return 0===(t=s(t,r)).length?t:(e.copy(t,0,0,r),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?s(t,0):d(t,e);if("Buffer"===e.type&&o(e.data))return d(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(u(e),t=s(t,e<0?0:0|f(e)),!l.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function d(t,e){var r=e.length<0?0:0|f(e.length);t=s(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function f(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function p(t,e){if(l.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return G(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return q(t).length;default:if(n)return G(t).length;e=(""+e).toLowerCase(),n=!0}}function g(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return T(this,e,r);case"utf8":case"utf-8":return C(this,e,r);case"ascii":return P(this,e,r);case"latin1":case"binary":return R(this,e,r);case"base64":return x(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function v(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function y(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=l.from(e,n)),l.isBuffer(e))return 0===e.length?-1:m(t,e,r,n,i);if("number"==typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):m(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function m(t,e,r,n,i){var o,a=1,s=t.length,l=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,s/=2,l/=2,r/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var u=-1;for(o=r;o<s;o++)if(c(t,o)===c(e,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===l)return u*a}else-1!==u&&(o-=o-u),u=-1}else for(r+l>s&&(r=s-l),o=r;o>=0;o--){for(var h=!0,d=0;d<l;d++)if(c(t,o+d)!==c(e,d)){h=!1;break}if(h)return o}return-1}function _(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[r+a]=s}return a}function b(t,e,r,n){return B(G(e,t.length-r),t,r,n)}function w(t,e,r,n){return B(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function S(t,e,r,n){return w(t,e,r,n)}function A(t,e,r,n){return B(q(e),t,r,n)}function k(t,e,r,n){return B(function(t,e){for(var r,n,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)r=t.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function x(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function C(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,a,s,l,c=t[i],u=null,h=c>239?4:c>223?3:c>191?2:1;if(i+h<=r)switch(h){case 1:c<128&&(u=c);break;case 2:128==(192&(o=t[i+1]))&&(l=(31&c)<<6|63&o)>127&&(u=l);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(l=(15&c)<<12|(63&o)<<6|63&a)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(l=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(u=l)}null===u?(u=65533,h=1):u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),i+=h}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=4096));return r}(n)}e.Buffer=l,e.SlowBuffer=function(t){+t!=t&&(t=0);return l.alloc(+t)},e.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,r){return c(null,t,e,r)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,r){return function(t,e,r,n){return u(e),e<=0?s(t,e):void 0!==r?"string"==typeof n?s(t,e).fill(r,n):s(t,e).fill(r):s(t,e)}(null,t,e,r)},l.allocUnsafe=function(t){return h(null,t)},l.allocUnsafeSlow=function(t){return h(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=l.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var a=t[r];if(!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?C(this,0,t):g.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,r,n,i){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0),s=Math.min(o,a),c=this.slice(n,i),u=t.slice(e,r),h=0;h<s;++h)if(c[h]!==u[h]){o=c[h],a=u[h];break}return o<a?-1:a<o?1:0},l.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},l.prototype.indexOf=function(t,e,r){return y(this,t,e,r,!0)},l.prototype.lastIndexOf=function(t,e,r){return y(this,t,e,r,!1)},l.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return _(this,t,e,r);case"utf8":case"utf-8":return b(this,t,e,r);case"ascii":return w(this,t,e,r);case"latin1":case"binary":return S(this,t,e,r);case"base64":return A(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function P(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function R(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function T(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=U(t[o]);return i}function E(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function O(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function F(t,e,r,n,i,o){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function I(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function M(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function L(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function D(t,e,r,n,o){return o||L(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function N(t,e,r,n,o){return o||L(t,0,r,8),i.write(t,e,r,n,52,8),r+8}l.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=l.prototype;else{var i=e-t;r=new l(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+t]}return r},l.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||O(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},l.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||O(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},l.prototype.readUInt8=function(t,e){return e||O(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||O(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||O(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||O(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||O(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||O(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},l.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||O(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},l.prototype.readInt8=function(t,e){return e||O(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||O(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(t,e){e||O(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(t,e){return e||O(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||O(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||O(t,4,this.length),i.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||O(t,4,this.length),i.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||O(t,8,this.length),i.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||O(t,8,this.length),i.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||F(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},l.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||F(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},l.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):M(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):M(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);F(this,t,e,r,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<r&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},l.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);F(this,t,e,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},l.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):M(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||F(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):M(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,r){return D(this,t,e,!0,r)},l.prototype.writeFloatBE=function(t,e,r){return D(this,t,e,!1,r)},l.prototype.writeDoubleLE=function(t,e,r){return N(this,t,e,!0,r)},l.prototype.writeDoubleBE=function(t,e,r){return N(this,t,e,!1,r)},l.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,o=n-r;if(this===t&&r<e&&e<n)for(i=o-1;i>=0;--i)t[i+e]=this[i+r];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},l.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var a=l.isBuffer(t)?t:G(new l(t,n).toString()),s=a.length;for(o=0;o<r-e;++o)this[o+e]=a[o%s]}return this};var j=/[^+\/0-9A-Za-z-_]/g;function U(t){return t<16?"0"+t.toString(16):t.toString(16)}function G(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],a=0;a<n;++a){if((r=t.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function q(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(j,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function B(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}}).call(this,r(19))},function(t,e,r){"use strict";e.byteLength=function(t){var e=c(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,n=c(t),a=n[0],s=n[1],l=new o(function(t,e,r){return 3*(e+r)/4-r}(0,a,s)),u=0,h=s>0?a-4:a;for(r=0;r<h;r+=4)e=i[t.charCodeAt(r)]<<18|i[t.charCodeAt(r+1)]<<12|i[t.charCodeAt(r+2)]<<6|i[t.charCodeAt(r+3)],l[u++]=e>>16&255,l[u++]=e>>8&255,l[u++]=255&e;2===s&&(e=i[t.charCodeAt(r)]<<2|i[t.charCodeAt(r+1)]>>4,l[u++]=255&e);1===s&&(e=i[t.charCodeAt(r)]<<10|i[t.charCodeAt(r+1)]<<4|i[t.charCodeAt(r+2)]>>2,l[u++]=e>>8&255,l[u++]=255&e);return l},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,o=[],a=0,s=r-i;a<s;a+=16383)o.push(u(t,a,a+16383>s?s:a+16383));1===i?(e=t[r-1],o.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],o.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=a.length;s<l;++s)n[s]=a[s],i[a.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function u(t,e,r){for(var i,o,a=[],s=e;s<r;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,r,n,i){var o,a,s=8*i-n-1,l=(1<<s)-1,c=l>>1,u=-7,h=r?i-1:0,d=r?-1:1,f=t[e+h];for(h+=d,o=f&(1<<-u)-1,f>>=-u,u+=s;u>0;o=256*o+t[e+h],h+=d,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=n;u>0;a=256*a+t[e+h],h+=d,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,n),o-=c}return(f?-1:1)*a*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var a,s,l,c=8*o-i-1,u=(1<<c)-1,h=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,p=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(e*l-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[r+f]=255&s,f+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[r+f]=255&a,f+=p,a/=256,c-=8);t[r+f-p]|=128*g}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e){var r,n,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var l,c=[],u=!1,h=-1;function d(){u&&l&&(u=!1,l.length?c=l.concat(c):h=-1,c.length&&f())}function f(){if(!u){var t=s(d);u=!0;for(var e=c.length;e;){for(l=c,c=[];++h<e;)l&&l[h].run();h=-1,e=c.length}l=null,u=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new p(t,e)),1!==c.length||u||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,r){"use strict";var n=r(54),i=r(56);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=_,e.resolve=function(t,e){return _(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?_(t,!1,!0).resolveObject(e):e},e.format=function(t){i.isString(t)&&(t=_(t));return t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o;var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(c),h=["%","/","?",";","#"].concat(u),d=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},m=r(57);function _(t,e,r){if(t&&i.isObject(t)&&t instanceof o)return t;var n=new o;return n.parse(t,e,r),n}o.prototype.parse=function(t,e,r){if(!i.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),s=-1!==o&&o<t.indexOf("#")?"?":"#",c=t.split(s);c[0]=c[0].replace(/\\/g,"/");var _=t=c.join(s);if(_=_.trim(),!r&&1===t.split("#").length){var b=l.exec(_);if(b)return this.path=_,this.href=_,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?m.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var w=a.exec(_);if(w){var S=(w=w[0]).toLowerCase();this.protocol=S,_=_.substr(w.length)}if(r||w||_.match(/^\/\/[^@\/]+@[^@\/]+/)){var A="//"===_.substr(0,2);!A||w&&v[w]||(_=_.substr(2),this.slashes=!0)}if(!v[w]&&(A||w&&!y[w])){for(var k,x,C=-1,P=0;P<d.length;P++){-1!==(R=_.indexOf(d[P]))&&(-1===C||R<C)&&(C=R)}-1!==(x=-1===C?_.lastIndexOf("@"):_.lastIndexOf("@",C))&&(k=_.slice(0,x),_=_.slice(x+1),this.auth=decodeURIComponent(k)),C=-1;for(P=0;P<h.length;P++){var R;-1!==(R=_.indexOf(h[P]))&&(-1===C||R<C)&&(C=R)}-1===C&&(C=_.length),this.host=_.slice(0,C),_=_.slice(C),this.parseHost(),this.hostname=this.hostname||"";var T="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!T)for(var E=this.hostname.split(/\./),O=(P=0,E.length);P<O;P++){var F=E[P];if(F&&!F.match(f)){for(var I="",M=0,L=F.length;M<L;M++)F.charCodeAt(M)>127?I+="x":I+=F[M];if(!I.match(f)){var D=E.slice(0,P),N=E.slice(P+1),j=F.match(p);j&&(D.push(j[1]),N.unshift(j[2])),N.length&&(_="/"+N.join(".")+_),this.hostname=D.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),T||(this.hostname=n.toASCII(this.hostname));var U=this.port?":"+this.port:"",G=this.hostname||"";this.host=G+U,this.href+=this.host,T&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==_[0]&&(_="/"+_))}if(!g[S])for(P=0,O=u.length;P<O;P++){var q=u[P];if(-1!==_.indexOf(q)){var B=encodeURIComponent(q);B===q&&(B=escape(q)),_=_.split(q).join(B)}}var W=_.indexOf("#");-1!==W&&(this.hash=_.substr(W),_=_.slice(0,W));var z=_.indexOf("?");if(-1!==z?(this.search=_.substr(z),this.query=_.substr(z+1),e&&(this.query=m.parse(this.query)),_=_.slice(0,z)):e&&(this.search="",this.query={}),_&&(this.pathname=_),y[S]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){U=this.pathname||"";var H=this.search||"";this.path=U+H}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,a="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(a=m.stringify(this.query));var s=this.search||a&&"?"+a||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||y[e])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),e+o+(r=r.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(s=s.replace("#","%23"))+n},o.prototype.resolve=function(t){return this.resolveObject(_(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(i.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var r=new o,n=Object.keys(this),a=0;a<n.length;a++){var s=n[a];r[s]=this[s]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var l=Object.keys(t),c=0;c<l.length;c++){var u=l[c];"protocol"!==u&&(r[u]=t[u])}return y[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!y[t.protocol]){for(var h=Object.keys(t),d=0;d<h.length;d++){var f=h[d];r[f]=t[f]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||v[t.protocol])r.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),r.pathname=p.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var g=r.pathname||"",m=r.search||"";r.path=g+m}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var _=r.pathname&&"/"===r.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),w=b||_||r.host&&t.pathname,S=w,A=r.pathname&&r.pathname.split("/")||[],k=(p=t.pathname&&t.pathname.split("/")||[],r.protocol&&!y[r.protocol]);if(k&&(r.hostname="",r.port=null,r.host&&(""===A[0]?A[0]=r.host:A.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),w=w&&(""===p[0]||""===A[0])),b)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,A=p;else if(p.length)A||(A=[]),A.pop(),A=A.concat(p),r.search=t.search,r.query=t.query;else if(!i.isNullOrUndefined(t.search)){if(k)r.hostname=r.host=A.shift(),(T=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=T.shift(),r.host=r.hostname=T.shift());return r.search=t.search,r.query=t.query,i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!A.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var x=A.slice(-1)[0],C=(r.host||t.host||A.length>1)&&("."===x||".."===x)||""===x,P=0,R=A.length;R>=0;R--)"."===(x=A[R])?A.splice(R,1):".."===x?(A.splice(R,1),P++):P&&(A.splice(R,1),P--);if(!w&&!S)for(;P--;P)A.unshift("..");!w||""===A[0]||A[0]&&"/"===A[0].charAt(0)||A.unshift(""),C&&"/"!==A.join("/").substr(-1)&&A.push("");var T,E=""===A[0]||A[0]&&"/"===A[0].charAt(0);k&&(r.hostname=r.host=E?"":A.length?A.shift():"",(T=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=T.shift(),r.host=r.hostname=T.shift()));return(w=w||r.host&&A.length)&&!E&&A.unshift(""),A.length?r.pathname=A.join("/"):(r.pathname=null,r.path=null),i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},o.prototype.parseHost=function(){var t=this.host,e=s.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,r){(function(t,n){var i;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(o){e&&e.nodeType,t&&t.nodeType;var a="object"==typeof n&&n;a.global!==a&&a.window!==a&&a.self;var s,l=2147483647,c=/^xn--/,u=/[^\x20-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,p=String.fromCharCode;function g(t){throw new RangeError(d[t])}function v(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function y(t,e){var r=t.split("@"),n="";return r.length>1&&(n=r[0]+"@",t=r[1]),n+v((t=t.replace(h,".")).split("."),e).join(".")}function m(t){for(var e,r,n=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(r=t.charCodeAt(i++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--):n.push(e);return n}function _(t){return v(t,(function(t){var e="";return t>65535&&(e+=p((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=p(t)})).join("")}function b(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function w(t,e,r){var n=0;for(t=r?f(t/700):t>>1,t+=f(t/e);t>455;n+=36)t=f(t/35);return f(n+36*t/(t+38))}function S(t){var e,r,n,i,o,a,s,c,u,h,d,p=[],v=t.length,y=0,m=128,b=72;for((r=t.lastIndexOf("-"))<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&g("not-basic"),p.push(t.charCodeAt(n));for(i=r>0?r+1:0;i<v;){for(o=y,a=1,s=36;i>=v&&g("invalid-input"),((c=(d=t.charCodeAt(i++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:36)>=36||c>f((l-y)/a))&&g("overflow"),y+=c*a,!(c<(u=s<=b?1:s>=b+26?26:s-b));s+=36)a>f(l/(h=36-u))&&g("overflow"),a*=h;b=w(y-o,e=p.length+1,0==o),f(y/e)>l-m&&g("overflow"),m+=f(y/e),y%=e,p.splice(y++,0,m)}return _(p)}function A(t){var e,r,n,i,o,a,s,c,u,h,d,v,y,_,S,A=[];for(v=(t=m(t)).length,e=128,r=0,o=72,a=0;a<v;++a)(d=t[a])<128&&A.push(p(d));for(n=i=A.length,i&&A.push("-");n<v;){for(s=l,a=0;a<v;++a)(d=t[a])>=e&&d<s&&(s=d);for(s-e>f((l-r)/(y=n+1))&&g("overflow"),r+=(s-e)*y,e=s,a=0;a<v;++a)if((d=t[a])<e&&++r>l&&g("overflow"),d==e){for(c=r,u=36;!(c<(h=u<=o?1:u>=o+26?26:u-o));u+=36)S=c-h,_=36-h,A.push(p(b(h+S%_,0))),c=f(S/_);A.push(p(b(c,0))),o=w(r,y,n==i),r=0,++n}++r,++e}return A.join("")}s={version:"1.4.1",ucs2:{decode:m,encode:_},decode:S,encode:A,toASCII:function(t){return y(t,(function(t){return u.test(t)?"xn--"+A(t):t}))},toUnicode:function(t){return y(t,(function(t){return c.test(t)?S(t.slice(4).toLowerCase()):t}))}},void 0===(i=function(){return s}.call(e,r,e,t))||(t.exports=i)}()}).call(this,r(55)(t),r(19))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,r){"use strict";e.decode=e.parse=r(58),e.encode=e.stringify=r(59)},function(t,e,r){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,r,o){e=e||"&",r=r||"=";var a={};if("string"!=typeof t||0===t.length)return a;var s=/\+/g;t=t.split(e);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var c=t.length;l>0&&c>l&&(c=l);for(var u=0;u<c;++u){var h,d,f,p,g=t[u].replace(s,"%20"),v=g.indexOf(r);v>=0?(h=g.substr(0,v),d=g.substr(v+1)):(h=g,d=""),f=decodeURIComponent(h),p=decodeURIComponent(d),n(a,f)?i(a[f])?a[f].push(p):a[f]=[a[f],p]:a[f]=p}return a};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,r){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,r,s){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?o(a(t),(function(a){var s=encodeURIComponent(n(a))+r;return i(t[a])?o(t[a],(function(t){return s+encodeURIComponent(n(t))})).join(e):s+encodeURIComponent(n(t[a]))})).join(e):s?encodeURIComponent(n(s))+r+encodeURIComponent(n(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var a=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(61),i=r(66),o=r(67),a=r(68),s=r(69),l=r(70),c=r(71),u=r(35),h=r(36),d=r(37),f=r(72),p=r(73),g=r(74),v=r(75),y=r(38),m=r(76),_=r(77),b=r(78),w=r(79),S=r(80),A=r(81),k=r(82),x=r(83),C=r(84),P=r(85),R=r(86),T=r(87),E=r(88),O=r(89),F=r(90),I=r(91),M=r(92),L=r(93),D=r(94),N=r(95),j=r(96),U=r(97);e.Konva=n.Konva.Util._assign(n.Konva,{Arc:i.Arc,Arrow:o.Arrow,Circle:a.Circle,Ellipse:s.Ellipse,Image:l.Image,Label:c.Label,Tag:c.Tag,Line:u.Line,Path:h.Path,Rect:d.Rect,RegularPolygon:f.RegularPolygon,Ring:p.Ring,Sprite:g.Sprite,Star:v.Star,Text:y.Text,TextPath:m.TextPath,Transformer:_.Transformer,Wedge:b.Wedge,Filters:{Blur:w.Blur,Brighten:S.Brighten,Contrast:A.Contrast,Emboss:k.Emboss,Enhance:x.Enhance,Grayscale:C.Grayscale,HSL:P.HSL,HSV:R.HSV,Invert:T.Invert,Kaleidoscope:E.Kaleidoscope,Mask:O.Mask,Noise:F.Noise,Pixelate:I.Pixelate,Posterize:M.Posterize,RGB:L.RGB,RGBA:D.RGBA,Sepia:N.Sepia,Solarize:j.Solarize,Threshold:U.Threshold}})},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(6),i=r(8),o=r(9),a=r(14),s=r(62),l=r(63),c=r(64),u=r(25),h=r(20),d=r(10),f=r(26),p=r(65),g=r(32),v=r(15);e.Konva=i.Util._assign(n.Konva,{Collection:i.Collection,Util:i.Util,Transform:i.Transform,Node:o.Node,ids:o.ids,names:o.names,Container:a.Container,Stage:s.Stage,stages:s.stages,Layer:l.Layer,FastLayer:c.FastLayer,Group:u.Group,DD:h.DD,Shape:d.Shape,shapes:d.shapes,Animation:f.Animation,Tween:p.Tween,Easings:p.Easings,Context:g.Context,Canvas:v.Canvas})},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(8),a=r(5),s=r(14),l=r(6),c=r(15),u=r(20),h=r(6),d=r(33),f=["mouseenter","mousedown","mousemove","mouseup","mouseout","touchstart","touchmove","touchend","mouseover","wheel","contextmenu","pointerdown","pointermove","pointerup","pointercancel","lostpointercapture"],p=f.length;function g(t,e){t.content.addEventListener(e,(function(r){t["_"+e](r)}),!1)}function v(t){return void 0===t&&(t={}),(t.clipFunc||t.clipWidth||t.clipHeight)&&o.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),t}e.stages=[];var y=function(t){function r(r){var n=t.call(this,v(r))||this;return n._pointerPositions=[],n._changedPointerPositions=[],n._buildDOM(),n._bindContentEvents(),e.stages.push(n),n.on("widthChange.konva heightChange.konva",n._resizeDOM),n.on("visibleChange.konva",n._checkVisibility),n.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",(function(){v(n.attrs)})),n._checkVisibility(),n}return i(r,t),r.prototype._validateAdd=function(t){var e="Layer"===t.getType(),r="FastLayer"===t.getType();e||r||o.Util.throw("You may only add layers to the stage.")},r.prototype._checkVisibility=function(){var t=this.visible()?"":"none";this.content.style.display=t},r.prototype.setContainer=function(t){if("string"==typeof t){if("."===t.charAt(0)){var e=t.slice(1);t=document.getElementsByClassName(e)[0]}else{var r;r="#"!==t.charAt(0)?t:t.slice(1),t=document.getElementById(r)}if(!t)throw"Can not find container in document with id "+r}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this},r.prototype.shouldDrawHit=function(){return!0},r.prototype.clear=function(){var t,e=this.children,r=e.length;for(t=0;t<r;t++)e[t].clear();return this},r.prototype.clone=function(t){return t||(t={}),t.container=document.createElement("div"),s.Container.prototype.clone.call(this,t)},r.prototype.destroy=function(){t.prototype.destroy.call(this);var r=this.content;r&&o.Util._isInDocument(r)&&this.container().removeChild(r);var n=e.stages.indexOf(this);return n>-1&&e.stages.splice(n,1),this},r.prototype.getPointerPosition=function(){var t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(o.Util.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"),null)},r.prototype._getPointerById=function(t){return this._pointerPositions.find((function(e){return e.id===t}))},r.prototype.getPointersPositions=function(){return this._pointerPositions},r.prototype.getStage=function(){return this},r.prototype.getContent=function(){return this.content},r.prototype._toKonvaCanvas=function(t){var e=(t=t||{}).x||0,r=t.y||0,n=new c.SceneCanvas({width:t.width||this.width(),height:t.height||this.height(),pixelRatio:t.pixelRatio||1}),i=n.getContext()._context,o=this.children;return(e||r)&&i.translate(-1*e,-1*r),o.each((function(n){if(n.isVisible()){var o=n._toKonvaCanvas(t);i.drawImage(o._canvas,e,r,o.getWidth()/o.getPixelRatio(),o.getHeight()/o.getPixelRatio())}})),n},r.prototype.getIntersection=function(t,e){if(!t)return null;var r,n,i=this.children;for(r=i.length-1;r>=0;r--)if(n=i[r].getIntersection(t,e))return n;return null},r.prototype._resizeDOM=function(){if(this.content){var t,e,r=this.width(),n=this.height(),i=this.getChildren(),o=i.length;for(this.content.style.width=r+"px",this.content.style.height=n+"px",this.bufferCanvas.setSize(r,n),this.bufferHitCanvas.setSize(r,n),t=0;t<o;t++)(e=i[t]).setSize({width:r,height:n}),e.draw()}},r.prototype.add=function(e){if(arguments.length>1){for(var r=0;r<arguments.length;r++)this.add(arguments[r]);return this}t.prototype.add.call(this,e);var n=this.children.length;return n>5&&o.Util.warn("The stage has "+n+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e._setCanvasSize(this.width(),this.height()),e.draw(),l.Konva.isBrowser&&this.content.appendChild(e.canvas._canvas),this},r.prototype.getParent=function(){return null},r.prototype.getLayer=function(){return null},r.prototype.hasPointerCapture=function(t){return d.hasPointerCapture(t,this)},r.prototype.setPointerCapture=function(t){d.setPointerCapture(t,this)},r.prototype.releaseCapture=function(t){d.releaseCapture(t,this)},r.prototype.getLayers=function(){return this.getChildren()},r.prototype._bindContentEvents=function(){if(l.Konva.isBrowser)for(var t=0;t<p;t++)g(this,f[t])},r.prototype._mouseenter=function(t){this.setPointersPositions(t),this._fire("mouseenter",{evt:t,target:this,currentTarget:this})},r.prototype._mouseover=function(t){this.setPointersPositions(t),this._fire("contentMouseover",{evt:t}),this._fire("mouseover",{evt:t,target:this,currentTarget:this})},r.prototype._mouseout=function(t){this.setPointersPositions(t);var e=this.targetShape,r=!u.DD.isDragging||l.Konva.hitOnDragEnabled;e&&r?(e._fireAndBubble("mouseout",{evt:t}),e._fireAndBubble("mouseleave",{evt:t}),this._fire("mouseleave",{evt:t,target:this,currentTarget:this}),this.targetShape=null):r&&(this._fire("mouseleave",{evt:t,target:this,currentTarget:this}),this._fire("mouseout",{evt:t,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[],this._fire("contentMouseout",{evt:t})},r.prototype._mousemove=function(t){if(l.Konva.UA.ieMobile)return this._touchmove(t);this.setPointersPositions(t);var e,r=o.Util._getFirstPointerId(t),n=!u.DD.isDragging||l.Konva.hitOnDragEnabled;if(n){if((e=this.getIntersection(this.getPointerPosition()))&&e.isListening()){var i=!this.targetShape||this.targetShape!==e;n&&i?(this.targetShape&&(this.targetShape._fireAndBubble("mouseout",{evt:t,pointerId:r},e),this.targetShape._fireAndBubble("mouseleave",{evt:t,pointerId:r},e)),e._fireAndBubble("mouseover",{evt:t,pointerId:r},this.targetShape),e._fireAndBubble("mouseenter",{evt:t,pointerId:r},this.targetShape),e._fireAndBubble("mousemove",{evt:t,pointerId:r}),this.targetShape=e):e._fireAndBubble("mousemove",{evt:t,pointerId:r})}else this.targetShape&&n&&(this.targetShape._fireAndBubble("mouseout",{evt:t,pointerId:r}),this.targetShape._fireAndBubble("mouseleave",{evt:t,pointerId:r}),this._fire("mouseover",{evt:t,target:this,currentTarget:this,pointerId:r}),this.targetShape=null),this._fire("mousemove",{evt:t,target:this,currentTarget:this,pointerId:r});this._fire("contentMousemove",{evt:t})}t.cancelable&&t.preventDefault()},r.prototype._mousedown=function(t){if(l.Konva.UA.ieMobile)return this._touchstart(t);this.setPointersPositions(t);var e=o.Util._getFirstPointerId(t),r=this.getIntersection(this.getPointerPosition());u.DD.justDragged=!1,l.Konva.listenClickTap=!0,r&&r.isListening()?(this.clickStartShape=r,r._fireAndBubble("mousedown",{evt:t,pointerId:e})):this._fire("mousedown",{evt:t,target:this,currentTarget:this,pointerId:e}),this._fire("contentMousedown",{evt:t})},r.prototype._mouseup=function(t){if(l.Konva.UA.ieMobile)return this._touchend(t);this.setPointersPositions(t);var e=o.Util._getFirstPointerId(t),r=this.getIntersection(this.getPointerPosition()),n=this.clickStartShape,i=this.clickEndShape,a=!1;l.Konva.inDblClickWindow?(a=!0,clearTimeout(this.dblTimeout)):u.DD.justDragged||(l.Konva.inDblClickWindow=!0,clearTimeout(this.dblTimeout)),this.dblTimeout=setTimeout((function(){l.Konva.inDblClickWindow=!1}),l.Konva.dblClickWindow),r&&r.isListening()?(this.clickEndShape=r,r._fireAndBubble("mouseup",{evt:t,pointerId:e}),l.Konva.listenClickTap&&n&&n._id===r._id&&(r._fireAndBubble("click",{evt:t,pointerId:e}),a&&i&&i===r&&r._fireAndBubble("dblclick",{evt:t,pointerId:e}))):(this._fire("mouseup",{evt:t,target:this,currentTarget:this,pointerId:e}),l.Konva.listenClickTap&&this._fire("click",{evt:t,target:this,currentTarget:this,pointerId:e}),a&&this._fire("dblclick",{evt:t,target:this,currentTarget:this,pointerId:e})),this._fire("contentMouseup",{evt:t}),l.Konva.listenClickTap&&(this._fire("contentClick",{evt:t}),a&&this._fire("contentDblclick",{evt:t})),l.Konva.listenClickTap=!1,t.cancelable&&t.preventDefault()},r.prototype._contextmenu=function(t){this.setPointersPositions(t);var e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble("contextmenu",{evt:t}):this._fire("contextmenu",{evt:t,target:this,currentTarget:this}),this._fire("contentContextmenu",{evt:t})},r.prototype._touchstart=function(t){var e=this;this.setPointersPositions(t);var r=!1;this._changedPointerPositions.forEach((function(n){var i=e.getIntersection(n);l.Konva.listenClickTap=!0,u.DD.justDragged=!1,i&&i.isListening()&&(l.Konva.captureTouchEventsEnabled&&i.setPointerCapture(n.id),e.tapStartShape=i,i._fireAndBubble("touchstart",{evt:t,pointerId:n.id},e),r=!0,i.isListening()&&i.preventDefault()&&t.cancelable&&t.preventDefault())})),r||this._fire("touchstart",{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire("contentTouchstart",{evt:t})},r.prototype._touchmove=function(t){var e=this;if(this.setPointersPositions(t),!u.DD.isDragging||l.Konva.hitOnDragEnabled){var r=!1,n={};this._changedPointerPositions.forEach((function(i){var o=d.getCapturedShape(i.id)||e.getIntersection(i);o&&o.isListening()&&(n[o._id]||(n[o._id]=!0,o._fireAndBubble("touchmove",{evt:t,pointerId:i.id}),r=!0,o.isListening()&&o.preventDefault()&&t.cancelable&&t.preventDefault()))})),r||this._fire("touchmove",{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire("contentTouchmove",{evt:t})}u.DD.isDragging&&u.DD.node.preventDefault()&&t.cancelable&&t.preventDefault()},r.prototype._touchend=function(t){var e=this;this.setPointersPositions(t);var r=this.clickEndShape,n=!1;l.Konva.inDblClickWindow?(n=!0,clearTimeout(this.dblTimeout)):u.DD.justDragged||(l.Konva.inDblClickWindow=!0,clearTimeout(this.dblTimeout)),this.dblTimeout=setTimeout((function(){l.Konva.inDblClickWindow=!1}),l.Konva.dblClickWindow);var i=!1,o={},a=!1,s=!1;this._changedPointerPositions.forEach((function(c){var u=d.getCapturedShape(c.id)||e.getIntersection(c);u&&u.releaseCapture(c.id),u&&u.isListening()&&(o[u._id]||(o[u._id]=!0,e.clickEndShape=u,u._fireAndBubble("touchend",{evt:t,pointerId:c.id}),i=!0,l.Konva.listenClickTap&&u===e.tapStartShape&&(a=!0,u._fireAndBubble("tap",{evt:t,pointerId:c.id}),n&&r&&r===u&&(s=!0,u._fireAndBubble("dbltap",{evt:t,pointerId:c.id}))),u.isListening()&&u.preventDefault()&&t.cancelable&&t.preventDefault()))})),i||this._fire("touchend",{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),l.Konva.listenClickTap&&!a&&this._fire("tap",{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),n&&!s&&this._fire("dbltap",{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire("contentTouchend",{evt:t}),l.Konva.listenClickTap&&(this._fire("contentTap",{evt:t}),n&&this._fire("contentDbltap",{evt:t})),l.Konva.listenClickTap=!1},r.prototype._wheel=function(t){this.setPointersPositions(t);var e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble("wheel",{evt:t}):this._fire("wheel",{evt:t,target:this,currentTarget:this}),this._fire("contentWheel",{evt:t})},r.prototype._pointerdown=function(t){if(l.Konva._pointerEventsEnabled){this.setPointersPositions(t);var e=d.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble("pointerdown",d.createEvent(t))}},r.prototype._pointermove=function(t){if(l.Konva._pointerEventsEnabled){this.setPointersPositions(t);var e=d.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble("pointermove",d.createEvent(t))}},r.prototype._pointerup=function(t){if(l.Konva._pointerEventsEnabled){this.setPointersPositions(t);var e=d.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble("pointerup",d.createEvent(t)),d.releaseCapture(t.pointerId)}},r.prototype._pointercancel=function(t){if(l.Konva._pointerEventsEnabled){this.setPointersPositions(t);var e=d.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble("pointerup",d.createEvent(t)),d.releaseCapture(t.pointerId)}},r.prototype._lostpointercapture=function(t){d.releaseCapture(t.pointerId)},r.prototype.setPointersPositions=function(t){var e=this,r=this._getContentPosition(),n=null,i=null;void 0!==(t=t||window.event).touches?(this._pointerPositions=[],this._changedPointerPositions=[],o.Collection.prototype.each.call(t.touches,(function(t){e._pointerPositions.push({id:t.identifier,x:(t.clientX-r.left)/r.scaleX,y:(t.clientY-r.top)/r.scaleY})})),o.Collection.prototype.each.call(t.changedTouches||t.touches,(function(t){e._changedPointerPositions.push({id:t.identifier,x:(t.clientX-r.left)/r.scaleX,y:(t.clientY-r.top)/r.scaleY})}))):(n=(t.clientX-r.left)/r.scaleX,i=(t.clientY-r.top)/r.scaleY,this.pointerPos={x:n,y:i},this._pointerPositions=[{x:n,y:i,id:o.Util._getFirstPointerId(t)}],this._changedPointerPositions=[{x:n,y:i,id:o.Util._getFirstPointerId(t)}])},r.prototype._setPointerPosition=function(t){o.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)},r.prototype._getContentPosition=function(){var t=this.content.getBoundingClientRect?this.content.getBoundingClientRect():{top:0,left:0,width:1e3,height:1e3};return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}},r.prototype._buildDOM=function(){if(this.bufferCanvas=new c.SceneCanvas,this.bufferHitCanvas=new c.HitCanvas({pixelRatio:1}),l.Konva.isBrowser){var t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}},r.prototype.cache=function(){return o.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this},r.prototype.clearCache=function(){return this},r.prototype.batchDraw=function(){return this.children.each((function(t){t.batchDraw()})),this},r}(s.Container);e.Stage=y,y.prototype.nodeType="Stage",h._registerNode(y),a.Factory.addGetterSetter(y,"container")},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(8),a=r(14),s=r(5),l=r(34),c=r(15),u=r(10),h=r(7),d=r(6),f=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],p=f.length,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hitCanvas=new c.HitCanvas({pixelRatio:1}),e}return i(e,t),e.prototype._setCanvasSize=function(t,e){this.canvas.setSize(t,e),this.hitCanvas.setSize(t,e),this._checkSmooth()},e.prototype._validateAdd=function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&o.Util.throw("You may only add groups and shapes to a layer.")},e.prototype.getIntersection=function(t,e){var r,n,i,o;if(!this.hitGraphEnabled()||!this.isVisible())return null;for(var a=1,s=!1;;){for(n=0;n<p;n++){if(i=f[n],(o=(r=this._getIntersection({x:t.x+i.x*a,y:t.y+i.y*a})).shape)&&e)return o.findAncestor(e,!0);if(o)return o;if(s=!!r.antialiased,!r.antialiased)break}if(!s)return null;a+=1}},e.prototype._getIntersection=function(t){var e,r,n=this.hitCanvas.pixelRatio,i=this.hitCanvas.context.getImageData(Math.round(t.x*n),Math.round(t.y*n),1,1).data,a=i[3];return 255===a?(e=o.Util._rgbToHex(i[0],i[1],i[2]),(r=u.shapes["#"+e])?{shape:r}:{antialiased:!0}):a>0?{antialiased:!0}:{}},e.prototype.drawScene=function(t,e){var r=this.getLayer(),n=t||r&&r.getCanvas();return this._fire("beforeDraw",{node:this}),this.clearBeforeDraw()&&n.getContext().clear(),a.Container.prototype.drawScene.call(this,n,e),this._fire("draw",{node:this}),this},e.prototype.drawHit=function(t,e){var r=this.getLayer(),n=t||r&&r.hitCanvas;return r&&r.clearBeforeDraw()&&r.getHitCanvas().getContext().clear(),a.Container.prototype.drawHit.call(this,n,e),this},e.prototype.clear=function(t){return l.BaseLayer.prototype.clear.call(this,t),this.getHitCanvas().getContext().clear(t),this},e.prototype.enableHitGraph=function(){return this.hitGraphEnabled(!0),this},e.prototype.disableHitGraph=function(){return this.hitGraphEnabled(!1),this},e.prototype.toggleHitCanvas=function(){if(this.parent){var t=this.parent;!!this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}},e.prototype.setSize=function(e){var r=e.width,n=e.height;return t.prototype.setSize.call(this,{width:r,height:n}),this.hitCanvas.setSize(r,n),this},e}(l.BaseLayer);e.Layer=g,g.prototype.nodeType="Layer",d._registerNode(g),s.Factory.addGetterSetter(g,"hitGraphEnabled",!0,h.getBooleanValidator()),o.Collection.mapMethods(g)},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(8),a=r(14),s=r(34),l=r(6),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._validateAdd=function(t){"Shape"!==t.getType()&&o.Util.throw("You may only add shapes to a fast layer.")},e.prototype._setCanvasSize=function(t,e){this.canvas.setSize(t,e),this._checkSmooth()},e.prototype.hitGraphEnabled=function(){return!1},e.prototype.drawScene=function(t){var e=this.getLayer(),r=t||e&&e.getCanvas();return this.clearBeforeDraw()&&r.getContext().clear(),a.Container.prototype.drawScene.call(this,r),this},e.prototype.draw=function(){return this.drawScene(),this},e}(s.BaseLayer);e.FastLayer=c,c.prototype.nodeType="FastLayer",l._registerNode(c),o.Collection.mapMethods(c)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(8),i=r(26),o=r(9),a=r(6),s={node:1,duration:1,easing:1,onFinish:1,yoyo:1},l=0,c=["fill","stroke","shadowColor"],u=function(){function t(t,e,r,n,i,o,a){this.prop=t,this.propFunc=e,this.begin=n,this._pos=n,this.duration=o,this._change=0,this.prevPos=0,this.yoyo=a,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=r,this._change=i-this.begin,this.pause()}return t.prototype.fire=function(t){var e=this[t];e&&e()},t.prototype.setTime=function(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())},t.prototype.getTime=function(){return this._time},t.prototype.setPosition=function(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t},t.prototype.getPosition=function(t){return void 0===t&&(t=this._time),this.func(t,this.begin,this._change,this.duration)},t.prototype.play=function(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")},t.prototype.reverse=function(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")},t.prototype.seek=function(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")},t.prototype.reset=function(){this.pause(),this._time=0,this.update(),this.fire("onReset")},t.prototype.finish=function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")},t.prototype.update=function(){this.setPosition(this.getPosition(this._time))},t.prototype.onEnterFrame=function(){var t=this.getTimer()-this._startTime;2===this.state?this.setTime(t):3===this.state&&this.setTime(this.duration-t)},t.prototype.pause=function(){this.state=1,this.fire("onPause")},t.prototype.getTimer=function(){return(new Date).getTime()},t}(),h=function(){function t(r){var o,c,h=this,d=r.node,f=d._id,p=r.easing||e.Easings.Linear,g=!!r.yoyo;o=void 0===r.duration?.3:0===r.duration?.001:r.duration,this.node=d,this._id=l++;var v=d.getLayer()||(d instanceof a.Konva.Stage?d.getLayers():null);for(c in v||n.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new i.Animation((function(){h.tween.onEnterFrame()}),v),this.tween=new u(c,(function(t){h._tweenFunc(t)}),p,0,1,1e3*o,g),this._addListeners(),t.attrs[f]||(t.attrs[f]={}),t.attrs[f][this._id]||(t.attrs[f][this._id]={}),t.tweens[f]||(t.tweens[f]={}),r)void 0===s[c]&&this._addAttr(c,r[c]);this.reset(),this.onFinish=r.onFinish,this.onReset=r.onReset}return t.prototype._addAttr=function(e,r){var i,o,a,s,l,u,h,d,f=this.node,p=f._id;if((a=t.tweens[p][e])&&delete t.attrs[p][a][e],i=f.getAttr(e),n.Util._isArray(r))if(o=[],l=Math.max(r.length,i.length),"points"===e&&r.length!==i.length&&(r.length>i.length?(h=i,i=n.Util._prepareArrayForTween(i,r,f.closed())):(u=r,r=n.Util._prepareArrayForTween(r,i,f.closed()))),0===e.indexOf("fill"))for(s=0;s<l;s++)if(s%2==0)o.push(r[s]-i[s]);else{var g=n.Util.colorToRGBA(i[s]);d=n.Util.colorToRGBA(r[s]),i[s]=g,o.push({r:d.r-g.r,g:d.g-g.g,b:d.b-g.b,a:d.a-g.a})}else for(s=0;s<l;s++)o.push(r[s]-i[s]);else-1!==c.indexOf(e)?(i=n.Util.colorToRGBA(i),o={r:(d=n.Util.colorToRGBA(r)).r-i.r,g:d.g-i.g,b:d.b-i.b,a:d.a-i.a}):o=r-i;t.attrs[p][this._id][e]={start:i,diff:o,end:r,trueEnd:u,trueStart:h},t.tweens[p][e]=this._id},t.prototype._tweenFunc=function(e){var r,i,o,a,s,l,u,h,d=this.node,f=t.attrs[d._id][this._id];for(r in f){if(o=(i=f[r]).start,a=i.diff,h=i.end,n.Util._isArray(o))if(s=[],u=Math.max(o.length,h.length),0===r.indexOf("fill"))for(l=0;l<u;l++)l%2==0?s.push((o[l]||0)+a[l]*e):s.push("rgba("+Math.round(o[l].r+a[l].r*e)+","+Math.round(o[l].g+a[l].g*e)+","+Math.round(o[l].b+a[l].b*e)+","+(o[l].a+a[l].a*e)+")");else for(l=0;l<u;l++)s.push((o[l]||0)+a[l]*e);else s=-1!==c.indexOf(r)?"rgba("+Math.round(o.r+a.r*e)+","+Math.round(o.g+a.g*e)+","+Math.round(o.b+a.b*e)+","+(o.a+a.a*e)+")":o+a*e;d.setAttr(r,s)}},t.prototype._addListeners=function(){var e=this;this.tween.onPlay=function(){e.anim.start()},this.tween.onReverse=function(){e.anim.start()},this.tween.onPause=function(){e.anim.stop()},this.tween.onFinish=function(){var r=e.node,n=t.attrs[r._id][e._id];n.points&&n.points.trueEnd&&r.setAttr("points",n.points.trueEnd),e.onFinish&&e.onFinish.call(e)},this.tween.onReset=function(){var r=e.node,n=t.attrs[r._id][e._id];n.points&&n.points.trueStart&&r.points(n.points.trueStart),e.onReset&&e.onReset()}},t.prototype.play=function(){return this.tween.play(),this},t.prototype.reverse=function(){return this.tween.reverse(),this},t.prototype.reset=function(){return this.tween.reset(),this},t.prototype.seek=function(t){return this.tween.seek(1e3*t),this},t.prototype.pause=function(){return this.tween.pause(),this},t.prototype.finish=function(){return this.tween.finish(),this},t.prototype.destroy=function(){var e,r=this.node._id,n=this._id,i=t.tweens[r];for(e in this.pause(),i)delete t.tweens[r][e];delete t.attrs[r][n]},t.attrs={},t.tweens={},t}();e.Tween=h,o.Node.prototype.to=function(t){var e=t.onFinish;t.node=this,t.onFinish=function(){this.destroy(),e&&e()},new h(t).play()},e.Easings={BackEaseIn:function(t,e,r,n){var i=1.70158;return r*(t/=n)*t*((i+1)*t-i)+e},BackEaseOut:function(t,e,r,n){var i=1.70158;return r*((t=t/n-1)*t*((i+1)*t+i)+1)+e},BackEaseInOut:function(t,e,r,n){var i=1.70158;return(t/=n/2)<1?r/2*(t*t*((1+(i*=1.525))*t-i))+e:r/2*((t-=2)*t*((1+(i*=1.525))*t+i)+2)+e},ElasticEaseIn:function(t,e,r,n,i,o){var a=0;return 0===t?e:1==(t/=n)?e+r:(o||(o=.3*n),!i||i<Math.abs(r)?(i=r,a=o/4):a=o/(2*Math.PI)*Math.asin(r/i),-i*Math.pow(2,10*(t-=1))*Math.sin((t*n-a)*(2*Math.PI)/o)+e)},ElasticEaseOut:function(t,e,r,n,i,o){var a=0;return 0===t?e:1==(t/=n)?e+r:(o||(o=.3*n),!i||i<Math.abs(r)?(i=r,a=o/4):a=o/(2*Math.PI)*Math.asin(r/i),i*Math.pow(2,-10*t)*Math.sin((t*n-a)*(2*Math.PI)/o)+r+e)},ElasticEaseInOut:function(t,e,r,n,i,o){var a=0;return 0===t?e:2==(t/=n/2)?e+r:(o||(o=n*(.3*1.5)),!i||i<Math.abs(r)?(i=r,a=o/4):a=o/(2*Math.PI)*Math.asin(r/i),t<1?i*Math.pow(2,10*(t-=1))*Math.sin((t*n-a)*(2*Math.PI)/o)*-.5+e:i*Math.pow(2,-10*(t-=1))*Math.sin((t*n-a)*(2*Math.PI)/o)*.5+r+e)},BounceEaseOut:function(t,e,r,n){return(t/=n)<1/2.75?r*(7.5625*t*t)+e:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+e:r*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn:function(t,r,n,i){return n-e.Easings.BounceEaseOut(i-t,0,n,i)+r},BounceEaseInOut:function(t,r,n,i){return t<i/2?.5*e.Easings.BounceEaseIn(2*t,0,n,i)+r:.5*e.Easings.BounceEaseOut(2*t-i,0,n,i)+.5*n+r},EaseIn:function(t,e,r,n){return r*(t/=n)*t+e},EaseOut:function(t,e,r,n){return-r*(t/=n)*(t-2)+e},EaseInOut:function(t,e,r,n){return(t/=n/2)<1?r/2*t*t+e:-r/2*(--t*(t-2)-1)+e},StrongEaseIn:function(t,e,r,n){return r*(t/=n)*t*t*t*t+e},StrongEaseOut:function(t,e,r,n){return r*((t=t/n-1)*t*t*t*t+1)+e},StrongEaseInOut:function(t,e,r,n){return(t/=n/2)<1?r/2*t*t*t*t*t+e:r/2*((t-=2)*t*t*t*t+2)+e},Linear:function(t,e,r,n){return r*t/n+e}}},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(8),a=r(5),s=r(10),l=r(6),c=r(7),u=r(6),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){var e=l.Konva.getAngle(this.angle()),r=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,e,r),t.arc(0,0,this.innerRadius(),e,0,!r),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.outerRadius()},e.prototype.getHeight=function(){return 2*this.outerRadius()},e.prototype.setWidth=function(t){this.outerRadius(t/2)},e.prototype.setHeight=function(t){this.outerRadius(t/2)},e}(s.Shape);e.Arc=h,h.prototype._centroid=!0,h.prototype.className="Arc",h.prototype._attrsAffectingSize=["innerRadius","outerRadius"],u._registerNode(h),a.Factory.addGetterSetter(h,"innerRadius",0,c.getNumberValidator()),a.Factory.addGetterSetter(h,"outerRadius",0,c.getNumberValidator()),a.Factory.addGetterSetter(h,"angle",0,c.getNumberValidator()),a.Factory.addGetterSetter(h,"clockwise",!1,c.getBooleanValidator()),o.Collection.mapMethods(h)},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(8),a=r(5),s=r(35),l=r(7),c=r(6),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(e){t.prototype._sceneFunc.call(this,e);var r=2*Math.PI,n=this.points(),i=n,o=0!==this.tension()&&n.length>4;o&&(i=this.getTensionPoints());var a,s,l=n.length;o?(a=n[l-2]-(i[i.length-2]+i[i.length-4])/2,s=n[l-1]-(i[i.length-1]+i[i.length-3])/2):(a=n[l-2]-n[l-4],s=n[l-1]-n[l-3]);var c=(Math.atan2(s,a)+r)%r,u=this.pointerLength(),h=this.pointerWidth();e.save(),e.beginPath(),e.translate(n[l-2],n[l-1]),e.rotate(c),e.moveTo(0,0),e.lineTo(-u,h/2),e.lineTo(-u,-h/2),e.closePath(),e.restore(),this.pointerAtBeginning()&&(e.save(),e.translate(n[0],n[1]),o?(a=(i[0]+i[2])/2-n[0],s=(i[1]+i[3])/2-n[1]):(a=n[2]-n[0],s=n[3]-n[1]),e.rotate((Math.atan2(-s,-a)+r)%r),e.moveTo(0,0),e.lineTo(-u,h/2),e.lineTo(-u,-h/2),e.closePath(),e.restore());var d=this.dashEnabled();d&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),d&&(this.attrs.dashEnabled=!0)},e.prototype.getSelfRect=function(){var e=t.prototype.getSelfRect.call(this),r=this.pointerWidth()/2;return{x:e.x-r,y:e.y-r,width:e.width+2*r,height:e.height+2*r}},e}(s.Line);e.Arrow=u,u.prototype.className="Arrow",c._registerNode(u),a.Factory.addGetterSetter(u,"pointerLength",10,l.getNumberValidator()),a.Factory.addGetterSetter(u,"pointerWidth",10,l.getNumberValidator()),a.Factory.addGetterSetter(u,"pointerAtBeginning",!1),o.Collection.mapMethods(u)},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(8),a=r(5),s=r(10),l=r(7),c=r(6),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.radius(),0,2*Math.PI,!1),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.radius()},e.prototype.getHeight=function(){return 2*this.radius()},e.prototype.setWidth=function(t){this.radius()!==t/2&&this.radius(t/2)},e.prototype.setHeight=function(t){this.radius()!==t/2&&this.radius(t/2)},e}(s.Shape);e.Circle=u,u.prototype._centroid=!0,u.prototype.className="Circle",u.prototype._attrsAffectingSize=["radius"],c._registerNode(u),a.Factory.addGetterSetter(u,"radius",0,l.getNumberValidator()),o.Collection.mapMethods(u)},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(8),a=r(5),s=r(10),l=r(7),c=r(6),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){var e=this.radiusX(),r=this.radiusY();t.beginPath(),t.save(),e!==r&&t.scale(1,r/e),t.arc(0,0,e,0,2*Math.PI,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.radiusX()},e.prototype.getHeight=function(){return 2*this.radiusY()},e.prototype.setWidth=function(t){this.radiusX(t/2)},e.prototype.setHeight=function(t){this.radiusY(t/2)},e}(s.Shape);e.Ellipse=u,u.prototype.className="Ellipse",u.prototype._centroid=!0,u.prototype._attrsAffectingSize=["radiusX","radiusY"],c._registerNode(u),a.Factory.addComponentsGetterSetter(u,"radius",["x","y"]),a.Factory.addGetterSetter(u,"radiusX",0,l.getNumberValidator()),a.Factory.addGetterSetter(u,"radiusY",0,l.getNumberValidator()),o.Collection.mapMethods(u)},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(8),a=r(5),s=r(10),l=r(7),c=r(6),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._useBufferCanvas=function(){return!(!this.hasShadow()&&1===this.getAbsoluteOpacity()||!this.hasStroke()||!this.getStage())},e.prototype._sceneFunc=function(t){var e,r,n,i=this.width(),o=this.height(),a=this.image();a&&(e=this.cropWidth(),r=this.cropHeight(),n=e&&r?[a,this.cropX(),this.cropY(),e,r,0,0,i,o]:[a,0,0,i,o]),(this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,i,o),t.closePath(),t.fillStrokeShape(this)),a&&t.drawImage.apply(t,n)},e.prototype._hitFunc=function(t){var e=this.width(),r=this.height();t.beginPath(),t.rect(0,0,e,r),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){var t,e=this.image();return null!=(t=this.attrs.width)?t:e?e.width:0},e.prototype.getHeight=function(){var t,e=this.image();return null!=(t=this.attrs.height)?t:e?e.height:0},e.fromURL=function(t,r){var n=o.Util.createImageElement();n.onload=function(){var t=new e({image:n});r(t)},n.crossOrigin="Anonymous",n.src=t},e}(s.Shape);e.Image=u,u.prototype.className="Image",c._registerNode(u),a.Factory.addGetterSetter(u,"image"),a.Factory.addComponentsGetterSetter(u,"crop",["x","y","width","height"]),a.Factory.addGetterSetter(u,"cropX",0,l.getNumberValidator()),a.Factory.addGetterSetter(u,"cropY",0,l.getNumberValidator()),a.Factory.addGetterSetter(u,"cropWidth",0,l.getNumberValidator()),a.Factory.addGetterSetter(u,"cropHeight",0,l.getNumberValidator()),o.Collection.mapMethods(u)},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(8),a=r(5),s=r(10),l=r(25),c=r(7),u=r(6),h=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width"],d=h.length,f=function(t){function e(e){var r=t.call(this,e)||this;return r.on("add.konva",(function(t){this._addListeners(t.child),this._sync()})),r}return i(e,t),e.prototype.getText=function(){return this.find("Text")[0]},e.prototype.getTag=function(){return this.find("Tag")[0]},e.prototype._addListeners=function(t){var e,r=this,n=function(){r._sync()};for(e=0;e<d;e++)t.on(h[e]+"Change.konva",n)},e.prototype.getWidth=function(){return this.getText().width()},e.prototype.getHeight=function(){return this.getText().height()},e.prototype._sync=function(){var t,e,r,n,i,o,a,s=this.getText(),l=this.getTag();if(s&&l){switch(t=s.width(),e=s.height(),r=l.pointerDirection(),n=l.pointerWidth(),a=l.pointerHeight(),i=0,o=0,r){case"up":i=t/2,o=-1*a;break;case"right":i=t+n,o=e/2;break;case"down":i=t/2,o=e+a;break;case"left":i=-1*n,o=e/2}l.setAttrs({x:-1*i,y:-1*o,width:t,height:e}),s.setAttrs({x:-1*i,y:-1*o})}},e}(l.Group);e.Label=f,f.prototype.className="Label",u._registerNode(f),o.Collection.mapMethods(f);var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){var e=this.width(),r=this.height(),n=this.pointerDirection(),i=this.pointerWidth(),o=this.pointerHeight(),a=Math.min(this.cornerRadius(),e/2,r/2);t.beginPath(),a?t.moveTo(a,0):t.moveTo(0,0),"up"===n&&(t.lineTo((e-i)/2,0),t.lineTo(e/2,-1*o),t.lineTo((e+i)/2,0)),a?(t.lineTo(e-a,0),t.arc(e-a,a,a,3*Math.PI/2,0,!1)):t.lineTo(e,0),"right"===n&&(t.lineTo(e,(r-o)/2),t.lineTo(e+i,r/2),t.lineTo(e,(r+o)/2)),a?(t.lineTo(e,r-a),t.arc(e-a,r-a,a,0,Math.PI/2,!1)):t.lineTo(e,r),"down"===n&&(t.lineTo((e+i)/2,r),t.lineTo(e/2,r+o),t.lineTo((e-i)/2,r)),a?(t.lineTo(a,r),t.arc(a,r-a,a,Math.PI/2,Math.PI,!1)):t.lineTo(0,r),"left"===n&&(t.lineTo(0,(r+o)/2),t.lineTo(-1*i,r/2),t.lineTo(0,(r-o)/2)),a&&(t.lineTo(0,a),t.arc(a,a,a,Math.PI,3*Math.PI/2,!1)),t.closePath(),t.fillStrokeShape(this)},e.prototype.getSelfRect=function(){var t=0,e=0,r=this.pointerWidth(),n=this.pointerHeight(),i=this.pointerDirection(),o=this.width(),a=this.height();return"up"===i?(e-=n,a+=n):"down"===i?a+=n:"left"===i?(t-=1.5*r,o+=r):"right"===i&&(o+=1.5*r),{x:t,y:e,width:o,height:a}},e}(s.Shape);e.Tag=p,p.prototype.className="Tag",u._registerNode(p),a.Factory.addGetterSetter(p,"pointerDirection","none"),a.Factory.addGetterSetter(p,"pointerWidth",0,c.getNumberValidator()),a.Factory.addGetterSetter(p,"pointerHeight",0,c.getNumberValidator()),a.Factory.addGetterSetter(p,"cornerRadius",0,c.getNumberValidator()),o.Collection.mapMethods(p)},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(8),a=r(5),s=r(10),l=r(7),c=r(6),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){var e,r,n,i=this.sides(),o=this.radius();for(t.beginPath(),t.moveTo(0,0-o),e=1;e<i;e++)r=o*Math.sin(2*e*Math.PI/i),n=-1*o*Math.cos(2*e*Math.PI/i),t.lineTo(r,n);t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.radius()},e.prototype.getHeight=function(){return 2*this.radius()},e.prototype.setWidth=function(t){this.radius(t/2)},e.prototype.setHeight=function(t){this.radius(t/2)},e}(s.Shape);e.RegularPolygon=u,u.prototype.className="RegularPolygon",u.prototype._centroid=!0,u.prototype._attrsAffectingSize=["radius"],c._registerNode(u),a.Factory.addGetterSetter(u,"radius",0,l.getNumberValidator()),a.Factory.addGetterSetter(u,"sides",0,l.getNumberValidator()),o.Collection.mapMethods(u)},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(8),a=r(5),s=r(10),l=r(7),c=r(6),u=2*Math.PI,h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,u,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),u,0,!0),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.outerRadius()},e.prototype.getHeight=function(){return 2*this.outerRadius()},e.prototype.setWidth=function(t){this.outerRadius(t/2)},e.prototype.setHeight=function(t){this.outerRadius(t/2)},e}(s.Shape);e.Ring=h,h.prototype.className="Ring",h.prototype._centroid=!0,h.prototype._attrsAffectingSize=["innerRadius","outerRadius"],c._registerNode(h),a.Factory.addGetterSetter(h,"innerRadius",0,l.getNumberValidator()),a.Factory.addGetterSetter(h,"outerRadius",0,l.getNumberValidator()),o.Collection.mapMethods(h)},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(8),a=r(5),s=r(10),l=r(26),c=r(7),u=r(6),h=function(t){function e(e){var r=t.call(this,e)||this;return r._updated=!0,r.anim=new l.Animation((function(){var t=r._updated;return r._updated=!1,t})),r.on("animationChange.konva",(function(){this.frameIndex(0)})),r.on("frameIndexChange.konva",(function(){this._updated=!0})),r.on("frameRateChange.konva",(function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})),r}return i(e,t),e.prototype._sceneFunc=function(t){var e=this.animation(),r=this.frameIndex(),n=4*r,i=this.animations()[e],o=this.frameOffsets(),a=i[n+0],s=i[n+1],l=i[n+2],c=i[n+3],u=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,l,c),t.closePath(),t.fillStrokeShape(this)),u)if(o){var h=o[e],d=2*r;t.drawImage(u,a,s,l,c,h[d+0],h[d+1],l,c)}else t.drawImage(u,a,s,l,c,0,0,l,c)},e.prototype._hitFunc=function(t){var e=this.animation(),r=this.frameIndex(),n=4*r,i=this.animations()[e],o=this.frameOffsets(),a=i[n+2],s=i[n+3];if(t.beginPath(),o){var l=o[e],c=2*r;t.rect(l[c+0],l[c+1],a,s)}else t.rect(0,0,a,s);t.closePath(),t.fillShape(this)},e.prototype._useBufferCanvas=function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()},e.prototype._setInterval=function(){var t=this;this.interval=setInterval((function(){t._updateIndex()}),1e3/this.frameRate())},e.prototype.start=function(){if(!this.isRunning()){var t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}},e.prototype.stop=function(){this.anim.stop(),clearInterval(this.interval)},e.prototype.isRunning=function(){return this.anim.isRunning()},e.prototype._updateIndex=function(){var t=this.frameIndex(),e=this.animation();t<this.animations()[e].length/4-1?this.frameIndex(t+1):this.frameIndex(0)},e}(s.Shape);e.Sprite=h,h.prototype.className="Sprite",u._registerNode(h),a.Factory.addGetterSetter(h,"animation"),a.Factory.addGetterSetter(h,"animations"),a.Factory.addGetterSetter(h,"frameOffsets"),a.Factory.addGetterSetter(h,"image"),a.Factory.addGetterSetter(h,"frameIndex",0,c.getNumberValidator()),a.Factory.addGetterSetter(h,"frameRate",17,c.getNumberValidator()),a.Factory.backCompat(h,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),o.Collection.mapMethods(h)},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(8),a=r(5),s=r(10),l=r(7),c=r(6),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){var e=this.innerRadius(),r=this.outerRadius(),n=this.numPoints();t.beginPath(),t.moveTo(0,0-r);for(var i=1;i<2*n;i++){var o=i%2==0?r:e,a=o*Math.sin(i*Math.PI/n),s=-1*o*Math.cos(i*Math.PI/n);t.lineTo(a,s)}t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.outerRadius()},e.prototype.getHeight=function(){return 2*this.outerRadius()},e.prototype.setWidth=function(t){this.outerRadius(t/2)},e.prototype.setHeight=function(t){this.outerRadius(t/2)},e}(s.Shape);e.Star=u,u.prototype.className="Star",u.prototype._centroid=!0,u.prototype._attrsAffectingSize=["innerRadius","outerRadius"],c._registerNode(u),a.Factory.addGetterSetter(u,"numPoints",5,l.getNumberValidator()),a.Factory.addGetterSetter(u,"innerRadius",0,l.getNumberValidator()),a.Factory.addGetterSetter(u,"outerRadius",0,l.getNumberValidator()),o.Collection.mapMethods(u)},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(8),a=r(5),s=r(10),l=r(36),c=r(38),u=r(7),h=r(6);function d(t){t.fillText(this.partialText,0,0)}function f(t){t.strokeText(this.partialText,0,0)}var p=function(t){function e(e){var r=t.call(this,e)||this;return r.dummyCanvas=o.Util.createCanvasElement(),r.dataArray=[],r.dataArray=l.Path.parsePathData(r.attrs.data),r.on("dataChange.konva",(function(){this.dataArray=l.Path.parsePathData(this.attrs.data),this._setTextData()})),r.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva",r._setTextData),e&&e.getKerning&&(o.Util.warn('getKerning TextPath API is deprecated. Please use "kerningFunc" instead.'),r.kerningFunc(e.getKerning)),r._setTextData(),r}return i(e,t),e.prototype._sceneFunc=function(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();var e=this.textDecoration(),r=this.fill(),n=this.fontSize(),i=this.glyphInfo;"underline"===e&&t.beginPath();for(var o=0;o<i.length;o++){t.save();var a=i[o].p0;t.translate(a.x,a.y),t.rotate(i[o].rotation),this.partialText=i[o].text,t.fillStrokeShape(this),"underline"===e&&(0===o&&t.moveTo(0,n/2+1),t.lineTo(n,n/2+1)),t.restore()}"underline"===e&&(t.strokeStyle=r,t.lineWidth=n/20,t.stroke()),t.restore()},e.prototype._hitFunc=function(t){t.beginPath();var e=this.glyphInfo;if(e.length>=1){var r=e[0].p0;t.moveTo(r.x,r.y)}for(var n=0;n<e.length;n++){var i=e[n].p1;t.lineTo(i.x,i.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()},e.prototype.getTextWidth=function(){return this.textWidth},e.prototype.getTextHeight=function(){return o.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight},e.prototype.setText=function(t){return c.Text.prototype.setText.call(this,t)},e.prototype._getContextFont=function(){return c.Text.prototype._getContextFont.call(this)},e.prototype._getTextSize=function(t){var e=this.dummyCanvas.getContext("2d");e.save(),e.font=this._getContextFont();var r=e.measureText(t);return e.restore(),{width:r.width,height:parseInt(this.attrs.fontSize,10)}},e.prototype._setTextData=function(){var t=this,e=this._getTextSize(this.attrs.text),r=this.letterSpacing(),n=this.align(),i=this.kerningFunc();this.textWidth=e.width,this.textHeight=e.height;var o=Math.max(this.textWidth+((this.attrs.text||"").length-1)*r,0);this.glyphInfo=[];for(var a=0,s=0;s<t.dataArray.length;s++)t.dataArray[s].pathLength>0&&(a+=t.dataArray[s].pathLength);var c=0;"center"===n&&(c=Math.max(0,a/2-o/2)),"right"===n&&(c=Math.max(0,a-o));for(var u,h,d,f=this.text().split(""),p=this.text().split(" ").length-1,g=-1,v=0,y=function(){v=0;for(var e=t.dataArray,r=g+1;r<e.length;r++){if(e[r].pathLength>0)return g=r,e[r];"M"===e[r].command&&(u={x:e[r].points[0],y:e[r].points[1]})}return{}},m=function(e){var i=t._getTextSize(e).width+r;" "===e&&"justify"===n&&(i+=(a-o)/p);var s=0,c=0;for(h=void 0;Math.abs(i-s)/i>.01&&c<25;){c++;for(var f=s;void 0===d;)(d=y())&&f+d.pathLength<i&&(f+=d.pathLength,d=void 0);if(d==={}||void 0===u)return;var g=!1;switch(d.command){case"L":l.Path.getLineLength(u.x,u.y,d.points[0],d.points[1])>i?h=l.Path.getPointOnLine(i,u.x,u.y,d.points[0],d.points[1],u.x,u.y):d=void 0;break;case"A":var m=d.points[4],_=d.points[5],b=d.points[4]+_;0===v?v=m+1e-8:i>s?v+=Math.PI/180*_/Math.abs(_):v-=Math.PI/360*_/Math.abs(_),(_<0&&v<b||_>=0&&v>b)&&(v=b,g=!0),h=l.Path.getPointOnEllipticalArc(d.points[0],d.points[1],d.points[2],d.points[3],v,d.points[6]);break;case"C":0===v?v=i>d.pathLength?1e-8:i/d.pathLength:i>s?v+=(i-s)/d.pathLength:v-=(s-i)/d.pathLength,v>1&&(v=1,g=!0),h=l.Path.getPointOnCubicBezier(v,d.start.x,d.start.y,d.points[0],d.points[1],d.points[2],d.points[3],d.points[4],d.points[5]);break;case"Q":0===v?v=i/d.pathLength:i>s?v+=(i-s)/d.pathLength:v-=(s-i)/d.pathLength,v>1&&(v=1,g=!0),h=l.Path.getPointOnQuadraticBezier(v,d.start.x,d.start.y,d.points[0],d.points[1],d.points[2],d.points[3])}void 0!==h&&(s=l.Path.getLineLength(u.x,u.y,h.x,h.y)),g&&(g=!1,d=void 0)}},_=c/(t._getTextSize("C").width+r)-1,b=0;b<_&&(m("C"),void 0!==u&&void 0!==h);b++)u=h;for(var w=0;w<f.length&&(m(f[w]),void 0!==u&&void 0!==h);w++){var S=l.Path.getLineLength(u.x,u.y,h.x,h.y),A=0;if(i)try{A=i(f[w-1],f[w])*this.fontSize()}catch(t){A=0}u.x+=A,h.x+=A,this.textWidth+=A;var k=l.Path.getPointOnLine(A+S/2,u.x,u.y,h.x,h.y),x=Math.atan2(h.y-u.y,h.x-u.x);this.glyphInfo.push({transposeX:k.x,transposeY:k.y,text:f[w],rotation:x,p0:u,p1:h}),u=h}},e.prototype.getSelfRect=function(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var t=[];this.glyphInfo.forEach((function(e){t.push(e.p0.x),t.push(e.p0.y),t.push(e.p1.x),t.push(e.p1.y)}));for(var e,r,n=t[0]||0,i=t[0]||0,o=t[1]||0,a=t[1]||0,s=0;s<t.length/2;s++)e=t[2*s],r=t[2*s+1],n=Math.min(n,e),i=Math.max(i,e),o=Math.min(o,r),a=Math.max(a,r);var l=this.fontSize();return{x:Math.round(n)-l/2,y:Math.round(o)-l/2,width:Math.round(i-n)+l,height:Math.round(a-o)+l}},e}(s.Shape);e.TextPath=p,p.prototype._fillFunc=d,p.prototype._strokeFunc=f,p.prototype._fillFuncHit=d,p.prototype._strokeFuncHit=f,p.prototype.className="TextPath",p.prototype._attrsAffectingSize=["text","fontSize","data"],h._registerNode(p),a.Factory.addGetterSetter(p,"data"),a.Factory.addGetterSetter(p,"fontFamily","Arial"),a.Factory.addGetterSetter(p,"fontSize",12,u.getNumberValidator()),a.Factory.addGetterSetter(p,"fontStyle","normal"),a.Factory.addGetterSetter(p,"align","left"),a.Factory.addGetterSetter(p,"letterSpacing",0,u.getNumberValidator()),a.Factory.addGetterSetter(p,"textBaseline","middle"),a.Factory.addGetterSetter(p,"fontVariant","normal"),a.Factory.addGetterSetter(p,"text",""),a.Factory.addGetterSetter(p,"textDecoration",null),a.Factory.addGetterSetter(p,"kerningFunc",null),o.Collection.mapMethods(p)},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(8),a=r(5),s=r(9),l=r(10),c=r(37),u=r(25),h=r(6),d=r(7),f=r(6),p=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map((function(t){return t+".tr-konva"})).join(" "),g=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"].map((function(t){return t+".tr-konva"})).join(" "),v={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},y="ontouchstart"in h.Konva._global;var m=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],_=function(t){function e(e){var r=t.call(this,e)||this;return r._transforming=!1,r._createElements(),r._handleMouseMove=r._handleMouseMove.bind(r),r._handleMouseUp=r._handleMouseUp.bind(r),r.update=r.update.bind(r),r.on(p,r.update),r.getNode()&&r.update(),r}return i(e,t),e.prototype.attachTo=function(t){return this.setNode(t),this},e.prototype.setNode=function(t){var e=this;this._node&&this.detach(),this._node=t,this._resetTransformCache();var r=t._attrsAffectingSize.map((function(t){return t+"Change.tr-konva"})).join(" "),n=function(){e._resetTransformCache(),e._transforming||e.update()};return t.on(r,n),t.on(g,n),t.on("xChange.tr-konva yChange.tr-konva",(function(){return e._resetTransformCache()})),!!this.findOne(".top-left")&&this.update(),this},e.prototype.getNode=function(){return this._node},e.prototype.detach=function(){this.getNode()&&(this.getNode().off(".tr-konva"),this._node=void 0),this._resetTransformCache()},e.prototype._resetTransformCache=function(){this._clearCache("nodeRect"),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")},e.prototype._getNodeRect=function(){return this._getCache("nodeRect",this.__getNodeRect)},e.prototype.__getNodeRect=function(){var t=this.getNode();if(!t)return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};t.parent&&this.parent&&t.parent!==this.parent&&o.Util.warn("Transformer and attached node have different parents. Konva does not support such case right now. Please move Transformer to the parent of attaching node.");var e=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),r=h.Konva.getAngle(t.rotation()),n=e.x*t.scaleX()-t.offsetX()*t.scaleX(),i=e.y*t.scaleY()-t.offsetY()*t.scaleY();return{x:t.x()+n*Math.cos(r)+i*Math.sin(-r),y:t.y()+i*Math.cos(r)+n*Math.sin(r),width:e.width*t.scaleX(),height:e.height*t.scaleY(),rotation:t.rotation()}},e.prototype.getX=function(){return this._getNodeRect().x},e.prototype.getY=function(){return this._getNodeRect().y},e.prototype.getRotation=function(){return this._getNodeRect().rotation},e.prototype.getWidth=function(){return this._getNodeRect().width},e.prototype.getHeight=function(){return this._getNodeRect().height},e.prototype._createElements=function(){this._createBack(),m.forEach(function(t){this._createAnchor(t)}.bind(this)),this._createAnchor("rotater")},e.prototype._createAnchor=function(t){var e=this,r=new c.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:y?10:"auto"}),n=this;r.on("mousedown touchstart",(function(t){n._handleMouseDown(t)})),r.on("dragstart",(function(t){t.cancelBubble=!0})),r.on("dragmove",(function(t){t.cancelBubble=!0})),r.on("dragend",(function(t){t.cancelBubble=!0})),r.on("mouseenter",(function(){var n=h.Konva.getAngle(e.rotation()),i=e.getNode().getAbsoluteScale(),a=i.y*i.x<0,s=function(t,e,r){if("rotater"===t)return"crosshair";e+=o.Util._degToRad(v[t]||0),r&&(e*=-1);var n=(o.Util._radToDeg(e)%360+360)%360;return o.Util._inRange(n,337.5,360)||o.Util._inRange(n,0,22.5)?"ns-resize":o.Util._inRange(n,22.5,67.5)?"nesw-resize":o.Util._inRange(n,67.5,112.5)?"ew-resize":o.Util._inRange(n,112.5,157.5)?"nwse-resize":o.Util._inRange(n,157.5,202.5)?"ns-resize":o.Util._inRange(n,202.5,247.5)?"nesw-resize":o.Util._inRange(n,247.5,292.5)?"ew-resize":o.Util._inRange(n,292.5,337.5)?"nwse-resize":(o.Util.error("Transformer has unknown angle for cursor detection: "+n),"pointer")}(t,n,a);r.getStage().content.style.cursor=s,e._cursorChange=!0})),r.on("mouseout",(function(){r.getStage()&&r.getParent()&&(r.getStage().content.style.cursor="",e._cursorChange=!1)})),this.add(r)},e.prototype._createBack=function(){var t=new l.Shape({name:"back",width:0,height:0,listening:!1,sceneFunc:function(t){var e=this.getParent(),r=e.padding();t.beginPath(),t.rect(-r,-r,this.width()+2*r,this.height()+2*r),t.moveTo(this.width()/2,-r),e.rotateEnabled()&&t.lineTo(this.width()/2,-e.rotateAnchorOffset()*o.Util._sign(this.height())-r),t.fillStrokeShape(this)}});this.add(t)},e.prototype._handleMouseDown=function(t){this._movingAnchorName=t.target.name().split(" ")[0];var e=this._getNodeRect(),r=e.width,n=e.height,i=Math.sqrt(Math.pow(r,2)+Math.pow(n,2));this.sin=Math.abs(n/i),this.cos=Math.abs(r/i),window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0),this._transforming=!0,this._fire("transformstart",{evt:t}),this.getNode()._fire("transformstart",{evt:t})},e.prototype._handleMouseMove=function(t){var e,r,n,i=this.findOne("."+this._movingAnchorName),a=i.getStage().getContent().getBoundingClientRect(),s=a.left,l=a.top,c={x:(void 0!==t.clientX?t.clientX:t.touches[0].clientX)-s,y:(void 0!==t.clientX?t.clientY:t.touches[0].clientY)-l};i.setAbsolutePosition(c);var u=this.keepRatio()||t.shiftKey,d=this.padding();if("top-left"===this._movingAnchorName){if(u){n=Math.sqrt(Math.pow(this.findOne(".bottom-right").x()-i.x()-2*d,2)+Math.pow(this.findOne(".bottom-right").y()-i.y()-2*d,2));var f=this.findOne(".top-left").x()>this.findOne(".bottom-right").x()?-1:1,p=this.findOne(".top-left").y()>this.findOne(".bottom-right").y()?-1:1;e=n*this.cos*f,r=n*this.sin*p,this.findOne(".top-left").x(this.findOne(".bottom-right").x()-e-2*d),this.findOne(".top-left").y(this.findOne(".bottom-right").y()-r-2*d)}}else if("top-center"===this._movingAnchorName)this.findOne(".top-left").y(i.y());else if("top-right"===this._movingAnchorName){if(u){n=Math.sqrt(Math.pow(i.x()-this.findOne(".bottom-left").x()-2*d,2)+Math.pow(this.findOne(".bottom-left").y()-i.y()-2*d,2));f=this.findOne(".top-right").x()<this.findOne(".top-left").x()?-1:1,p=this.findOne(".top-right").y()>this.findOne(".bottom-left").y()?-1:1;e=n*this.cos*f,r=n*this.sin*p,this.findOne(".top-right").x(e+d),this.findOne(".top-right").y(this.findOne(".bottom-left").y()-r-2*d)}var g=i.position();this.findOne(".top-left").y(g.y),this.findOne(".bottom-right").x(g.x)}else if("middle-left"===this._movingAnchorName)this.findOne(".top-left").x(i.x());else if("middle-right"===this._movingAnchorName)this.findOne(".bottom-right").x(i.x());else if("bottom-left"===this._movingAnchorName){if(u){n=Math.sqrt(Math.pow(this.findOne(".top-right").x()-i.x()-2*d,2)+Math.pow(i.y()-this.findOne(".top-right").y()-2*d,2));f=this.findOne(".top-right").x()<this.findOne(".bottom-left").x()?-1:1,p=this.findOne(".bottom-right").y()<this.findOne(".top-left").y()?-1:1;e=n*this.cos*f,r=n*this.sin*p,this.findOne(".bottom-left").x(this.findOne(".top-right").x()-e-2*d),this.findOne(".bottom-left").y(r+d)}g=i.position(),this.findOne(".top-left").x(g.x),this.findOne(".bottom-right").y(g.y)}else if("bottom-center"===this._movingAnchorName)this.findOne(".bottom-right").y(i.y());else if("bottom-right"===this._movingAnchorName){if(u){n=Math.sqrt(Math.pow(this.findOne(".bottom-right").x()-d,2)+Math.pow(this.findOne(".bottom-right").y()-d,2));f=this.findOne(".top-left").x()>this.findOne(".bottom-right").x()?-1:1,p=this.findOne(".top-left").y()>this.findOne(".bottom-right").y()?-1:1;e=n*this.cos*f,r=n*this.sin*p,this.findOne(".bottom-right").x(e+d),this.findOne(".bottom-right").y(r+d)}}else if("rotater"===this._movingAnchorName){var v=this._getNodeRect();e=i.x()-v.width/2,r=-i.y()+v.height/2;var y=Math.atan2(-r,e)+Math.PI/2;v.height<0&&(y-=Math.PI);for(var m=h.Konva.getAngle(this.rotation()),_=o.Util._radToDeg(m)+o.Util._radToDeg(y),b=h.Konva.getAngle(this.getNode().rotation()),w=o.Util._degToRad(_),S=this.rotationSnaps(),A=0;A<S.length;A++){var k=h.Konva.getAngle(S[A]);Math.abs(k-o.Util._degToRad(_))%(2*Math.PI)<.1&&(_=o.Util._radToDeg(k),w=o.Util._degToRad(_))}var x=d,C=d;this._fitNodeInto({rotation:h.Konva.angleDeg?_:o.Util._degToRad(_),x:v.x+(v.width/2+d)*(Math.cos(b)-Math.cos(w))+(v.height/2+d)*(Math.sin(-b)-Math.sin(-w))-(x*Math.cos(m)+C*Math.sin(-m)),y:v.y+(v.height/2+d)*(Math.cos(b)-Math.cos(w))+(v.width/2+d)*(Math.sin(b)-Math.sin(w))-(C*Math.cos(m)+x*Math.sin(m)),width:v.width+2*d,height:v.height+2*d},t)}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if("rotater"!==this._movingAnchorName){if(this.centeredScaling()||t.altKey){var P=this.findOne(".top-left"),R=this.findOne(".bottom-right"),T=P.x()+d,E=P.y()+d,O=this.getWidth()-R.x()+d,F=this.getHeight()-R.y()+d;R.move({x:-T,y:-E}),P.move({x:O,y:F})}var I=this.findOne(".top-left").getAbsolutePosition(this.getParent());e=I.x,r=I.y;var M=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),L=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodeInto({x:e+this.offsetX(),y:r+this.offsetY(),width:M,height:L},t)}},e.prototype._handleMouseUp=function(t){this._removeEvents(t)},e.prototype._removeEvents=function(t){if(this._transforming){this._transforming=!1,window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0),this._fire("transformend",{evt:t});var e=this.getNode();e&&e.fire("transformend",{evt:t})}},e.prototype._fitNodeInto=function(t,e){var r=this.boundBoxFunc();if(r){var n=this._getNodeRect();t=r.call(this,n,t)}var i=this.getNode();void 0!==t.rotation&&this.getNode().rotation(t.rotation);var o=i.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),a=this.padding(),s=o.width?(t.width-2*a)/o.width:1,l=o.height?(t.height-2*a)/o.height:1,c=h.Konva.getAngle(i.rotation()),u=o.x*s-a-i.offsetX()*s,d=o.y*l-a-i.offsetY()*l;this.getNode().setAttrs({scaleX:s,scaleY:l,x:t.x-(u*Math.cos(c)+d*Math.sin(-c)),y:t.y-(d*Math.cos(c)+u*Math.sin(c))}),this._fire("transform",{evt:e}),this.getNode()._fire("transform",{evt:e}),this.update(),this.getLayer().batchDraw()},e.prototype.forceUpdate=function(){this._resetTransformCache(),this.update()},e.prototype.update=function(){var t=this,e=this._getNodeRect(),r=this.getNode(),n={x:1,y:1};r&&r.getParent()&&(n=r.getParent().getAbsoluteScale());var i={x:1/n.x,y:1/n.y},a=e.width,s=e.height,l=this.enabledAnchors(),c=this.resizeEnabled(),u=this.padding(),h=this.anchorSize();this.find("._anchor").each((function(e){return e.setAttrs({width:h,height:h,offsetX:h/2,offsetY:h/2,stroke:t.anchorStroke(),strokeWidth:t.anchorStrokeWidth(),fill:t.anchorFill(),cornerRadius:t.anchorCornerRadius()})})),this.findOne(".top-left").setAttrs({x:-u,y:-u,scale:i,visible:c&&l.indexOf("top-left")>=0}),this.findOne(".top-center").setAttrs({x:a/2,y:-u,scale:i,visible:c&&l.indexOf("top-center")>=0}),this.findOne(".top-right").setAttrs({x:a+u,y:-u,scale:i,visible:c&&l.indexOf("top-right")>=0}),this.findOne(".middle-left").setAttrs({x:-u,y:s/2,scale:i,visible:c&&l.indexOf("middle-left")>=0}),this.findOne(".middle-right").setAttrs({x:a+u,y:s/2,scale:i,visible:c&&l.indexOf("middle-right")>=0}),this.findOne(".bottom-left").setAttrs({x:-u,y:s+u,scale:i,visible:c&&l.indexOf("bottom-left")>=0}),this.findOne(".bottom-center").setAttrs({x:a/2,y:s+u,scale:i,visible:c&&l.indexOf("bottom-center")>=0}),this.findOne(".bottom-right").setAttrs({x:a+u,y:s+u,scale:i,visible:c&&l.indexOf("bottom-right")>=0});var d=-this.rotateAnchorOffset()*Math.abs(i.y);this.findOne(".rotater").setAttrs({x:a/2,y:d*o.Util._sign(s)-u,scale:i,visible:this.rotateEnabled()}),this.findOne(".back").setAttrs({width:a*n.x,height:s*n.y,scale:i,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash()})},e.prototype.isTransforming=function(){return this._transforming},e.prototype.stopTransform=function(){if(this._transforming){this._removeEvents();var t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}},e.prototype.destroy=function(){return this.getStage()&&this._cursorChange&&(this.getStage().content.style.cursor=""),u.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this},e.prototype.toObject=function(){return s.Node.prototype.toObject.call(this)},e}(u.Group);e.Transformer=_,_.prototype.className="Transformer",f._registerNode(_),a.Factory.addGetterSetter(_,"enabledAnchors",m,(function(t){return t instanceof Array||o.Util.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach((function(t){-1===m.indexOf(t)&&o.Util.warn("Unknown anchor name: "+t+". Available names are: "+m.join(", "))})),t||[]})),a.Factory.addGetterSetter(_,"resizeEnabled",!0),a.Factory.addGetterSetter(_,"anchorSize",10,d.getNumberValidator()),a.Factory.addGetterSetter(_,"rotateEnabled",!0),a.Factory.addGetterSetter(_,"rotationSnaps",[]),a.Factory.addGetterSetter(_,"rotateAnchorOffset",50,d.getNumberValidator()),a.Factory.addGetterSetter(_,"borderEnabled",!0),a.Factory.addGetterSetter(_,"anchorStroke","rgb(0, 161, 255)"),a.Factory.addGetterSetter(_,"anchorStrokeWidth",1,d.getNumberValidator()),a.Factory.addGetterSetter(_,"anchorFill","white"),a.Factory.addGetterSetter(_,"anchorCornerRadius",0,d.getNumberValidator()),a.Factory.addGetterSetter(_,"borderStroke","rgb(0, 161, 255)"),a.Factory.addGetterSetter(_,"borderStrokeWidth",1,d.getNumberValidator()),a.Factory.addGetterSetter(_,"borderDash"),a.Factory.addGetterSetter(_,"keepRatio",!0),a.Factory.addGetterSetter(_,"centeredScaling",!1),a.Factory.addGetterSetter(_,"ignoreStroke",!1),a.Factory.addGetterSetter(_,"padding",0,d.getNumberValidator()),a.Factory.addGetterSetter(_,"node"),a.Factory.addGetterSetter(_,"boundBoxFunc"),a.Factory.backCompat(_,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),o.Collection.mapMethods(_)},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(8),a=r(5),s=r(10),l=r(6),c=r(7),u=r(6),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.radius(),0,l.Konva.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.radius()},e.prototype.getHeight=function(){return 2*this.radius()},e.prototype.setWidth=function(t){this.radius(t/2)},e.prototype.setHeight=function(t){this.radius(t/2)},e}(s.Shape);e.Wedge=h,h.prototype.className="Wedge",h.prototype._centroid=!0,h.prototype._attrsAffectingSize=["radius"],u._registerNode(h),a.Factory.addGetterSetter(h,"radius",0,c.getNumberValidator()),a.Factory.addGetterSetter(h,"angle",0,c.getNumberValidator()),a.Factory.addGetterSetter(h,"clockwise",!1),a.Factory.backCompat(h,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),o.Collection.mapMethods(h)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5),i=r(9),o=r(7);function a(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var s=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],l=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];e.Blur=function(t){var e=Math.round(this.blurRadius());e>0&&function(t,e){var r,n,i,o,c,u,h,d,f,p,g,v,y,m,_,b,w,S,A,k,x,C,P,R,T=t.data,E=t.width,O=t.height,F=e+e+1,I=E-1,M=O-1,L=e+1,D=L*(L+1)/2,N=new a,j=null,U=N,G=null,q=null,B=s[e],W=l[e];for(i=1;i<F;i++)U=U.next=new a,i===L&&(j=U);for(U.next=N,h=u=0,n=0;n<O;n++){for(b=w=S=A=d=f=p=g=0,v=L*(k=T[u]),y=L*(x=T[u+1]),m=L*(C=T[u+2]),_=L*(P=T[u+3]),d+=D*k,f+=D*x,p+=D*C,g+=D*P,U=N,i=0;i<L;i++)U.r=k,U.g=x,U.b=C,U.a=P,U=U.next;for(i=1;i<L;i++)o=u+((I<i?I:i)<<2),d+=(U.r=k=T[o])*(R=L-i),f+=(U.g=x=T[o+1])*R,p+=(U.b=C=T[o+2])*R,g+=(U.a=P=T[o+3])*R,b+=k,w+=x,S+=C,A+=P,U=U.next;for(G=N,q=j,r=0;r<E;r++)T[u+3]=P=g*B>>W,0!==P?(P=255/P,T[u]=(d*B>>W)*P,T[u+1]=(f*B>>W)*P,T[u+2]=(p*B>>W)*P):T[u]=T[u+1]=T[u+2]=0,d-=v,f-=y,p-=m,g-=_,v-=G.r,y-=G.g,m-=G.b,_-=G.a,o=h+((o=r+e+1)<I?o:I)<<2,d+=b+=G.r=T[o],f+=w+=G.g=T[o+1],p+=S+=G.b=T[o+2],g+=A+=G.a=T[o+3],G=G.next,v+=k=q.r,y+=x=q.g,m+=C=q.b,_+=P=q.a,b-=k,w-=x,S-=C,A-=P,q=q.next,u+=4;h+=E}for(r=0;r<E;r++){for(w=S=A=b=f=p=g=d=0,v=L*(k=T[u=r<<2]),y=L*(x=T[u+1]),m=L*(C=T[u+2]),_=L*(P=T[u+3]),d+=D*k,f+=D*x,p+=D*C,g+=D*P,U=N,i=0;i<L;i++)U.r=k,U.g=x,U.b=C,U.a=P,U=U.next;for(c=E,i=1;i<=e;i++)u=c+r<<2,d+=(U.r=k=T[u])*(R=L-i),f+=(U.g=x=T[u+1])*R,p+=(U.b=C=T[u+2])*R,g+=(U.a=P=T[u+3])*R,b+=k,w+=x,S+=C,A+=P,U=U.next,i<M&&(c+=E);for(u=r,G=N,q=j,n=0;n<O;n++)T[(o=u<<2)+3]=P=g*B>>W,P>0?(P=255/P,T[o]=(d*B>>W)*P,T[o+1]=(f*B>>W)*P,T[o+2]=(p*B>>W)*P):T[o]=T[o+1]=T[o+2]=0,d-=v,f-=y,p-=m,g-=_,v-=G.r,y-=G.g,m-=G.b,_-=G.a,o=r+((o=n+L)<M?o:M)*E<<2,d+=b+=G.r=T[o],f+=w+=G.g=T[o+1],p+=S+=G.b=T[o+2],g+=A+=G.a=T[o+3],G=G.next,v+=k=q.r,y+=x=q.g,m+=C=q.b,_+=P=q.a,b-=k,w-=x,S-=C,A-=P,q=q.next,u+=E}}(t,e)},n.Factory.addGetterSetter(i.Node,"blurRadius",0,o.getNumberValidator(),n.Factory.afterSetFilter)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5),i=r(9),o=r(7);e.Brighten=function(t){var e,r=255*this.brightness(),n=t.data,i=n.length;for(e=0;e<i;e+=4)n[e]+=r,n[e+1]+=r,n[e+2]+=r},n.Factory.addGetterSetter(i.Node,"brightness",0,o.getNumberValidator(),n.Factory.afterSetFilter)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5),i=r(9),o=r(7);e.Contrast=function(t){var e,r=Math.pow((this.contrast()+100)/100,2),n=t.data,i=n.length,o=150,a=150,s=150;for(e=0;e<i;e+=4)o=n[e],a=n[e+1],s=n[e+2],o/=255,o-=.5,o*=r,o+=.5,a/=255,a-=.5,a*=r,a+=.5,s/=255,s-=.5,s*=r,s+=.5,o=(o*=255)<0?0:o>255?255:o,a=(a*=255)<0?0:a>255?255:a,s=(s*=255)<0?0:s>255?255:s,n[e]=o,n[e+1]=a,n[e+2]=s},n.Factory.addGetterSetter(i.Node,"contrast",0,o.getNumberValidator(),n.Factory.afterSetFilter)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5),i=r(9),o=r(8),a=r(7);e.Emboss=function(t){var e=10*this.embossStrength(),r=255*this.embossWhiteLevel(),n=this.embossDirection(),i=this.embossBlend(),a=0,s=0,l=t.data,c=t.width,u=t.height,h=4*c,d=u;switch(n){case"top-left":a=-1,s=-1;break;case"top":a=-1,s=0;break;case"top-right":a=-1,s=1;break;case"right":a=0,s=1;break;case"bottom-right":a=1,s=1;break;case"bottom":a=1,s=0;break;case"bottom-left":a=1,s=-1;break;case"left":a=0,s=-1;break;default:o.Util.error("Unknown emboss direction: "+n)}do{var f=(d-1)*h,p=a;d+p<1&&(p=0),d+p>u&&(p=0);var g=(d-1+p)*c*4,v=c;do{var y=f+4*(v-1),m=s;v+m<1&&(m=0),v+m>c&&(m=0);var _=g+4*(v-1+m),b=l[y]-l[_],w=l[y+1]-l[_+1],S=l[y+2]-l[_+2],A=b,k=A>0?A:-A;if((w>0?w:-w)>k&&(A=w),(S>0?S:-S)>k&&(A=S),A*=e,i){var x=l[y]+A,C=l[y+1]+A,P=l[y+2]+A;l[y]=x>255?255:x<0?0:x,l[y+1]=C>255?255:C<0?0:C,l[y+2]=P>255?255:P<0?0:P}else{var R=r-A;R<0?R=0:R>255&&(R=255),l[y]=l[y+1]=l[y+2]=R}}while(--v)}while(--d)},n.Factory.addGetterSetter(i.Node,"embossStrength",.5,a.getNumberValidator(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(i.Node,"embossWhiteLevel",.5,a.getNumberValidator(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(i.Node,"embossDirection","top-left",null,n.Factory.afterSetFilter),n.Factory.addGetterSetter(i.Node,"embossBlend",!1,null,n.Factory.afterSetFilter)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5),i=r(9),o=r(7);function a(t,e,r,n,i){var o=r-e,a=i-n;return 0===o?n+a/2:0===a?n:a*((t-e)/o)+n}e.Enhance=function(t){var e,r,n,i,o=t.data,s=o.length,l=o[0],c=l,u=o[1],h=u,d=o[2],f=d,p=this.enhance();if(0!==p){for(i=0;i<s;i+=4)(e=o[i+0])<l?l=e:e>c&&(c=e),(r=o[i+1])<u?u=r:r>h&&(h=r),(n=o[i+2])<d?d=n:n>f&&(f=n);var g,v,y,m,_,b,w,S,A;for(c===l&&(c=255,l=0),h===u&&(h=255,u=0),f===d&&(f=255,d=0),p>0?(v=c+p*(255-c),y=l-p*(l-0),_=h+p*(255-h),b=u-p*(u-0),S=f+p*(255-f),A=d-p*(d-0)):(v=c+p*(c-(g=.5*(c+l))),y=l+p*(l-g),_=h+p*(h-(m=.5*(h+u))),b=u+p*(u-m),S=f+p*(f-(w=.5*(f+d))),A=d+p*(d-w)),i=0;i<s;i+=4)o[i+0]=a(o[i+0],l,c,y,v),o[i+1]=a(o[i+1],u,h,b,_),o[i+2]=a(o[i+2],d,f,A,S)}},n.Factory.addGetterSetter(i.Node,"enhance",0,o.getNumberValidator(),n.Factory.afterSetFilter)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Grayscale=function(t){var e,r,n=t.data,i=n.length;for(e=0;e<i;e+=4)r=.34*n[e]+.5*n[e+1]+.16*n[e+2],n[e]=r,n[e+1]=r,n[e+2]=r}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5),i=r(9),o=r(7);n.Factory.addGetterSetter(i.Node,"hue",0,o.getNumberValidator(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(i.Node,"saturation",0,o.getNumberValidator(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(i.Node,"luminance",0,o.getNumberValidator(),n.Factory.afterSetFilter),e.HSL=function(t){var e,r,n,i,o,a=t.data,s=a.length,l=Math.pow(2,this.saturation()),c=Math.abs(this.hue()+360)%360,u=127*this.luminance(),h=1*l*Math.cos(c*Math.PI/180),d=1*l*Math.sin(c*Math.PI/180),f=.299+.701*h+.167*d,p=.587-.587*h+.33*d,g=.114-.114*h-.497*d,v=.299-.299*h-.328*d,y=.587+.413*h+.035*d,m=.114-.114*h+.293*d,_=.299-.3*h+1.25*d,b=.587-.586*h-1.05*d,w=.114+.886*h-.2*d;for(e=0;e<s;e+=4)r=a[e+0],n=a[e+1],i=a[e+2],o=a[e+3],a[e+0]=f*r+p*n+g*i+u,a[e+1]=v*r+y*n+m*i+u,a[e+2]=_*r+b*n+w*i+u,a[e+3]=o}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5),i=r(9),o=r(7);e.HSV=function(t){var e,r,n,i,o,a=t.data,s=a.length,l=Math.pow(2,this.value()),c=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,h=l*c*Math.cos(u*Math.PI/180),d=l*c*Math.sin(u*Math.PI/180),f=.299*l+.701*h+.167*d,p=.587*l-.587*h+.33*d,g=.114*l-.114*h-.497*d,v=.299*l-.299*h-.328*d,y=.587*l+.413*h+.035*d,m=.114*l-.114*h+.293*d,_=.299*l-.3*h+1.25*d,b=.587*l-.586*h-1.05*d,w=.114*l+.886*h-.2*d;for(e=0;e<s;e+=4)r=a[e+0],n=a[e+1],i=a[e+2],o=a[e+3],a[e+0]=f*r+p*n+g*i,a[e+1]=v*r+y*n+m*i,a[e+2]=_*r+b*n+w*i,a[e+3]=o},n.Factory.addGetterSetter(i.Node,"hue",0,o.getNumberValidator(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(i.Node,"saturation",0,o.getNumberValidator(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(i.Node,"value",0,o.getNumberValidator(),n.Factory.afterSetFilter)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Invert=function(t){var e,r=t.data,n=r.length;for(e=0;e<n;e+=4)r[e]=255-r[e],r[e+1]=255-r[e+1],r[e+2]=255-r[e+2]}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5),i=r(9),o=r(8),a=r(7);e.Kaleidoscope=function(t){var e,r,n,i,a,s,l,c,u,h=t.width,d=t.height,f=Math.round(this.kaleidoscopePower()),p=Math.round(this.kaleidoscopeAngle()),g=Math.floor(h*(p%360)/360);if(!(f<1)){var v=o.Util.createCanvasElement();v.width=h,v.height=d;var y=v.getContext("2d").getImageData(0,0,h,d);!function(t,e,r){var n,i,o,a,s=t.data,l=e.data,c=t.width,u=t.height,h=r.polarCenterX||c/2,d=r.polarCenterY||u/2,f=0,p=0,g=0,v=0,y=Math.sqrt(h*h+d*d);i=c-h,o=u-d,y=(a=Math.sqrt(i*i+o*o))>y?a:y;var m,_,b,w,S=u,A=c,k=360/A*Math.PI/180;for(_=0;_<A;_+=1)for(b=Math.sin(_*k),w=Math.cos(_*k),m=0;m<S;m+=1)i=Math.floor(h+y*m/S*w),f=s[(n=4*((o=Math.floor(d+y*m/S*b))*c+i))+0],p=s[n+1],g=s[n+2],v=s[n+3],l[(n=4*(_+m*c))+0]=f,l[n+1]=p,l[n+2]=g,l[n+3]=v}(t,y,{polarCenterX:h/2,polarCenterY:d/2});for(var m=h/Math.pow(2,f);m<=8;)m*=2,f-=1;var _=m=Math.ceil(m),b=0,w=_,S=1;for(g+m>h&&(b=_,w=0,S=-1),r=0;r<d;r+=1)for(e=b;e!==w;e+=S)c=4*(h*r+Math.round(e+g)%h),i=y.data[c+0],a=y.data[c+1],s=y.data[c+2],l=y.data[c+3],u=4*(h*r+e),y.data[u+0]=i,y.data[u+1]=a,y.data[u+2]=s,y.data[u+3]=l;for(r=0;r<d;r+=1)for(_=Math.floor(m),n=0;n<f;n+=1){for(e=0;e<_+1;e+=1)c=4*(h*r+e),i=y.data[c+0],a=y.data[c+1],s=y.data[c+2],l=y.data[c+3],u=4*(h*r+2*_-e-1),y.data[u+0]=i,y.data[u+1]=a,y.data[u+2]=s,y.data[u+3]=l;_*=2}!function(t,e,r){var n,i,o,a,s,l,c=t.data,u=e.data,h=t.width,d=t.height,f=r.polarCenterX||h/2,p=r.polarCenterY||d/2,g=0,v=0,y=0,m=0,_=Math.sqrt(f*f+p*p);i=h-f,o=d-p,_=(l=Math.sqrt(i*i+o*o))>_?l:_;var b,w,S,A=d,k=h,x=r.polarRotation||0;for(i=0;i<h;i+=1)for(o=0;o<d;o+=1)a=i-f,s=o-p,b=Math.sqrt(a*a+s*s)*A/_,w=(w=(180*Math.atan2(s,a)/Math.PI+360+x)%360)*k/360,S=Math.floor(w),g=c[(n=4*(Math.floor(b)*h+S))+0],v=c[n+1],y=c[n+2],m=c[n+3],u[(n=4*(o*h+i))+0]=g,u[n+1]=v,u[n+2]=y,u[n+3]=m}(y,t,{polarRotation:0})}},n.Factory.addGetterSetter(i.Node,"kaleidoscopePower",2,a.getNumberValidator(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(i.Node,"kaleidoscopeAngle",0,a.getNumberValidator(),n.Factory.afterSetFilter)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5),i=r(9),o=r(7);function a(t,e,r){var n=4*(r*t.width+e),i=[];return i.push(t.data[n++],t.data[n++],t.data[n++],t.data[n++]),i}function s(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}e.Mask=function(t){var e=function(t,e){var r=a(t,0,0),n=a(t,t.width-1,0),i=a(t,0,t.height-1),o=a(t,t.width-1,t.height-1),l=e||10;if(s(r,n)<l&&s(n,o)<l&&s(o,i)<l&&s(i,r)<l){for(var c=function(t){for(var e=[0,0,0],r=0;r<t.length;r++)e[0]+=t[r][0],e[1]+=t[r][1],e[2]+=t[r][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}([n,r,o,i]),u=[],h=0;h<t.width*t.height;h++){var d=s(c,[t.data[4*h],t.data[4*h+1],t.data[4*h+2]]);u[h]=d<l?0:255}return u}}(t,this.threshold());return e&&function(t,e){for(var r=0;r<t.width*t.height;r++)t.data[4*r+3]=e[r]}(t,e=function(t,e,r){for(var n=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],i=Math.round(Math.sqrt(n.length)),o=Math.floor(i/2),a=[],s=0;s<r;s++)for(var l=0;l<e;l++){for(var c=s*e+l,u=0,h=0;h<i;h++)for(var d=0;d<i;d++){var f=s+h-o,p=l+d-o;if(f>=0&&f<r&&p>=0&&p<e){var g=n[h*i+d];u+=t[f*e+p]*g}}a[c]=u}return a}(e=function(t,e,r){for(var n=[1,1,1,1,1,1,1,1,1],i=Math.round(Math.sqrt(n.length)),o=Math.floor(i/2),a=[],s=0;s<r;s++)for(var l=0;l<e;l++){for(var c=s*e+l,u=0,h=0;h<i;h++)for(var d=0;d<i;d++){var f=s+h-o,p=l+d-o;if(f>=0&&f<r&&p>=0&&p<e){var g=n[h*i+d];u+=t[f*e+p]*g}}a[c]=u>=1020?255:0}return a}(e=function(t,e,r){for(var n=[1,1,1,1,0,1,1,1,1],i=Math.round(Math.sqrt(n.length)),o=Math.floor(i/2),a=[],s=0;s<r;s++)for(var l=0;l<e;l++){for(var c=s*e+l,u=0,h=0;h<i;h++)for(var d=0;d<i;d++){var f=s+h-o,p=l+d-o;if(f>=0&&f<r&&p>=0&&p<e){var g=n[h*i+d];u+=t[f*e+p]*g}}a[c]=2040===u?255:0}return a}(e,t.width,t.height),t.width,t.height),t.width,t.height)),t},n.Factory.addGetterSetter(i.Node,"threshold",0,o.getNumberValidator(),n.Factory.afterSetFilter)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5),i=r(9),o=r(7);e.Noise=function(t){var e,r=255*this.noise(),n=t.data,i=n.length,o=r/2;for(e=0;e<i;e+=4)n[e+0]+=o-2*o*Math.random(),n[e+1]+=o-2*o*Math.random(),n[e+2]+=o-2*o*Math.random()},n.Factory.addGetterSetter(i.Node,"noise",.2,o.getNumberValidator(),n.Factory.afterSetFilter)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5),i=r(8),o=r(9),a=r(7);e.Pixelate=function(t){var e,r,n,o,a,s,l,c,u,h,d,f,p,g,v=Math.ceil(this.pixelSize()),y=t.width,m=t.height,_=Math.ceil(y/v),b=Math.ceil(m/v),w=t.data;if(v<=0)i.Util.error("pixelSize value can not be <= 0");else for(f=0;f<_;f+=1)for(p=0;p<b;p+=1){for(o=0,a=0,s=0,l=0,u=(c=f*v)+v,d=(h=p*v)+v,g=0,e=c;e<u;e+=1)if(!(e>=y))for(r=h;r<d;r+=1)r>=m||(o+=w[(n=4*(y*r+e))+0],a+=w[n+1],s+=w[n+2],l+=w[n+3],g+=1);for(o/=g,a/=g,s/=g,l/=g,e=c;e<u;e+=1)if(!(e>=y))for(r=h;r<d;r+=1)r>=m||(w[(n=4*(y*r+e))+0]=o,w[n+1]=a,w[n+2]=s,w[n+3]=l)}},n.Factory.addGetterSetter(o.Node,"pixelSize",8,a.getNumberValidator(),n.Factory.afterSetFilter)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5),i=r(9),o=r(7);e.Posterize=function(t){var e,r=Math.round(254*this.levels())+1,n=t.data,i=n.length,o=255/r;for(e=0;e<i;e+=1)n[e]=Math.floor(n[e]/o)*o},n.Factory.addGetterSetter(i.Node,"levels",.5,o.getNumberValidator(),n.Factory.afterSetFilter)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5),i=r(9),o=r(7);e.RGB=function(t){var e,r,n=t.data,i=n.length,o=this.red(),a=this.green(),s=this.blue();for(e=0;e<i;e+=4)r=(.34*n[e]+.5*n[e+1]+.16*n[e+2])/255,n[e]=r*o,n[e+1]=r*a,n[e+2]=r*s,n[e+3]=n[e+3]},n.Factory.addGetterSetter(i.Node,"red",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),n.Factory.addGetterSetter(i.Node,"green",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),n.Factory.addGetterSetter(i.Node,"blue",0,o.RGBComponent,n.Factory.afterSetFilter)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5),i=r(9),o=r(7);e.RGBA=function(t){var e,r,n=t.data,i=n.length,o=this.red(),a=this.green(),s=this.blue(),l=this.alpha();for(e=0;e<i;e+=4)r=1-l,n[e]=o*l+n[e]*r,n[e+1]=a*l+n[e+1]*r,n[e+2]=s*l+n[e+2]*r},n.Factory.addGetterSetter(i.Node,"red",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),n.Factory.addGetterSetter(i.Node,"green",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),n.Factory.addGetterSetter(i.Node,"blue",0,o.RGBComponent,n.Factory.afterSetFilter),n.Factory.addGetterSetter(i.Node,"alpha",1,(function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t}))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Sepia=function(t){var e,r,n,i,o=t.data,a=o.length;for(e=0;e<a;e+=4)r=o[e+0],n=o[e+1],i=o[e+2],o[e+0]=Math.min(255,.393*r+.769*n+.189*i),o[e+1]=Math.min(255,.349*r+.686*n+.168*i),o[e+2]=Math.min(255,.272*r+.534*n+.131*i)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Solarize=function(t){var e=t.data,r=t.width,n=4*r,i=t.height;do{var o=(i-1)*n,a=r;do{var s=o+4*(a-1),l=e[s],c=e[s+1],u=e[s+2];l>127&&(l=255-l),c>127&&(c=255-c),u>127&&(u=255-u),e[s]=l,e[s+1]=c,e[s+2]=u}while(--a)}while(--i)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5),i=r(9),o=r(7);e.Threshold=function(t){var e,r=255*this.threshold(),n=t.data,i=n.length;for(e=0;e<i;e+=1)n[e]=n[e]<r?0:255},n.Factory.addGetterSetter(i.Node,"threshold",.5,o.getNumberValidator(),n.Factory.afterSetFilter)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){"use strict";r.r(e);var n=r(27),i=r(39),o=r(41),a=r(12),s=r.n(a);class l extends o.a{constructor(t,e){super(t),this.statePage={page0:{group:this.group,size:{width:t.pdfViewport.width,height:t.pdfViewport.height}}};for(let t=1;t<e;t++){let e=new s.a.Group({draggable:!1,listening:!1,visible:!1});this.layer.add(e),this.statePage[`page${t}`]={group:e}}this.selectColor=!1,this.tresholdInput=document.querySelector("#treshold"),this.loadIconPng()}loadIconPng(){this.trashIconImg=new Image,this.trashIconImg.src="assets/pictures/trash_icon.png",this.downloadIconImg=new Image,this.downloadIconImg.src="assets/pictures/download_icon.png"}addNodeToState(t,e,r=[],n={}){if(!Array.isArray(r))throw"nodeRelated is not an Array";if(!this.viewportInstance.currentPageIndex&&0!=this.viewportInstance.currentPageIndex)throw"currentPageIndex is null";this.page()[`node${t._id}`]={node:t,type:e,nodeRelated:r,...n}}supprNodeInStateById(t){this.page()[`node${t}`].nodeRelated.map(t=>t.parentNode.removeChild(t)),delete this.page()[`node${t}`]}createRectangle(t,e,r,n){let i=super.createRectangle(t,e,r,n);return this.addNodeToState(i,"rect"),i}changeIndexPage(t){this.mode="",this.group.setAttrs({visible:!1,listening:!1}),this.group=this.page().group,this.group.setAttrs({visible:!0,listening:!0});let e={width:t.pdfViewport.width,height:t.pdfViewport.height};this.page().size=e,this.layer.draw()}page(){return this.statePage[`page${this.viewportInstance.currentPageIndex}`]}addTransformer(t){let e=super.addTransformer(t.target);this.addLayoutForTransformer(e,t)}addLayoutForTransformer(t,e){const r=this.addSupprButtonOnTransformer(t,e),n=this.addDownloadButtonOnTransformer(t,e);t.boundBoxFunc((function(t,e){return e.width<5||e.height<10?t:e})),t.on("transform",()=>{r.x(t.width()+10),r.y(5),n.x(t.width()+10),n.y(45)})}rgb2y(t,e,r){return.29889531*t+.58662247*e+.11448223*r}rgb2i(t,e,r){return.59597799*t-.2741761*e-.32180189*r}rgb2q(t,e,r){return.21147017*t-.52261711*e+.31114694*r}colorsAreMatching(t,e,r){if(t.r===e.r&&t.g===e.g&&t.b===e.b)return!0;const n=this.rgb2y(t.r,t.g,t.b)-this.rgb2y(e.r,e.g,e.b),i=this.rgb2i(t.r,t.g,t.b)-this.rgb2i(e.r,e.g,e.b),o=this.rgb2q(t.r,t.g,t.b)-this.rgb2q(e.r,e.g,e.b);return.5053*n*n+.299*i*i+.1957*o*o<r}getColorToMatch(){let t=this.colorPicker.color.rgba;return{r:t[0],g:t[1],b:t[2],a:t[3]}}getDataRectZoneAndMakeItTransparent(t){const e=this.viewportInstance.viewport.querySelector("canvas").getContext("2d"),r=document.createElement("canvas");let n=r.getContext("2d");const i=t.position(),o=e.getImageData(i.x,i.y,t.width()*t.scaleX(),t.height()*t.scaleY());r.width=t.width()*t.scaleX(),r.height=t.height()*t.scaleY();let a=o.data;if(this.selectColor){const t=this.getColorToMatch(),e=Number(this.tresholdInput.value)/100,r=35215*e*e,n=0;for(var s=0,l=a.length;s<l;s+=4){var c=a[s],u=a[s+1],h=a[s+2];this.colorsAreMatching({r:c,g:u,b:h},t,r)&&(a[s+3]=n)}}return n.putImageData(o,0,0),r}downloadDataCapturedOnPng(t){let e=t.toDataURL("image/png");const r=Math.random().toString(36).substring(7);var n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("download",r+".png"),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}button(t,e){return{cornerRadius:5,x:t.width()+10,y:e,width:30,height:30,draggable:!1,strokeScaleEnabled:!1}}supprButton(t){return Object.assign(this.button(t,5),{stroke:"#c20000",fill:"red",name:"deleteRect"})}downloadButton(t){return Object.assign(this.button(t,45),{stroke:"grey",fill:"grey",name:"downloadRect"})}trashIcon(){const t={x:25/this.trashIconImg.width,y:25/this.trashIconImg.height};return{fillPatternImage:this.trashIconImg,fillPatternScale:t,fillPatternOffset:{x:-2,y:-2},fillPatternRepeat:"no-repeat",fillPriority:"pattern"}}downloadIcon(){const t={x:25/this.downloadIconImg.width,y:25/this.downloadIconImg.height};return{fillPatternImage:this.downloadIconImg,fillPatternScale:t,fillPatternOffset:{x:-4,y:-2},fillPatternRepeat:"no-repeat",fillPriority:"pattern"}}isNodeText(t){return t.target.hasName("node_text")}addSupprButtonOnTransformer(t,e){const r=new s.a.Rect(Object.assign(this.supprButton(t),this.trashIcon()));return t.add(r),r.on("click",()=>{this.isNodeText(e)?e.target.parent.destroy():e.target.destroy(),this.supprNodeInStateById(e.target._id),this.destroyTransformer(),this.layer.draw(),this.mode=""}),r}addDownloadButtonOnTransformer(t,e){const r=new s.a.Rect(Object.assign(this.downloadButton(t),this.downloadIcon()));return t.add(r),r.on("click",()=>{this.mode="";const t=this.getDataRectZoneAndMakeItTransparent(e.target);this.downloadDataCapturedOnPng(t)}),r}}var c=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),h=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};String.prototype.startsWith=String.prototype.startsWith||function(t){return 0===this.indexOf(t)},String.prototype.padStart=String.prototype.padStart||function(t,e){for(var r=this;r.length<t;)r=e+r;return r};var d={cb:"0f8ff",tqw:"aebd7",q:"-ffff",qmrn:"7fffd4",zr:"0ffff",bg:"5f5dc",bsq:"e4c4",bck:"---",nch:"ebcd",b:"--ff",bvt:"8a2be2",brwn:"a52a2a",brw:"deb887",ctb:"5f9ea0",hrt:"7fff-",chcT:"d2691e",cr:"7f50",rnw:"6495ed",crns:"8dc",crms:"dc143c",cn:"-ffff",Db:"--8b",Dcn:"-8b8b",Dgnr:"b8860b",Dgr:"a9a9a9",Dgrn:"-64-",Dkhk:"bdb76b",Dmgn:"8b-8b",Dvgr:"556b2f",Drng:"8c-",Drch:"9932cc",Dr:"8b--",Dsmn:"e9967a",Dsgr:"8fbc8f",DsTb:"483d8b",DsTg:"2f4f4f",Dtrq:"-ced1",Dvt:"94-d3",ppnk:"1493",pskb:"-bfff",mgr:"696969",grb:"1e90ff",rbrc:"b22222",rwht:"af0",stg:"228b22",chs:"-ff",gnsb:"dcdcdc",st:"8f8ff",g:"d7-",gnr:"daa520",gr:"808080",grn:"-8-0",grnw:"adff2f",hnw:"0fff0",htpn:"69b4",nnr:"cd5c5c",ng:"4b-82",vr:"0",khk:"0e68c",vnr:"e6e6fa",nrb:"0f5",wngr:"7cfc-",mnch:"acd",Lb:"add8e6",Lcr:"08080",Lcn:"e0ffff",Lgnr:"afad2",Lgr:"d3d3d3",Lgrn:"90ee90",Lpnk:"b6c1",Lsmn:"a07a",Lsgr:"20b2aa",Lskb:"87cefa",LsTg:"778899",Lstb:"b0c4de",Lw:"e0",m:"-ff-",mgrn:"32cd32",nn:"af0e6",mgnt:"-ff",mrn:"8--0",mqm:"66cdaa",mmb:"--cd",mmrc:"ba55d3",mmpr:"9370db",msg:"3cb371",mmsT:"7b68ee","":"-fa9a",mtr:"48d1cc",mmvt:"c71585",mnLb:"191970",ntc:"5fffa",mstr:"e4e1",mccs:"e4b5",vjw:"dead",nv:"--80",c:"df5e6",v:"808-0",vrb:"6b8e23",rng:"a5-",rngr:"45-",rch:"da70d6",pgnr:"eee8aa",pgrn:"98fb98",ptrq:"afeeee",pvtr:"db7093",ppwh:"efd5",pchp:"dab9",pr:"cd853f",pnk:"c0cb",pm:"dda0dd",pwrb:"b0e0e6",prp:"8-080",cc:"663399",r:"--",sbr:"bc8f8f",rb:"4169e1",sbrw:"8b4513",smn:"a8072",nbr:"4a460",sgrn:"2e8b57",ssh:"5ee",snn:"a0522d",svr:"c0c0c0",skb:"87ceeb",sTb:"6a5acd",sTgr:"708090",snw:"afa",n:"-ff7f",stb:"4682b4",tn:"d2b48c",t:"-8080",thst:"d8bfd8",tmT:"6347",trqs:"40e0d0",vt:"ee82ee",whT:"5deb3",wht:"",hts:"5f5f5",w:"-",wgrn:"9acd32"};function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=e>0?t.toFixed(e).replace(/0+$/,"").replace(/\.$/,""):t.toString();return r||"0"}var p=function(){function t(e,r,n,i){c(this,t);var o=this;if(void 0===e);else if(Array.isArray(e))this.rgba=e;else if(void 0===n){var a=e&&""+e;a&&function(e){if(e.startsWith("hsl")){var r=e.match(/([\-\d\.e]+)/g).map(Number),n=h(r,4),i=n[0],a=n[1],s=n[2],l=n[3];void 0===l&&(l=1),i/=360,a/=100,s/=100,o.hsla=[i,a,s,l]}else if(e.startsWith("rgb")){var c=e.match(/([\-\d\.e]+)/g).map(Number),u=h(c,4),d=u[0],f=u[1],p=u[2],g=u[3];void 0===g&&(g=1),o.rgba=[d,f,p,g]}else e.startsWith("#")?o.rgba=t.hexToRgb(e):o.rgba=t.nameToRgb(e)||t.hexToRgb(e)}(a.toLowerCase())}else this.rgba=[e,r,n,void 0===i?1:i]}return u(t,[{key:"printRGB",value:function(t){var e=(t?this.rgba:this.rgba.slice(0,3)).map((function(t,e){return f(t,3===e?3:0)}));return t?"rgba("+e+")":"rgb("+e+")"}},{key:"printHSL",value:function(t){var e=[360,100,100,1],r=["","%","%",""],n=(t?this.hsla:this.hsla.slice(0,3)).map((function(t,n){return f(t*e[n],3===n?3:1)+r[n]}));return t?"hsla("+n+")":"hsl("+n+")"}},{key:"printHex",value:function(t){var e=this.hex;return t?e:e.substring(0,7)}},{key:"rgba",get:function(){if(this._rgba)return this._rgba;if(!this._hsla)throw new Error("No color is set");return this._rgba=t.hslToRgb(this._hsla)},set:function(t){3===t.length&&(t[3]=1),this._rgba=t,this._hsla=null}},{key:"rgbString",get:function(){return this.printRGB()}},{key:"rgbaString",get:function(){return this.printRGB(!0)}},{key:"hsla",get:function(){if(this._hsla)return this._hsla;if(!this._rgba)throw new Error("No color is set");return this._hsla=t.rgbToHsl(this._rgba)},set:function(t){3===t.length&&(t[3]=1),this._hsla=t,this._rgba=null}},{key:"hslString",get:function(){return this.printHSL()}},{key:"hslaString",get:function(){return this.printHSL(!0)}},{key:"hex",get:function(){return"#"+this.rgba.map((function(t,e){return e<3?t.toString(16):Math.round(255*t).toString(16)})).map((function(t){return t.padStart(2,"0")})).join("")},set:function(e){this.rgba=t.hexToRgb(e)}}],[{key:"hexToRgb",value:function(t){var e=(t.startsWith("#")?t.slice(1):t).replace(/^(\w{3})$/,"$1F").replace(/^(\w)(\w)(\w)(\w)$/,"$1$1$2$2$3$3$4$4").replace(/^(\w{6})$/,"$1FF");if(!e.match(/^([0-9a-fA-F]{8})$/))throw new Error("Unknown hex color; "+t);var r=e.match(/^(\w\w)(\w\w)(\w\w)(\w\w)$/).slice(1).map((function(t){return parseInt(t,16)}));return r[3]=r[3]/255,r}},{key:"nameToRgb",value:function(e){var r=e.toLowerCase().replace("at","T").replace(/[aeiouyldf]/g,"").replace("ght","L").replace("rk","D").slice(-5,4),n=d[r];return void 0===n?n:t.hexToRgb(n.replace(/\-/g,"00").padStart(6,"f"))}},{key:"rgbToHsl",value:function(t){var e=h(t,4),r=e[0],n=e[1],i=e[2],o=e[3];r/=255,n/=255,i/=255;var a=Math.max(r,n,i),s=Math.min(r,n,i),l=void 0,c=void 0,u=(a+s)/2;if(a===s)l=c=0;else{var d=a-s;switch(c=u>.5?d/(2-a-s):d/(a+s),a){case r:l=(n-i)/d+(n<i?6:0);break;case n:l=(i-r)/d+2;break;case i:l=(r-n)/d+4}l/=6}return[l,c,u,o]}},{key:"hslToRgb",value:function(t){var e=h(t,4),r=e[0],n=e[1],i=e[2],o=e[3],a=void 0,s=void 0,l=void 0;if(0===n)a=s=l=i;else{var c=function(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t},u=i<.5?i*(1+n):i+n-i*n,d=2*i-u;a=c(d,u,r+1/3),s=c(d,u,r),l=c(d,u,r-1/3)}var f=[255*a,255*s,255*l].map(Math.round);return f[3]=o,f}}]),t}(),g=function(){function t(){c(this,t),this._events=[]}return u(t,[{key:"add",value:function(t,e,r){t.addEventListener(e,r,!1),this._events.push({target:t,type:e,handler:r})}},{key:"remove",value:function(e,r,n){this._events=this._events.filter((function(i){var o=!0;return e&&e!==i.target&&(o=!1),r&&r!==i.type&&(o=!1),n&&n!==i.handler&&(o=!1),o&&t._doRemove(i.target,i.type,i.handler),!o}))}},{key:"destroy",value:function(){this._events.forEach((function(e){return t._doRemove(e.target,e.type,e.handler)})),this._events=[]}}],[{key:"_doRemove",value:function(t,e,r){t.removeEventListener(e,r,!1)}}]),t}();function v(t,e,r){var n=!1;function i(t,e,r){return Math.max(e,Math.min(t,r))}function o(t,o,a){if(a&&(n=!0),n){t.preventDefault();var s=e.getBoundingClientRect(),l=s.width,c=s.height,u=o.clientX,h=o.clientY,d=i(u-s.left,0,l),f=i(h-s.top,0,c);r(d/l,f/c)}}function a(t,e){1===(void 0===t.buttons?t.which:t.buttons)?o(t,t,e):n=!1}function s(t,e){1===t.touches.length?o(t,t.touches[0],e):n=!1}t.add(e,"mousedown",(function(t){a(t,!0)})),t.add(e,"touchstart",(function(t){s(t,!0)})),t.add(window,"mousemove",a),t.add(e,"touchmove",s),t.add(window,"mouseup",(function(t){n=!1})),t.add(e,"touchend",(function(t){n=!1})),t.add(e,"touchcancel",(function(t){n=!1}))}function y(t,e){return(e||document).querySelector(t)}function m(t){t.preventDefault(),t.stopPropagation()}function _(t,e,r,n,i){t.add(e,"keydown",(function(t){r.indexOf(t.key)>=0&&(i&&m(t),n(t))}))}var b=document.createElement("style");b.textContent=".picker_wrapper.no_alpha .picker_alpha{display:none}.picker_wrapper.no_editor .picker_editor{position:absolute;z-index:-1;opacity:0}.picker_wrapper.no_cancel .picker_cancel{display:none}.layout_default.picker_wrapper{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row wrap;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:stretch;align-items:stretch;font-size:10px;width:25em;padding:.5em}.layout_default.picker_wrapper input,.layout_default.picker_wrapper button{font-size:1rem}.layout_default.picker_wrapper>*{margin:.5em}.layout_default.picker_wrapper::before{content:'';display:block;width:100%;height:0;-webkit-box-ordinal-group:2;order:1}.layout_default .picker_slider,.layout_default .picker_selector{padding:1em}.layout_default .picker_hue{width:100%}.layout_default .picker_sl{-webkit-box-flex:1;flex:1 1 auto}.layout_default .picker_sl::before{content:'';display:block;padding-bottom:100%}.layout_default .picker_editor{-webkit-box-ordinal-group:2;order:1;width:6.5rem}.layout_default .picker_editor input{width:100%;height:100%}.layout_default .picker_sample{-webkit-box-ordinal-group:2;order:1;-webkit-box-flex:1;flex:1 1 auto}.layout_default .picker_done,.layout_default .picker_cancel{-webkit-box-ordinal-group:2;order:1}.picker_wrapper{box-sizing:border-box;background:#f2f2f2;box-shadow:0 0 0 1px silver;cursor:default;font-family:sans-serif;color:#444;pointer-events:auto}.picker_wrapper:focus{outline:none}.picker_wrapper button,.picker_wrapper input{box-sizing:border-box;border:none;box-shadow:0 0 0 1px silver;outline:none}.picker_wrapper button:focus,.picker_wrapper button:active,.picker_wrapper input:focus,.picker_wrapper input:active{box-shadow:0 0 2px 1px dodgerblue}.picker_wrapper button{padding:.4em .6em;cursor:pointer;background-color:whitesmoke;background-image:-webkit-gradient(linear, left bottom, left top, from(gainsboro), to(transparent));background-image:-webkit-linear-gradient(bottom, gainsboro, transparent);background-image:linear-gradient(0deg, gainsboro, transparent)}.picker_wrapper button:active{background-image:-webkit-gradient(linear, left bottom, left top, from(transparent), to(gainsboro));background-image:-webkit-linear-gradient(bottom, transparent, gainsboro);background-image:linear-gradient(0deg, transparent, gainsboro)}.picker_wrapper button:hover{background-color:white}.picker_selector{position:absolute;z-index:1;display:block;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border:2px solid white;border-radius:100%;box-shadow:0 0 3px 1px #67b9ff;background:currentColor;cursor:pointer}.picker_slider .picker_selector{border-radius:2px}.picker_hue{position:relative;background-image:-webkit-gradient(linear, left top, right top, from(red), color-stop(yellow), color-stop(lime), color-stop(cyan), color-stop(blue), color-stop(magenta), to(red));background-image:-webkit-linear-gradient(left, red, yellow, lime, cyan, blue, magenta, red);background-image:linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);box-shadow:0 0 0 1px silver}.picker_sl{position:relative;box-shadow:0 0 0 1px silver;background-image:-webkit-gradient(linear, left top, left bottom, from(white), color-stop(50%, rgba(255,255,255,0))),-webkit-gradient(linear, left bottom, left top, from(black), color-stop(50%, rgba(0,0,0,0))),-webkit-gradient(linear, left top, right top, from(gray), to(rgba(128,128,128,0)));background-image:-webkit-linear-gradient(top, white, rgba(255,255,255,0) 50%),-webkit-linear-gradient(bottom, black, rgba(0,0,0,0) 50%),-webkit-linear-gradient(left, gray, rgba(128,128,128,0));background-image:linear-gradient(180deg, white, rgba(255,255,255,0) 50%),linear-gradient(0deg, black, rgba(0,0,0,0) 50%),linear-gradient(90deg, gray, rgba(128,128,128,0))}.picker_alpha,.picker_sample{position:relative;background:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='2' height='2'%3E%3Cpath d='M1,0H0V1H2V2H1' fill='lightgrey'/%3E%3C/svg%3E\") left top/contain white;box-shadow:0 0 0 1px silver}.picker_alpha .picker_selector,.picker_sample .picker_selector{background:none}.picker_editor input{font-family:monospace;padding:.2em .4em}.picker_sample::before{content:'';position:absolute;display:block;width:100%;height:100%;background:currentColor}.picker_arrow{position:absolute;z-index:-1}.picker_wrapper.popup{position:absolute;z-index:2;margin:1.5em}.picker_wrapper.popup,.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{background:#f2f2f2;box-shadow:0 0 10px 1px rgba(0,0,0,0.4)}.picker_wrapper.popup .picker_arrow{width:3em;height:3em;margin:0}.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{content:\"\";display:block;position:absolute;top:0;left:0;z-index:-99}.picker_wrapper.popup .picker_arrow::before{width:100%;height:100%;-webkit-transform:skew(45deg);transform:skew(45deg);-webkit-transform-origin:0 100%;transform-origin:0 100%}.picker_wrapper.popup .picker_arrow::after{width:150%;height:150%;box-shadow:none}.popup.popup_top{bottom:100%;left:0}.popup.popup_top .picker_arrow{bottom:0;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.popup.popup_bottom{top:100%;left:0}.popup.popup_bottom .picker_arrow{top:0;left:0;-webkit-transform:rotate(90deg) scale(1, -1);transform:rotate(90deg) scale(1, -1)}.popup.popup_left{top:0;right:100%}.popup.popup_left .picker_arrow{top:0;right:0;-webkit-transform:scale(-1, 1);transform:scale(-1, 1)}.popup.popup_right{top:0;left:100%}.popup.popup_right .picker_arrow{top:0;left:0}",document.documentElement.firstElementChild.appendChild(b);var w=function(){function t(e){c(this,t),this.settings={popup:"right",layout:"default",alpha:!0,editor:!0,editorFormat:"hex",cancelButton:!1,defaultColor:"#0cf"},this._events=new g,this.onChange=null,this.onDone=null,this.onOpen=null,this.onClose=null,this.setOptions(e)}return u(t,[{key:"setOptions",value:function(t){var e=this;if(t){var r=this.settings;if(t instanceof HTMLElement)r.parent=t;else{r.parent&&t.parent&&r.parent!==t.parent&&(this._events.remove(r.parent),this._popupInited=!1),function(t,e,r){for(var n in t)r&&r.indexOf(n)>=0||(e[n]=t[n])}(t,r),t.onChange&&(this.onChange=t.onChange),t.onDone&&(this.onDone=t.onDone),t.onOpen&&(this.onOpen=t.onOpen),t.onClose&&(this.onClose=t.onClose);var n=t.color||t.colour;n&&this._setColor(n)}var i=r.parent;if(i&&r.popup&&!this._popupInited){var o=function(t){return e.openHandler(t)};this._events.add(i,"click",o),_(this._events,i,[" ","Spacebar","Enter"],o),this._popupInited=!0}else t.parent&&!r.popup&&this.show()}}},{key:"openHandler",value:function(t){if(this.show()){t&&t.preventDefault(),this.settings.parent.style.pointerEvents="none";var e=t&&"keydown"===t.type?this._domEdit:this.domElement;setTimeout((function(){return e.focus()}),100),this.onOpen&&this.onOpen(this.colour)}}},{key:"closeHandler",value:function(t){var e=t&&t.type,r=!1;if(t)if("mousedown"===e||"focusin"===e){var n=(this.__containedEvent||0)+100;t.timeStamp>n&&(r=!0)}else m(t),r=!0;else r=!0;r&&this.hide()&&(this.settings.parent.style.pointerEvents="","mousedown"!==e&&this.settings.parent.focus(),this.onClose&&this.onClose(this.colour))}},{key:"movePopup",value:function(t,e){this.closeHandler(),this.setOptions(t),e&&this.openHandler()}},{key:"setColor",value:function(t,e){this._setColor(t,{silent:e})}},{key:"_setColor",value:function(t,e){if("string"==typeof t&&(t=t.trim()),t){e=e||{};var r=void 0;try{r=new p(t)}catch(t){if(e.failSilently)return;throw t}if(!this.settings.alpha){var n=r.hsla;n[3]=1,r.hsla=n}this.colour=this.color=r,this._setHSLA(null,null,null,null,e)}}},{key:"setColour",value:function(t,e){this.setColor(t,e)}},{key:"show",value:function(){if(!this.settings.parent)return!1;if(this.domElement){var t=this._toggleDOM(!0);return this._setPosition(),t}var e,r,n=this.settings.template||'<div class="picker_wrapper" tabindex="-1"><div class="picker_arrow"></div><div class="picker_hue picker_slider"><div class="picker_selector"></div></div><div class="picker_sl"><div class="picker_selector"></div></div><div class="picker_alpha picker_slider"><div class="picker_selector"></div></div><div class="picker_editor"><input aria-label="Type a color name or hex value"/></div><div class="picker_sample"></div><div class="picker_done"><button>Ok</button></div><div class="picker_cancel"><button>Cancel</button></div></div>',i=(e=n,(r=document.createElement("div")).innerHTML=e,r.firstElementChild);return this.domElement=i,this._domH=y(".picker_hue",i),this._domSL=y(".picker_sl",i),this._domA=y(".picker_alpha",i),this._domEdit=y(".picker_editor input",i),this._domSample=y(".picker_sample",i),this._domOkay=y(".picker_done button",i),this._domCancel=y(".picker_cancel button",i),i.classList.add("layout_"+this.settings.layout),this.settings.alpha||i.classList.add("no_alpha"),this.settings.editor||i.classList.add("no_editor"),this.settings.cancelButton||i.classList.add("no_cancel"),this._ifPopup((function(){return i.classList.add("popup")})),this._setPosition(),this.colour?this._updateUI():this._setColor(this.settings.defaultColor),this._bindEvents(),!0}},{key:"hide",value:function(){return this._toggleDOM(!1)}},{key:"destroy",value:function(){this._events.destroy(),this.domElement&&this.settings.parent.removeChild(this.domElement)}},{key:"_bindEvents",value:function(){var t=this,e=this,r=this.domElement,n=this._events;function i(t,e,r){n.add(t,e,r)}i(r,"click",(function(t){return t.preventDefault()})),v(n,this._domH,(function(t,r){return e._setHSLA(t)})),v(n,this._domSL,(function(t,r){return e._setHSLA(null,t,1-r)})),this.settings.alpha&&v(n,this._domA,(function(t,r){return e._setHSLA(null,null,null,1-r)}));var o=this._domEdit;i(o,"input",(function(t){e._setColor(this.value,{fromEditor:!0,failSilently:!0})})),i(o,"focus",(function(t){this.selectionStart===this.selectionEnd&&this.select()})),this._ifPopup((function(){var e=function(e){return t.closeHandler(e)};i(window,"mousedown",e),i(window,"focusin",e),_(n,r,["Esc","Escape"],e);var o=function(e){t.__containedEvent=e.timeStamp};i(r,"mousedown",o),i(r,"focusin",o),i(t._domCancel,"click",e)}));var a=function(e){t._ifPopup((function(){return t.closeHandler(e)})),t.onDone&&t.onDone(t.colour)};i(this._domOkay,"click",a),_(n,r,["Enter"],a)}},{key:"_setPosition",value:function(){var t=this.settings.parent,e=this.domElement;t!==e.parentNode&&t.appendChild(e),this._ifPopup((function(r){"static"===getComputedStyle(t).position&&(t.style.position="relative");var n=!0===r?"popup_right":"popup_"+r;["popup_top","popup_bottom","popup_left","popup_right"].forEach((function(t){t===n?e.classList.add(t):e.classList.remove(t)})),e.classList.add(n)}))}},{key:"_setHSLA",value:function(t,e,r,n,i){i=i||{};var o=this.colour,a=o.hsla;[t,e,r,n].forEach((function(t,e){(t||0===t)&&(a[e]=t)})),o.hsla=a,this._updateUI(i),this.onChange&&!i.silent&&this.onChange(o)}},{key:"_updateUI",value:function(t){if(this.domElement){t=t||{};var e=this.colour,r=e.hsla,n="hsl("+360*r[0]+", 100%, 50%)",i=e.hslString,o=e.hslaString,a=this._domH,s=this._domSL,l=this._domA,c=y(".picker_selector",a),u=y(".picker_selector",s),h=y(".picker_selector",l);_(0,c,r[0]),this._domSL.style.backgroundColor=this._domH.style.color=n,_(0,u,r[1]),b(0,u,1-r[2]),s.style.color=i,b(0,h,1-r[3]);var d=i,f=d.replace("hsl","hsla").replace(")",", 0)"),p="linear-gradient("+[d,f]+")";if(this._domA.style.backgroundImage=p+", url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='2' height='2'%3E%3Cpath d='M1,0H0V1H2V2H1' fill='lightgrey'/%3E%3C/svg%3E\")",!t.fromEditor){var g=this.settings.editorFormat,v=this.settings.alpha,m=void 0;switch(g){case"rgb":m=e.printRGB(v);break;case"hsl":m=e.printHSL(v);break;default:m=e.printHex(v)}this._domEdit.value=m}this._domSample.style.color=o}function _(t,e,r){e.style.left=100*r+"%"}function b(t,e,r){e.style.top=100*r+"%"}}},{key:"_ifPopup",value:function(t,e){this.settings.parent&&this.settings.popup?t&&t(this.settings.popup):e&&e()}},{key:"_toggleDOM",value:function(t){var e=this.domElement;if(!e)return!1;var r=t?"":"none",n=e.style.display!==r;return n&&(e.style.display=r),n}}],[{key:"StyleElement",get:function(){return b}}]),t}();let S=document.querySelector("#drop-area"),A=new n.a(S),k=null,x=document.querySelector("div#page-mode label span"),C=document.querySelector("#basic");const P=new w({parent:C,alpha:!1,editor:!1,popup:"left",color:"orangered"});P.onChange=function(t){C.style.background=t.rgbaString};const R=function(t){let e=document.querySelector("#main_container");k=new i.a(e),k.RectManager=l,document.querySelectorAll("#pager button").forEach(t=>{t.addEventListener("click",(function(){"prev"===this.id&&k.renderPreviousPage(),"next"===this.id&&k.renderNextPage(),x.innerHTML=k.currentPageIndex}))}),document.querySelectorAll(".visibleOnDisplayFile").forEach(t=>t.classList.remove("invisible"));let r,n=document.querySelector("#pickerButton"),o=document.querySelector("#colorPicker");n.checked&&n.click(),document.querySelector("input[type=checkbox]").onclick=function(){this.checked?(k.RectManagerInstance.selectColor=!0,k.RectManagerInstance.colorPicker=P,o.classList.remove("invisible")):(k.RectManagerInstance.selectColor=!1,o.classList.add("invisible"))},r=t.target?this.files:t,k.renderFile(r),A=null};document.querySelector("#fileElem").onchange=R,A.addAfterDrop(R)}]);